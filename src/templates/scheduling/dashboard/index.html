{% extends "base_dashboard.html" %}
{% block title %}Resumo{% endblock %}
{% block extra_head %}
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  .header-gradient{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:1.5rem;border-radius:14px;margin-bottom:1rem}
  .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}
  .stat-card{background:#111827;border:1px solid #223148;border-radius:12px;padding:1rem;display:flex;justify-content:space-between;align-items:center}
  .stat-value{font-size:1.8rem;font-weight:700;color:#fff}
  .list-card{background:#111827;border:1px solid #223148;border-radius:12px;padding:1rem;margin-top:1rem}
</style>
{% endblock %}
{% block content %}

<div class="header-gradient">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap">
    <h2 style="margin:0">Resumo</h2>
    <a class="button" href="{% url 'dashboard:booking_create' %}">Novo agendamento</a>
  </div>
</div>

<div class="stats-grid">
  <div class="stat-card" style="border-top:3px solid #667eea">
    <div>
      <div style="color:#cbd5e1">Agendamentos</div>
      <div class="stat-value">{{ totals.bookings }}</div>
    </div>
    <span class="fas fa-calendar-alt" style="color:#fff"></span>
  </div>
  <div class="stat-card" style="border-top:3px solid #10b981">
    <div>
      <div style="color:#cbd5e1">Serviços ativos</div>
      <div class="stat-value">{{ totals.services }}</div>
    </div>
    <span class="fas fa-spa" style="color:#fff"></span>
  </div>
  <div class="stat-card" style="border-top:3px solid #f59e0b">
    <div>
      <div style="color:#cbd5e1">Profissionais</div>
      <div class="stat-value">{{ totals.professionals }}</div>
    </div>
    <span class="fas fa-users" style="color:#fff"></span>
  </div>
</div>

<div class="list-card">
  <h3 style="margin-top:0">Últimos agendamentos</h3>
  {% if bookings %}
    <table>
      <thead>
        <tr>
          <th>Cliente</th>
          <th>Serviço</th>
          <th>Profissional</th>
          <th>Data</th>
          <th>Status</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
      {% for booking in bookings %}
        <tr>
          <td>{{ booking.customer_name }}</td>
          <td>{{ booking.service.name }}</td>
          <td>{{ booking.professional.display_name }}</td>
          <td>{{ booking.scheduled_for|date:"d/m/Y H:i" }}</td>
          <td>{{ booking.get_status_display }}</td>
          <td><a class="button" href="{% url 'dashboard:booking_detail' booking.pk %}">Detalhes</a></td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Sem agendamentos recentes.</p>
  {% endif %}
</div>

{% endblock %}
