(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[56],{1066:function(e,t,a){"use strict";a(0);var n=a(2937),s=a(2824),i=a(1814),c=a(590),o=a(684),r=a(22);t.a=e=>{var t;let{form:a,is_mobile:l,filter:d,...b}=e;const{getFieldValue:u,setFieldsValue:m}=a,{name:j,double_checkbox:h,label:p}=d,g=null!==(t=u(j))&&void 0!==t?t:"none",_=["true","all"].includes(g),O=["false","all"].includes(g),f=e=>()=>{switch(g){case"true":return m({[j]:"true"===e?"none":"all"});case"false":return m({[j]:"false"===e?"none":"all"});case"all":return m({[j]:"true"===e?"false":"true"});default:return m({[j]:e})}};return l?Object(r.jsxs)(c.a,{header:p,children:[Object(r.jsx)(n.a.Item,{name:j,noStyle:!0,children:Object(r.jsx)(s.a,{type:"hidden"})}),Object(r.jsx)(o.a,{checked:_,onChange:f("true"),children:h.true}),Object(r.jsx)(o.a,{checked:O,onChange:f("false"),children:h.false})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(n.a.Item,{name:j,noStyle:!0,children:Object(r.jsx)(s.a,{type:"hidden"})}),Object(r.jsx)(n.a.Item,{noStyle:!0,shouldUpdate:!0,children:()=>Object(r.jsx)(i.a,{checked:_,onChange:f("true"),...b,children:h.true})}),Object(r.jsx)(n.a.Item,{noStyle:!0,shouldUpdate:!0,children:()=>Object(r.jsx)(i.a,{checked:O,onChange:f("false"),...b,children:h.false})})]})}},1202:function(e,t,a){"use strict";var n=a(0),s=a(50),i=a(3065),c=a(3068),o=a(3042),r=a(579),l=a(27),d=a(654),b=a(18),u=a(593);var m=a(2937),j=a(2883),h=a(2824),p=a(159),g=a(250),_=a(37),O=a(1850),f=a(116),v=a(76);const y=_.e`
  mutation saveDigitalSignature($data: SaveDigitalSignatureInput!) {
    saveDigitalSignature(input: $data) {
      success errors
    }
  }
`;var x=()=>{const[e,{loading:t}]=Object(O.a)(y);return[async t=>{try{const{data:a}=await e({variables:{data:{...t}}}),{success:n=!1,errors:s=[]}=(null===a||void 0===a?void 0:a.saveDigitalSignature)||{};return null===s||void 0===s||s.forEach((e=>f.b.error(e))),{success:n}}catch(a){return v.a.captureException(a),f.b.error(Object(s.b)("phrases.generic_save_error_message")),console.error(a),{success:!1}}},t]},w=a(1024),k=a.n(w),C=a(581),S=a(19),I=a(2879);const z=_.e`
  query getEmployeeDigitalSignature($id: ID) {
    employee(id: $id) {
      id
      digital_signature_url
    }
  }
`;var $=e=>Object(I.a)(z,{fetchPolicy:"network-only",onCompleted:t=>{let{employee:a}=t;e(a.digital_signature_url)}}),D=a(339),R=a(22);const F=(e,t)=>{const[a,i]=Object(n.useState)(!1),[c,o]=Object(n.useState)({width:0,height:0}),[d,b]=Object(n.useState)(),[u,m]=Object(n.useState)(),{afterSave:j}=e,h=Object(n.useRef)(null),_=Object(l.a)((e=>e.is_mobile)),[O,v]=x(),[y,{loading:w}]=$(b);Object(n.useEffect)((()=>{if(!a)return;const e=()=>{const e=document.getElementById("drawer-canvas-container");e&&o({width:e.offsetWidth,height:e.offsetHeight})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[a]),Object(n.useEffect)((()=>{if(!a)return;const e=setTimeout((()=>{const e=document.getElementById("drawer-canvas-container");e&&o({width:e.offsetWidth,height:e.offsetHeight})}),500);return()=>clearTimeout(e)}),[a]);const S=e=>{let{batch_payment_id:t,employee_id:a}=e;a&&y({variables:{id:a}}),m(t),i(!0)},I=()=>{i(!1)};Object(n.useImperativeHandle)(t,(()=>({open:S,close:I})));return Object(R.jsx)(g.a,{closable:!0,title:Object(s.b)("digital_signature.add_signature"),height:"100%",width:650,destroyOnClose:!0,onClose:I,open:a,placement:_?"bottom":"right",styles:{body:{padding:_?10:15,height:"100%",width:"100%"}},push:!1,footer:Object(R.jsx)(C.a,{disabled:v,loading:v,submit:async()=>{var e,t,a,n;if(!(null===(e=h.current)||void 0===e||null===(t=e.isEmpty)||void 0===t||!t.call(e))&&!d)return void f.b.warning(Object(s.b)("employees.drawer.digital_signature.empty_warning"));const i=null===(a=h.current)||void 0===a||null===(n=a.getTrimmedCanvas())||void 0===n?void 0:n.toDataURL("image/png"),c=await Object(r.c)({image_url:d||i,type:"png"});if(!u)return;const o={signaturable_type:"Commissions::BatchPayment",signaturable_id:u,image:c},{success:l}=await O(o);l&&(I(),null===j||void 0===j||j(),f.b.success(Object(s.b)("digital_signature.document_signed_successfully")))},save_text:Object(s.b)("verbs.sign"),extra:Object(R.jsx)(p.a,{onClick:()=>{var e;null===(e=h.current)||void 0===e||e.clear(),b(void 0)},loading:v,disabled:v,type:"default",size:_?"large":"middle",block:_,children:Object(R.jsx)(g.h,{$semibold:!0,children:Object(s.b)("verbs.clean")})})}),children:Object(R.jsxs)(L,{id:"drawer-canvas-container",children:[Object(R.jsx)(D.a,{loading:w}),d?Object(R.jsx)(M,{style:c,src:d},d):Object(R.jsx)(k.a,{ref:h,penColor:"#3a3a3a",canvasProps:c,clearOnResize:!1})]})})};F.displayName="DigitalSignatureDrawer";var E=Object(n.forwardRef)(F);const L=S.d.div.withConfig({componentId:"wb__sc-1lr067-0"})(["height:100%;width:100%;border:1px solid #DEDEDE;background-color:transparent;display:flex;align-items:center;justify-content:center;"]),M=S.d.img.attrs({loading:"lazy"}).withConfig({componentId:"wb__sc-1lr067-1"})(["background-repeat:no-repeat;background-size:cover;"]);var B=a(591);const P=e=>{const{batch_payment:t,afterSave:a}=e,_=Object(n.useRef)(null),O=Object(l.a)((e=>e.current_user.salon)),f=Object(l.a)((e=>e.is_mobile)),{checkHasFeature:v,handleSendDigitalSignatureLink:y,handleCopyLink:x}=(e=>{let{signature_url_link:t,document_type:a,name:n}=e;const i=Object(l.a)((e=>e.current_user.salon)),c=Object(l.a)((e=>{let{current_user:{features:t,addons:a}}=e;return t.has_digital_signature||a.has_digital_signature})),o=Object(d.a)(),m=Object(u.b)(),j=()=>!!c||(m({is_addon:!0,search:b.a.ID_DIGITAL_SIGNATURE}),!1);return{checkHasFeature:j,handleSendDigitalSignatureLink:e=>{if(!j())return;const c=Object(s.b)("digital_signature.message_description",{name:n,document_type:a,signature_url_link:t,salon_name:i.name});Object(r.z)({phone:e.phone,message:c})},handleCopyLink:()=>{t&&j()&&o(t)}}})({signature_url_link:null===t||void 0===t?void 0:t.signature_url_link,name:null===t||void 0===t?void 0:t.employee.name,document_type:Object(s.b)("finance.commissions.commission_in_the_amount_of",{value:Object(r.d)(null===t||void 0===t?void 0:t.total_paid_value,{cents:!1})})}),w=Object(s.b)("digital_signature.message_description",{name:null===t||void 0===t?void 0:t.employee.name,document_type:Object(s.b)("words.commission"),signature_url_link:"https://tinyurl.com/2fty",salon_name:O.name});return Object(R.jsxs)(m.a,{layout:"vertical",children:[Object(R.jsxs)(g.g,{$wrap:!0,gutter:{xs:0,sm:8},children:[Object(R.jsx)(j.a,{xs:24,sm:12,children:Object(R.jsx)(m.a.Item,{label:Object(s.b)("words.cellphone"),children:Object(R.jsx)(B.a,{value:null===t||void 0===t?void 0:t.employee.phone2,disabled:!(null===t||void 0===t||!t.employee.phone2),size:f?"large":"middle"})})}),Object(R.jsx)(j.a,{xs:24,sm:12,children:Object(R.jsx)(m.a.Item,{label:Object(s.b)("digital_signature.signature_link"),children:Object(R.jsx)(h.a,{prefix:Object(R.jsx)(i.a,{}),disabled:!0,value:"https://tinyurl.com/2fty...",size:f?"large":"middle",suffix:Object(R.jsx)(g.h,{$link:!0,onClick:x,children:Object(s.b)("verbs.copy")})})})}),Object(R.jsx)(j.a,{span:24,children:Object(R.jsx)(m.a.Item,{label:Object(s.b)("digital_signature.message_preview"),children:Object(R.jsx)(h.a.TextArea,{rows:6,autoSize:{minRows:6,maxRows:6},style:{width:"100%"},placeholder:Object(s.b)("digital_signature.provide_the_message"),value:w,disabled:!0})})}),Object(R.jsxs)(N,{span:24,children:[Object(R.jsx)(p.a,{type:"primary",icon:Object(R.jsx)(c.a,{}),onClick:()=>{var e;v()&&(null===(e=_.current)||void 0===e||e.open({employee_id:null===t||void 0===t?void 0:t.employee.id,batch_payment_id:null===t||void 0===t?void 0:t.id}))},size:f?"large":"middle",block:f,children:Object(s.b)("digital_signature.sign_now")}),Object(R.jsx)(p.a,{type:"primary",className:"ant-button-success",icon:Object(R.jsx)(o.a,{}),onClick:()=>y({phone:null===t||void 0===t?void 0:t.employee.phone2}),size:f?"large":"middle",block:f,children:Object(s.b)("phrases.request_signature")})]})]}),Object(R.jsx)(E,{ref:_,afterSave:a})]})};P.displayName="SendSignatureLink";var H=P;const N=Object(S.d)(j.a).withConfig({componentId:"wb__sc-1xi2bq8-0"})(["display:flex;justify-content:flex-end;.ant-btn + .ant-btn{margin-left:8px;}",""],(e=>e.theme.is_mobile&&Object(S.c)(["flex-direction:column-reverse;flex-wrap:wrap;justify-content:unset;.ant-btn + .ant-btn{margin-left:0;margin-bottom:8px;}"])));var V=a(1438),q=a(53),Y=a.n(q);const T=e=>{let{digital_signature:t,name:a}=e;const[i,c]=Object(n.useState)(300),o=Object(l.a)((e=>e.is_mobile));return Object(n.useEffect)((()=>{const e=document.getElementById("canvas-container");e&&c(o?e.offsetWidth:Math.floor(.5*e.offsetWidth))}),[o]),Object(R.jsxs)(U,{children:[Object(R.jsx)(W,{id:"canvas-container",children:Object(R.jsx)(J,{style:{width:i,height:Math.floor(i/2)},src:t.image_url},t.id+t.image_url)}),Object(R.jsx)(V.a,{}),Object(R.jsx)(g.h,{$size:16,children:Object(s.b)("digital_signature.signed_by_user_in_date",{name:a,date:Y()(t.created_at,b.H).format("L, HH:mm[h]"),interpolation:{escapeValue:!1}})})]})};T.displayName="Signed";var A=Object(n.memo)(T);const U=S.d.div.withConfig({componentId:"wb__sc-9t53az-0"})(["position:relative;"]),W=S.d.div.withConfig({componentId:"wb__sc-9t53az-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;"]),J=S.d.img.attrs({loading:"lazy"}).withConfig({componentId:"wb__sc-9t53az-2"})(["background-repeat:no-repeat;background-size:contain;"]),G=e=>{var t;const a=null===(t=e.batch_payment)||void 0===t?void 0:t.digital_signature;var n;return null!==a&&void 0!==a&&a.id?Object(R.jsx)(A,{digital_signature:a,name:null===(n=e.batch_payment)||void 0===n?void 0:n.employee.name}):Object(R.jsx)(H,{...e})};G.displayName="DigitalSignatureContent";t.a=Object(n.memo)(G)},1220:function(e,t,a){"use strict";var n=a(13),s=a(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z"}}]},name:"dashboard",theme:"outlined"},c=a(71),o=function(e,t){return s.createElement(c.a,Object(n.a)({},e,{ref:t,icon:i}))},r=s.forwardRef(o);t.a=r},1456:function(e,t,a){"use strict";var n=a(0),s=a(50),i=a(250),c=a(37),o=a(2879);const r=c.e`
  query BatchPayment($id: ID!) {
    commissions_batch_payment(id: $id) {
      id
      total_paid_value

      employee {
        id
        name
        phone2
        digital_signature
      }

      digital_signature {
        id
        image_url
        created_at
      }

      signature_url_link
    }
  }
`;var l=e=>Object(o.a)(r,{fetchPolicy:"network-only",...e}),d=a(27),b=a(339),u=a(586),m=a(19),j=a(1202),h=a(22);const p=(e,t)=>{const[a,c]=Object(n.useState)(!1),[o,r]=Object(n.useState)(),{afterSave:m}=e,p=Object(d.a)((e=>e.is_mobile)),_=Object(n.useCallback)((e=>{const{commissions_batch_payment:t}=e;r(t)}),[]),[O,{loading:f,error:v}]=l({onCompleted:_}),y=e=>{c(!0),O({variables:{id:e}})},x=()=>{c(!1)};Object(n.useImperativeHandle)(t,(()=>({open:y,close:x})));const w=Object(n.useCallback)((e=>{e||r(void 0)}),[]);return Object(h.jsx)(i.a,{closable:!0,title:Object(s.b)("phrases.digital_signature"),height:"100%",width:600,destroyOnClose:!0,onClose:x,afterOpenChange:w,open:a,placement:p?"bottom":"right",push:!1,footer:null,children:Object(h.jsxs)(g,{children:[Object(h.jsx)(b.a,{loading:f}),Object(h.jsx)(u.a,{visible:!!v,small:!0}),Object(h.jsx)(j.a,{batch_payment:o,afterSave:()=>{x(),m()}})]})})};p.displayName="DigitalSignatureDrawer";t.a=Object(n.forwardRef)(p);const g=m.d.div.withConfig({componentId:"wb__sc-1w5yrnh-0"})(["position:relative;height:100%;"])},2827:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(585),i=a(1456),c=a(250),o=a(2824),r=a(2937),l=a(3024),d=a(159),b=a(37),u=a(1850),m=a(116),j=a(76),h=a(50);const p=b.e`
  mutation deleteCommissionsBatchPayment($data: DeleteCommissionsBatchPaymentInput!) {
    deleteCommissionsBatchPayment(input: $data) {
      success
      errors
    }
  }
`;var g=()=>{const[e,t]=Object(n.useState)(!1),[a]=Object(u.a)(p);return{destroyBatchPayment:Object(n.useCallback)((async e=>{t(!0);const n=m.b.loading(`${Object(h.b)("verbs.wait")}...`,0);try{const{data:s}=await a({variables:{data:e}}),{success:i,errors:c}=(null===s||void 0===s?void 0:s.deleteCommissionsBatchPayment)||{};return i?(m.b.success(Object(h.b)("phrases.deleted_successfully",{prefix:Object(h.b)("words.payment")})),{success:!0}):(null===c||void 0===c||c.map((e=>m.b.error(e))),{success:!1})}catch(s){return j.a.captureException(s),m.b.error(Object(h.b)("phrases.cant_be_deleted",{prefix:Object(h.b)("words.payment")})),console.error(s),{success:!1}}finally{t(!1),n()}}),[a]),is_destroying:e}},_=a(22);const{TextArea:O}=o.a,f=(e,t)=>{const{onDestroy:a}=e,[s,i]=Object(n.useState)(!1),[b]=r.a.useForm(),{submit:u,setFieldsValue:m,resetFields:j}=b,{destroyBatchPayment:p,is_destroying:f}=g(),v=Object(n.useCallback)((()=>{i(!1)}),[]),y=Object(n.useCallback)((e=>{i(!0),m({id:e})}),[m]);Object(n.useImperativeHandle)(t,(()=>({open:y,close:v})));const x=Object(n.useCallback)((async e=>{const{success:t}=await p(e);t&&(v(),a())}),[v,p,a]);return Object(_.jsxs)(l.a,{open:s,afterClose:Object(n.useCallback)((()=>j()),[j]),forceRender:!0,width:400,onCancel:v,centered:!0,footer:Object(_.jsxs)(c.g,{gutter:8,justify:"end",children:[Object(_.jsx)(d.a,{onClick:v,block:!0,size:"large",children:Object(h.b)("verbs.cancel")}),Object(_.jsx)(d.a,{type:"primary",danger:!0,onClick:u,loading:f,block:!0,size:"large",children:Object(_.jsx)(c.h,{$semibold:!0,children:Object(h.b)("verbs.delete")})})]}),children:[Object(_.jsxs)(r.a,{form:b,layout:"vertical",onFinish:x,children:[Object(_.jsx)(r.a.Item,{noStyle:!0,name:"id",children:Object(_.jsx)(o.a,{type:"hidden"})}),Object(_.jsx)(r.a.Item,{label:Object(h.b)("words.justification"),name:"adjustment_description",rules:[{whitespace:!0,required:!0,message:Object(h.b)("phrases.required_field")}],children:Object(_.jsx)(O,{autoSize:{minRows:3},placeholder:Object(h.b)("words.justification")})})]}),Object(_.jsx)(c.h,{$block:!0,$color:"gray_2",$size:14,children:Object(h.b)("finance.commissions.linked_to_cash_register_closure")})]})};f.displayName="JustificationModal";var v=Object(n.memo)(Object(n.forwardRef)(f)),y=a(20),x=a(1220),w=a(1829),k=a(687),C=a(638),S=a(27);var I=e=>{const t=Object(y.o)(),a=Object(S.a)((e=>e.current_user.permissions)),s=Object(n.useMemo)((()=>[{label:Object(h.b)("words.panel"),icon:x.a,onClick:()=>t("/wow")},{label:Object(h.b)("words.schedule"),icon:w.a,onClick:()=>{null!==a&&void 0!==a&&a.can_access_calendar?t("/calendar"):m.b.warning(Object(h.b)("phrases.no_permission_to_do_this"))}},{label:Object(h.b)("words.filter",{count:2}),is_active:!1,icon:k.a,onClick:()=>e()}]),[t,e,a.can_access_calendar]);Object(C.a)(s)},z=a(582),$=a(232);const D=Object(n.lazy)((()=>Object($.a)((()=>a.e(145).then(a.bind(null,3011)))))),R=Object(n.lazy)((()=>Object($.a)((()=>a.e(204).then(a.bind(null,2960)))))),F=e=>Object(_.jsx)(z.a,{Desktop:D,Mobile:R,...e});F.displayName="BatchPaymentsTable";var E=F,L=a(446),M=a(731),B=a(614),P=a(590),H=a(19),N=a(581),V=a(1066),q=a(783);const Y=(e,t)=>{const[a,s]=Object(n.useState)(!1),{handleChangeFilters:i}=e,o=Object(S.a)((e=>e.current_user.permissions)),[l]=r.a.useForm(),{setFieldsValue:d,resetFields:b,submit:u}=l,m=e=>{var t,a;s(!0),d({employee_id:e.employee_id,start_date:null===(t=e.dates)||void 0===t?void 0:t[0],end_date:null===(a=e.dates)||void 0===a?void 0:a[1],signeds:e.signeds})},j=()=>{s(!1)};Object(n.useImperativeHandle)(t,(()=>({open:m,close:j})));return Object(_.jsxs)(A,{open:a,onClose:j,width:"100%",height:"100%",placement:"bottom",push:!1,afterOpenChange:e=>!e&&b(),footer:Object(_.jsx)(N.a,{submit:u,save_text:Object(h.b)("finance.commissions.search_commissions")}),children:[Object(_.jsx)(c.h,{$bold:!0,$size:24,$paddings:[25,15,15,15],children:Object(h.b)("words.filter",{count:2})}),Object(_.jsxs)(r.a,{form:l,onFinish:e=>{const t={employee_id:e.employee_id,dates:[e.start_date,e.end_date],signeds:e.signeds};i(t),j()},children:[Object(_.jsx)(P.a,{header:Object(h.b)("words.employee"),children:Object(_.jsx)(U,{name:"employee_id",children:Object(_.jsx)(B.a,{disabled:!o.can_access_all_commissions,size:"large",style:{width:"100%",height:40}})})}),Object(_.jsx)(U,{name:"signeds",children:Object(_.jsx)(V.a,{filter:{label:Object(h.b)("digital_signature.digitally_signed",{count:2,context:"female"}),name:"signeds",default_value:null,double_checkbox:{true:Object(h.b)("words.yes"),false:Object(h.b)("words.no")}},form:l,is_mobile:!0})}),Object(_.jsx)(r.a.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.start_date!==t.start_date,children:()=>Object(_.jsx)(M.a,{form:l,filter:{label:Object(h.b)("words.date"),name:"dates",rangepicker:{start_date_name:"start_date",end_date_name:"end_date"}},is_mobile:!0})}),Object(_.jsx)(q.a,{form:l})]})]})};Y.displayName="FiltersDrawer";var T=Object(n.memo)(Object(n.forwardRef)(Y));const A=Object(H.d)(L.a).withConfig({componentId:"wb__sc-1jnsnmd-0"})(["z-index:990;.ant-drawer-body{background-color:#f8f8f8;padding:0 15px;}"]),U=Object(H.d)(r.a.Item).withConfig({componentId:"wb__sc-1jnsnmd-1"})(["margin-bottom:0 !important;"]);var W=a(405);const J=b.e`
  query BatchPayments(
    $employee_id: ID,
    $payment_date_range_start: String,
    $payment_date_range_end: String,
    $signeds: Boolean
  ) {
    commissions_batch_payments(
      employee_id: $employee_id,
      payment_date_range_start: $payment_date_range_start,
      payment_date_range_end: $payment_date_range_end,
      sort_field: "created_at",
      sort_order: "desc",
      signeds: $signeds
    ) {
      id
      created_at
      payment_date
      commission_items_total_value
      advances_total_value
      bonifications_total_value
      total_paid_value
      has_cash_accounting

      user {
        id
        name
        employee {
          id name
        }
      }

      employee {
        id name phone2
      }

      digital_signature {
        id created_at image_url
      }

      signature_url_link
    }
  }
`;var G=(e,t)=>{var a,n;return Object(W.f)(J,{skip:!t,fetchPolicy:"network-only",variables:{employee_id:e.employee_id,payment_date_range_start:null===(a=e.dates[0])||void 0===a?void 0:a.format("YYYY-MM-DD"),payment_date_range_end:null===(n=e.dates[1])||void 0===n?void 0:n.format("YYYY-MM-DD"),signeds:K(e.signeds)}})};const K=e=>"false"!==e&&("true"===e||void 0);var Q=a(817),X=a(606),Z=a(1256);const ee=e=>{let{filters:t,handleChangeFilters:a}=e;const n=Object(S.a)((e=>e.current_user.permissions));return Object(_.jsxs)(c.g,{justify:"end",$gap:8,children:[Object(_.jsx)(Z.a,{value:t.signeds,allowClear:!0,placeholder:Object(h.b)("digital_signature.digitally_signed",{count:2,context:"female"}),style:{width:200},options:[{label:Object(h.b)("digital_signature.signed",{count:2}),value:"true"},{label:Object(h.b)("digital_signature.not_signed",{count:2}),value:"false"}],onChange:e=>a({signeds:e})}),Object(_.jsx)(B.a,{value:t.employee_id,style:{width:250},getPopupContainer:()=>document.body,disabled:!n.can_access_all_commissions,onChange:e=>a({employee_id:e}),allowClear:!0}),Object(_.jsx)(X.a,{value:t.dates,allowClear:!1,style:{width:250},placement:"bottomRight",onChange:e=>a({dates:e}),getPopupContainer:()=>document.body})]})};ee.displayName="Filters";var te=Object(n.memo)(ee),ae=a(597);const ne=e=>{const t=Object(Q.a)(),a=Object(S.a)((e=>e.is_mobile));return Object(_.jsx)(ae.b,{title:Object(h.b)("words.commission",{count:2}),tabs:t,children:!a&&Object(_.jsx)(te,{...e})})};ne.displayName="CommissionsHeader";var se=Object(n.memo)(ne),ie=a(53),ce=a.n(ie);const oe={employee_id:void 0,dates:[ce()().subtract(1,"month"),ce()().endOf("month")],signeds:void 0},re=()=>{const[e,t]=Object(n.useState)(oe),a=Object(S.a)((e=>e.current_user.permissions)),c=Object(S.a)((e=>e.current_user.employee)),o=Object(S.a)((e=>e.current_user.features)),r=!!Object(S.a)((e=>e.is_webook))||o.has_commissions,l=Object(n.useRef)(null),d=Object(n.useRef)(null),b=Object(n.useRef)(null);Object(n.useEffect)((()=>{a.can_access_all_commissions||t((e=>({...e,employee_id:c.id})))}),[a.can_access_all_commissions,c.id]);const{data:u,loading:m,refetch:j}=G(e,r),{destroyBatchPayment:h}=g(),p=Object(n.useCallback)((e=>{var t;null===(t=d.current)||void 0===t||t.open(e)}),[]),O=Object(n.useCallback)((()=>{b.current.open(e)}),[e]);I(O);const f=Object(n.useCallback)((e=>{t((t=>({...t,...e})))}),[]),y=Object(n.useCallback)((async e=>{var t;if(e.has_cash_accounting)return void(null===(t=l.current)||void 0===t||t.open(e.id));const{success:a}=await h({id:e.id});a&&j()}),[h,j]),x=Object(n.useMemo)((()=>(null===u||void 0===u?void 0:u.commissions_batch_payments)||[]),[null===u||void 0===u?void 0:u.commissions_batch_payments]);return Object(_.jsxs)(s.b,{children:[Object(_.jsx)(se,{filters:e,handleChangeFilters:f}),Object(_.jsx)(s.c,{$pageFull:!0,has_permission:a.can_access_commission,children:Object(_.jsx)(E,{loading:m,batch_payments:x,handleDestroyBatchPayment:y,openSignatureDrawer:p})}),Object(_.jsx)(T,{ref:b,handleChangeFilters:f}),Object(_.jsx)(v,{ref:l,onDestroy:j}),Object(_.jsx)(i.a,{ref:d,afterSave:j})]})};re.displayName="BatchPayments";t.default=Object(n.memo)(re)},609:function(e,t,a){"use strict";var n=a(0),s=a(50),i=a(159),c=a(53),o=a.n(c),r=a(19),l=a(22);const d=e=>{let{handleChangeRange:t}=e;return Object(l.jsx)(b,{children:u.map((e=>{let{label:a,value:n}=e;return Object(l.jsx)(i.a,{type:"primary",onClick:()=>t(n),children:a},a)}))})};d.displayName="ExtraRangeComponent",t.a=Object(n.memo)(d);const b=r.d.div.withConfig({componentId:"wb__sc-hoi2yi-0"})(["display:flex;flex-wrap:wrap;justify-content:space-between;padding-top:8px;.ant-btn{cursor:pointer;width:49%;text-align:center;margin-bottom:8px;margin-right:0;}"]),u=[{label:Object(s.b)("words.today"),value:[o()(),o()()]},{label:Object(s.b)("date.last_week"),value:[o()().startOf("week").subtract(1,"week"),o()().endOf("week").subtract(1,"week")]},{label:Object(s.b)("date.last_month"),value:[o()().subtract(1,"month").startOf("month"),o()().subtract(1,"month").endOf("month")]},{label:Object(s.b)("date.current_month"),value:[o()().startOf("month"),o()().endOf("month")]},{label:Object(s.b)("date.six_months_ago"),value:[o()().subtract(6,"month"),o()()]},{label:Object(s.b)("date.one_year_ago"),value:[o()().subtract(12,"month"),o()()]}]},610:function(e,t,a){"use strict";a.d(t,"d",(function(){return m})),a.d(t,"b",(function(){return j})),a.d(t,"c",(function(){return h})),a.d(t,"a",(function(){return p}));var n=a(19),s=a(0),i=a(2934),c=a(609),o=a(22);const r=(e,t)=>{let{onRangeChange:a,...n}=e;const[r,l]=Object(s.useState)(!1),b=Object(s.useCallback)((e=>{a(e)}),[a]);return Object(o.jsx)(i.a,{ref:t,showNow:!1,renderExtraFooter:()=>Object(o.jsx)(d,{children:Object(o.jsx)(c.a,{handleChangeRange:b})}),...n,open:r,onOpenChange:l})};r.displayName="SimpleRangePicker";var l=Object(s.memo)(Object(s.forwardRef)(r));const d=n.d.div.withConfig({componentId:"wb__sc-13lwjt0-0"})(["width:265px;"]),b={true:!0,false:!1,all:null,none:null},u=["start_date","end_date","birthday_start_date","birthday_end_date","start_date_open","start_date_close","end_date_open","end_date_close"],m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},a={};return Object.entries(e).forEach((e=>{let[a,n]=e;n in b&&(t[a]=b[n])})),Object.entries(e).forEach((e=>{let[t,n]=e;u.includes(t)&&(a[t]=null===n||void 0===n?void 0:n.format("YYYY-MM-DD"))})),{...e,...t,...a}},j=n.d.div.withConfig({componentId:"wb__sc-gq8qm5-0"})(["display:flex;flex-direction:column;background-color:",";border-radius:16px;box-shadow:0 0 10px 5px #f3f3f3;padding:15px;border:1px solid rgba(0 0 0 / 3%);transition:box-shadow .1s;margin-bottom:5px;.ant-checkbox-wrapper + .ant-checkbox-wrapper{overflow:hidden;margin-left:0;width:100%;:not(:first-child){overflow:hidden;white-space:nowrap;text-overflow:ellipsis;word-break:keep-all;}}.ant-radio-wrapper{margin-right:0;}.ant-checkbox-group-item{margin-right:0;}.ant-calendar-picker-clear{background:transparent;color:",";}.ant-calendar-picker-input{border-top:none;border-left:none;border-right:none;border-radius:0;margin-top:5px;background:transparent;"," &:focus{box-shadow:none;}}.anticon-calendar{color:rgba(0,0,0,.2);}",""],(e=>e.theme.colors.white),(e=>e.theme.dark&&e.theme.dark_white),(e=>e.theme.dark&&`\n      border-color: ${e.theme.dark_secondary};\n      color: ${e.theme.dark_white};\n    `),(e=>e.tags&&Object(n.c)(["display:flex;flex-wrap:wrap;.ant-tag{margin:0 4px 4px 0;cursor:pointer;}"]))),h=Object(n.d)(l).withConfig({componentId:"wb__sc-gq8qm5-1"})(["width:100%;border-top:none;border-left:none;border-right:none;border-radius:0 !important;margin-top:5px;background:transparent;&.ant-picker-focused{box-shadow:none;}"]),p=n.d.div.withConfig({componentId:"wb__sc-gq8qm5-2"})(["min-width:0;width:0;z-index:210;text-overflow:ellipsis;white-space:nowrap;position:sticky;top:calc(","px + 10px);overflow:hidden;max-height:calc(100vh - 60px);align-self:flex-start;transition:width .2s;",""],(e=>e.theme.menu_top_height),(e=>!!e.$visible&&Object(n.c)(["min-width:230px;width:230px;padding-right:7px;overflow-y:auto;overflow-x:hidden;"])))},638:function(e,t,a){"use strict";var n=a(0),s=a(62),i=a(27);t.a=function(e){let{disabled:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=Object(i.a)((e=>e.is_mobile)),c=Object(s.a)();Object(n.useEffect)((()=>{if(a&&!t)return c({type:"set_mobile_menu_actions",payload:e.filter(Boolean)}),()=>{c({type:"set_mobile_menu_actions",payload:[]})}}),[t,a,e,c])}},684:function(e,t,a){"use strict";a(0);var n=a(250),s=a(19),i=a(595),c=a(22);const o=e=>{let{children:t,checked:a,disabled:s,onChange:i}=e;return Object(c.jsx)(l,{onClick:()=>i(),children:Object(c.jsxs)(n.g,{$alignCenter:!0,children:[Object(c.jsx)(r,{children:Object(c.jsx)(d,{$checked:a,$disabled:s})}),t]})})};o.displayName="CheckboxItem",t.a=o;const r=s.d.div.withConfig({componentId:"wb__sc-1xolpke-0"})(["position:relative;width:35px;height:21px;"]),l=Object(s.d)(i.a).withConfig({componentId:"wb__sc-1xolpke-1"})(["padding:0 15px;"]),d=s.d.div.withConfig({componentId:"wb__sc-1xolpke-2"})(["position:absolute;top:0;left:0;width:21px;height:21px;border:1px solid #ccc;border-radius:50%;transition:background-color .2s;"," ",""],(e=>e.$checked&&Object(s.c)(["border-color:#505afb;background-color:#505afb;&:after{display:block;border-color:#fff;position:absolute;top:2.5px;right:7px;z-index:999;width:5px;height:11px;border-style:solid;border-width:0 1px 1px 0;content:'\\0020';transform:rotate(45deg);}"])),(e=>e.$disabled&&Object(s.c)(["color:rgba(0,0,0,0.25);background:#f5f5f5;border-color:#d9d9d9 !important;text-shadow:none;box-shadow:none;"])))},687:function(e,t,a){"use strict";var n=a(13),s=a(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},c=a(71),o=function(e,t){return s.createElement(c.a,Object(n.a)({},e,{ref:t,icon:i}))},r=s.forwardRef(o);t.a=r},731:function(e,t,a){"use strict";var n=a(0),s=a(2937),i=a(2824),c=a(250),o=a(610),r=a(628),l=a(595),d=a(590),b=a(53),u=a.n(b),m=a(50),j=a(539),h=a(22);const p=e=>{let{is_mobile:t,filter:a,form:b}=e;const p=Object(n.useRef)(null),{setFieldsValue:g,getFieldValue:_}=b,{rangepicker:O,label:f}=a,{allowClear:v=!0}=O||{},y=O.start_date_name,x=O.end_date_name,w=_(y),k=_(x),C=function(){if(!(arguments.length<=0?void 0:arguments[0])||!(arguments.length<=1?void 0:arguments[1]))return;const e=u()(arguments.length<=0?void 0:arguments[0]),t=u()(arguments.length<=1?void 0:arguments[1]);e.isAfter(t)?g({[y]:t,[x]:e}):g({[y]:e,[x]:t})};return t?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(s.a.Item,{name:y,noStyle:!0,children:Object(h.jsx)(i.a,{type:"hidden"})}),Object(h.jsx)(s.a.Item,{name:x,noStyle:!0,children:Object(h.jsx)(i.a,{type:"hidden"})}),Object(h.jsxs)(d.a,{header:f,children:[Object(h.jsx)(l.a,{style:{padding:"0 15px"},withRightArrow:!0,onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.open()},children:Object(h.jsx)("div",{style:{display:"flex",alignItems:"center"},children:w&&k?Object(h.jsxs)(h.Fragment,{children:[w.format("LL"),"\xa0",Object(h.jsx)(j.a,{}),"\xa0",k.format("LL")]}):Object(m.b)("date.select_range")})}),Object(h.jsx)(r.a,{ref:p,defaultValue:w&&k?[w.toDate(),k.toDate()]:void 0,onConfirm:C,type:"range"})]})]}):Object(h.jsxs)(c.g,{$column:!0,children:[Object(h.jsx)(s.a.Item,{name:y,noStyle:!0,children:Object(h.jsx)(o.c,{onRangeChange:e=>{g({[y]:e[0],[x]:e[1]})},onChange:e=>g({[y]:e}),format:"LL",placeholder:Object(m.b)("date.start_date"),allowClear:v})}),Object(h.jsx)(s.a.Item,{name:x,noStyle:!0,children:Object(h.jsx)(o.c,{onRangeChange:e=>{g({[y]:e[0],[x]:e[1]})},onChange:e=>g({[x]:e}),format:"LL",placeholder:Object(m.b)("date.end_date"),allowClear:v})})]})};p.displayName="RangePickerFilter",t.a=p},783:function(e,t,a){"use strict";var n=a(609),s=a(22);const i=e=>{let{form:t,closable:a=!1}=e;return Object(s.jsx)(n.a,{handleChangeRange:e=>{t.setFieldsValue({start_date:e[0],end_date:e[1]}),a&&t.submit()}})};i.displayName="RangeComponentMobile",t.a=i},817:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(0),s=a(50),i=a(823),c=a(3045),o=a(3039),r=a(3052),l=a(27);const d=()=>{const e=Object(l.a)((e=>e.is_mobile)),t=Object(n.useMemo)((()=>[{label:Object(s.b)("words.summary"),path:"/finance/commissions/summary",icon:i.a},{label:Object(s.b)("finance.commissions.open_commissions"),path:"/finance/commissions",icon:c.a},{label:Object(s.b)("finance.commissions.paid_commissions"),path:"/finance/commissions/batch_payments",icon:o.a},{label:Object(s.b)("words.setting_other"),path:"/finance/commissions/settings",icon:r.a}]),[]),a=Object(n.useMemo)((()=>[{label:Object(s.b)("finance.commissions.detailed"),path:"/finance/commissions"},{label:Object(s.b)("finance.commissions.summary"),path:"/finance/commissions/bulk_commissions"},{label:Object(s.b)("finance.commissions.paid"),path:"/finance/commissions/batch_payments"},{label:Object(s.b)("words.setting_other"),path:"/finance/commissions/settings",icon:r.a}]),[]);return e?t:a}},823:function(e,t,a){"use strict";var n=a(13),s=a(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},c=a(71),o=function(e,t){return s.createElement(c.a,Object(n.a)({},e,{ref:t,icon:i}))},r=s.forwardRef(o);t.a=r}}]);
//# sourceMappingURL=56.461efac6.chunk.js.map