(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[55,179],{1040:function(e,t,a){"use strict";var n=a(0),l=a(37),r=a(405);const s=l.e`
  query FetchDocumentTemplates ($class_type: String) {
    document_templates (class_type: $class_type, page: 1, per_page: 10) {
      all {
        id name
      }
    }
  }
`;t.a=e=>{const{data:t}=Object(r.f)(s,{variables:{class_type:e}});return Object(n.useMemo)((()=>(null===t||void 0===t?void 0:t.document_templates.all)||[]),[null===t||void 0===t?void 0:t.document_templates.all])}},1454:function(e,t,a){"use strict";var n=a(13),l=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0010.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 00-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"}}]},name:"file-excel",theme:"outlined"},s=a(71),c=function(e,t){return l.createElement(s.a,Object(n.a)({},e,{ref:t,icon:r}))},o=l.forwardRef(c);t.a=o},2971:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a(50),r=a(2854),s=a(116),c=a(37);const o=c.e`
  query PurchasesList(
    $deleted: Boolean,
    $status: String,
    $page: Int,
    $results: Int,
    $start_date: String,
    $end_date: String,
    $vendor_id: ID,
    $search_query: String,
    $sort_field: String,
    $sort_order: String,
  ) {
    all_inventory_purchases (
      deleted: $deleted,
      page: $page,
      results: $results,
      status: $status,
      start_date: $start_date,
      end_date: $end_date,
      vendor_id: $vendor_id,
      search_term: $search_query,
      sort_field: $sort_field,
      sort_order: $sort_order
    ) {
      all {
        id
        code
        comment
        date
        deleted_at
        finished
        number
        sum_cents
        vendor { id name }

        finance_bill_pays {
          id
          status
          bill_type
          payment {
            id name
          }
        }
      }
      total_count
    }
  }
`;c.e`
  query PurchasesIdsList($deleted: Boolean) {
    all_inventory_purchases(deleted: $deleted) {
      all {
        id deleted_at
      }
    },
  }
`;var i=a(627),d=a(701),b=a(784),u=a(853),_=a(612),j=a(593),p=a(27),m=a(965),h=a(2937),v=a(547),O=a(772),f=a(356),g=a(250),y=a(22);var x=()=>{const e=Object(p.a)((e=>e.is_mobile));return Object(n.useMemo)((()=>[{label:Object(l.b)("words.status"),name:"deleted",default_value:"false",double_checkbox:{true:Object(l.b)("words.deleted",{count:2,context:"female"}),false:Object(l.b)("words.not_deleted",{count:2,context:"female"})}},{label:Object(l.b)("words.period"),name:"date",rangepicker:{start_date_name:"start_date",end_date_name:"end_date"}},{label:Object(l.b)("words.payment_status"),name:"status",default_value:void 0,radio_options:w},{label:Object(l.b)("words.vendor"),name:"vendor_id",default_value:void 0,render:t=>{const{setFieldsValue:a}=t;return Object(y.jsx)(h.a.Item,{name:"vendor_id",noStyle:!0,children:Object(y.jsx)(O.a,{style:{width:"100%"},getPopupContainer:()=>document.body,size:e?"large":"middle",allowClear:!0,suffixIcon:e?Object(y.jsx)(g.d,{$size:16,as:f.a,$color:"primary"}):void 0,variant:"borderless",onChange:e=>{a({vendor_id:e})}})})}}]),[e])};const w=[{value:"finished",label:Object(y.jsx)(v.a,{color:"#777777",children:Object(l.b)("words.finished")})},{value:"pending",label:Object(y.jsx)(v.a,{color:"orange",children:Object(l.b)("words.pending")})}];var k=a(579),C=a(583),$=a(53),S=a.n($),I=a(735),z=a(604);const D=e=>{var t,a,n;const{item:r}=e,s=(null===r||void 0===r||null===(t=r.finance_bill_pays)||void 0===t||null===(a=t.filter((e=>e.payment)))||void 0===a?void 0:a.map((e=>e.payment.name)).join(", "))||"";return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(g.g,{$column:!0,style:{overflow:"hidden",flexGrow:1},children:[Object(y.jsxs)(C.b,{$block:!0,$textEllipsis:!0,$isFlex:!0,width:22,children:[Object(y.jsxs)(g.h,{$color:"primary",$bold:!0,$right:3,children:["#",null===r||void 0===r?void 0:r.code]}),null===r||void 0===r||null===(n=r.vendor)||void 0===n?void 0:n.name]}),Object(y.jsxs)(C.b,{width:22,$block:!0,$color:"gray_1",$size:12,$top:5,$right:5,$isFlex:!0,$textEllipsis:!0,children:[S()(null===r||void 0===r?void 0:r.date).format("L"),s?` - ${s}`:""]})]}),Object(y.jsx)("div",{children:Object(y.jsxs)(g.g,{$column:!0,align:"bottom",$left:10,$isFlex:!1,children:[Object(y.jsx)(C.b,{width:6,$align:"right",$block:!0,$semibold:!0,style:{whiteSpace:"nowrap"},children:Object(k.d)(null===r||void 0===r?void 0:r.sum_cents)}),Object(y.jsx)("div",{style:{paddingTop:5,marginRight:-3},children:r?r.finished?Object(y.jsx)(I.b,{$backgroundColor:"#777777",$color:"white",children:Object(l.b)("words.finished")}):Object(y.jsx)(I.b,{$color:"#fdb730",$backgroundColor:"#fff4e1",children:Object(l.b)("words.pending")}):Object(y.jsx)(z.a,{width:"8ch"})})]})})]})};var M=Object(n.memo)(D),V=a(19),R=a(852),q=a(1438),E=a(1809),N=a(616),H=a(1825),F=a(1440),P=a(3034),T=a(787),L=a(1442),B=a(1828),A=a(664),G=a(1040);var K=e=>{let{openPurchaseDrawer:t,handleDestroyPurchases:a,openVendorDrawer:c,openGenerateDocumentModal:o}=e;const i=Object(p.a)((e=>e.current_user.permissions)),d=Object(V.f)(),b=Object(G.a)("Inventory::Purchase"),u=Object(n.useCallback)((e=>0===b.length?[{key:"empty-document",label:"Nenhum gerador encontrado",disabled:!0}]:b.map((t=>({key:t.id,label:`${Object(l.b)("verbs.generate")} ${t.name}`,icon:Object(y.jsx)(H.a,{}),onClick:()=>o({document_template_id:t.id,inventory_purchase_id:e})})))),[b,o]);return Object(n.useMemo)((()=>[{title:Object(l.b)("words.ticket"),default_visible:!0,always_visible:!0,align:"center",defaultSortOrder:"descend",key:"code",dataIndex:"code",width:80,className:"table-sort",sorter:!0,render:(e,a)=>{const n=!!a.deleted_at;return Object(y.jsxs)(g.i,{disabled:n,onClick:()=>{i.can_edit_purchase?t(a):s.b.warning(Object(l.b)("phrases.no_permission_to_do_this"))},children:["#",e]})}},{title:Object(l.b)("words.date"),default_visible:!0,always_visible:!0,key:"date",dataIndex:"date",sorter:!0,width:100,render:e=>S()(e).format("L")},{title:Object(l.b)("words.vendor"),default_visible:!0,key:"vendor",dataIndex:"vendor",align:"left",render:(e,t)=>{if(!e)return null;const a=!!t.deleted_at;return Object(y.jsx)(g.i,{title:e.title,style:{width:"100%",textAlign:"start"},disabled:a,onClick:()=>{i.can_edit_vendor?c(e.id):s.b.warning(Object(l.b)("phrases.no_permission_to_do_this"))},children:e.name})}},{title:Object(l.b)("words.status"),default_visible:!0,dataIndex:"finished",key:"finished",width:90,render:e=>e?Object(y.jsx)(v.a,{color:d.colors.gray_1,children:Object(l.b)("words.finished")}):Object(y.jsx)(v.a,{color:"#fdb730",children:Object(l.b)("words.pending")})},{title:Object(l.b)("words.value"),default_visible:!0,always_visible:!0,dataIndex:"sum_cents",key:"sum_cents",width:100,align:"right",render:e=>Object(k.d)(e)},{title:Object(l.b)("words.payment"),default_visible:!0,dataIndex:"finance_bill_pays",key:"finance_bill_pays",width:100,render:(e,t)=>Object(y.jsx)(Y,{purchase:t})},{title:Object(l.b)("words.payment_type"),key:"payment_method",default_visible:!0,include_key_on_query:!1,ellipsis:!0,render:(e,t)=>{var a;return Array.from(new Set(null===(a=t.finance_bill_pays)||void 0===a?void 0:a.map((e=>{var t;return null===(t=e.payment)||void 0===t?void 0:t.name})))).join(", ")}},{title:Object(l.b)("purchases.note_number"),default_visible:!1,key:"number",dataIndex:"number",ellipsis:!0,width:100,render:e=>Object(y.jsx)("span",{title:e,children:e})},{title:Object(l.b)("words.observation"),default_visible:!1,ellipsis:!0,align:"left",dataIndex:"comment",key:"comment",render:e=>Object(y.jsx)("span",{title:e,children:e})},{default_visible:!0,key:"actions",align:"center",width:100,render:(e,n)=>!!n.deleted_at?null:Object(y.jsxs)(N.a,{width:84,children:[Object(y.jsx)(R.a,{title:n.finished?Object(l.b)("verbs.view"):Object(l.b)("verbs.edit"),children:Object(y.jsx)(g.i,{className:"no-decoration",onClick:()=>{null!==i&&void 0!==i&&i.can_edit_purchase?t(n):s.b.warning(Object(l.b)("phrases.no_permission_to_do_this"))},children:n.finished?Object(y.jsx)(F.a,{}):Object(y.jsx)(P.a,{})})}),Object(y.jsx)(q.a,{type:"vertical"}),Object(y.jsx)(g.i,{className:"link color-red",onClick:()=>a(n.id),children:Object(y.jsx)(r.a,{})}),Object(y.jsx)(q.a,{type:"vertical"}),Object(y.jsx)(E.a,{menu:{items:u(n.id)},trigger:["click"],overlayStyle:{width:190},children:Object(y.jsx)(g.i,{className:"link",children:Object(y.jsx)(T.a,{})})})]})}]),[a,t,c,i.can_edit_purchase,i.can_edit_vendor,d.colors.gray_1,u])};const Y=e=>{let{purchase:t}=e;if(!t||!t.finished)return null;const{finance_bill_pays:a=[]}=t;let n={color:"green",name:Object(l.b)("words.paid"),icon:L.a};return a.some((e=>"2"===e.status))?n={color:"red",name:Object(l.b)("words.late"),icon:B.a}:a.some((e=>"0"===e.status))||!t.finished?n={color:"orange",name:Object(l.b)("words.open")}:a.some((e=>"4"===e.status))?n={color:"blue",name:Object(l.b)("words.available")}:a.some((e=>"5"===e.status))&&(n={color:"#777777",name:Object(l.b)("words.blocked"),icon:A.a}),Object(y.jsxs)(v.a,{color:n.color,children:[n.icon&&Object(y.jsx)(g.d,{$hex:n.color,as:n.icon,$right:2}),n.name]})};Y.displayName="PaymentTag";var J=a(3060),U=a(1454),Q=a(598),W=a(582),X=a(597),Z=a(232);const ee=Object(n.lazy)((()=>Object(Z.a)((()=>a.e(12).then(a.bind(null,968)))))),te=Object(n.lazy)((()=>Object(Z.a)((()=>a.e(7).then(a.bind(null,969)))))),ae=()=>{const e=Object(Q.b)((e=>e.onSearch)),t=Object(Q.b)((e=>e.title));return Object(y.jsx)(X.b,{title:t,onSearch:e,tabs:[{label:Object(l.b)("words.purchase",{count:2}),path:"/purchases",icon:J.a},{label:Object(l.b)("purchases.imported_xmls"),path:"/purchases/imported-electronic-invoices",icon:U.a}],children:Object(y.jsx)(W.a,{Desktop:ee,Mobile:te})})};ae.displayName="Header";var ne=ae;t.default=()=>{const e=Object(p.a)((e=>e.current_user.permissions)),t=Object(n.useRef)(null),a=Object(n.useRef)(null),c=Object(n.useRef)(null),h=Object(n.useRef)(null);Object(j.a)({feature_keys:["has_purchases"]});const[v]=Object(m.a)(),O=x(),f=Object(n.useCallback)((e=>{var t;null===(t=a.current)||void 0===t||t.open({id:null===e||void 0===e?void 0:e.id})}),[]),g=Object(n.useCallback)((e=>{var a;null===(a=t.current)||void 0===a||a.open({id:e})}),[]),w=Object(n.useCallback)((()=>{var e;null===(e=c.current)||void 0===e||e.refetch()}),[]),k=Object(n.useCallback)((async e=>{const{success:t}=await v({id:e});t&&(s.b.success(Object(l.b)("phrases.deleted_successfully",{prefix:Object(l.b)("words.purchase"),context:"female"})),w())}),[w,v]),C=Object(n.useCallback)((t=>{e.can_destroy_purchase?s.c.confirm({centered:!0,className:"webook-modal",title:Object(l.b)("words.attention"),maskClosable:!0,content:Object(l.b)("phrases.confirm_delete",{model:Object(l.b)("words.purchase").toLocaleLowerCase(),context:"female"}),okText:Object(l.b)("phrases.yes_delete"),okType:"danger",cancelText:Object(l.b)("verbs.cancel"),onOk:()=>k(t)}):s.b.warning(Object(l.b)("phrases.no_permission_to_do_this"))}),[k,e.can_destroy_purchase]),$=Object(n.useCallback)((e=>!e.deleted_at),[]),S=Object(n.useCallback)((e=>{var t;return null===e||void 0===e||null===(t=e.all_inventory_purchases)||void 0===t?void 0:t.all}),[]),I=Object(n.useCallback)((e=>{var t;return(null===e||void 0===e||null===(t=e.all_inventory_purchases)||void 0===t?void 0:t.total_count)||0}),[]),z=Object(n.useCallback)((e=>({content:Object(y.jsx)(_.a,{icon:r.a,label:Object(l.b)("verbs.delete"),direction:"left",color:"red"}),action:()=>C(e.id)})),[C]),D=Object(n.useCallback)((e=>{var t;null===(t=h.current)||void 0===t||t.open(e)}),[]),V=Object(n.useMemo)((()=>({openPurchaseDrawer:f,handleDestroyPurchases:C,openVendorDrawer:g,openGenerateDocumentModal:D})),[C,D,f,g]),R=K(V);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(i.a,{ref:c,title:Object(l.b)("words.purchase",{count:2}),Header:ne,permissions_key:"purchase",validateRow:$,search_placeholder:Object(l.b)("purchases.search_placeholder"),filters:O,columns:R,query:o,item_selectable:!1,getData:S,getTotalCount:I,MobileItem:M,openDrawer:f,mobileSwipeLeft:z}),Object(y.jsx)(d.a,{ref:t}),Object(y.jsx)(b.a,{ref:a,afterSave:w}),Object(y.jsx)(u.a,{ref:h})]})}},609:function(e,t,a){"use strict";var n=a(0),l=a(50),r=a(159),s=a(53),c=a.n(s),o=a(19),i=a(22);const d=e=>{let{handleChangeRange:t}=e;return Object(i.jsx)(b,{children:u.map((e=>{let{label:a,value:n}=e;return Object(i.jsx)(r.a,{type:"primary",onClick:()=>t(n),children:a},a)}))})};d.displayName="ExtraRangeComponent",t.a=Object(n.memo)(d);const b=o.d.div.withConfig({componentId:"wb__sc-hoi2yi-0"})(["display:flex;flex-wrap:wrap;justify-content:space-between;padding-top:8px;.ant-btn{cursor:pointer;width:49%;text-align:center;margin-bottom:8px;margin-right:0;}"]),u=[{label:Object(l.b)("words.today"),value:[c()(),c()()]},{label:Object(l.b)("date.last_week"),value:[c()().startOf("week").subtract(1,"week"),c()().endOf("week").subtract(1,"week")]},{label:Object(l.b)("date.last_month"),value:[c()().subtract(1,"month").startOf("month"),c()().subtract(1,"month").endOf("month")]},{label:Object(l.b)("date.current_month"),value:[c()().startOf("month"),c()().endOf("month")]},{label:Object(l.b)("date.six_months_ago"),value:[c()().subtract(6,"month"),c()()]},{label:Object(l.b)("date.one_year_ago"),value:[c()().subtract(12,"month"),c()()]}]},610:function(e,t,a){"use strict";a.d(t,"d",(function(){return _})),a.d(t,"b",(function(){return j})),a.d(t,"c",(function(){return p})),a.d(t,"a",(function(){return m}));var n=a(19),l=a(0),r=a(2934),s=a(609),c=a(22);const o=(e,t)=>{let{onRangeChange:a,...n}=e;const[o,i]=Object(l.useState)(!1),b=Object(l.useCallback)((e=>{a(e)}),[a]);return Object(c.jsx)(r.a,{ref:t,showNow:!1,renderExtraFooter:()=>Object(c.jsx)(d,{children:Object(c.jsx)(s.a,{handleChangeRange:b})}),...n,open:o,onOpenChange:i})};o.displayName="SimpleRangePicker";var i=Object(l.memo)(Object(l.forwardRef)(o));const d=n.d.div.withConfig({componentId:"wb__sc-13lwjt0-0"})(["width:265px;"]),b={true:!0,false:!1,all:null,none:null},u=["start_date","end_date","birthday_start_date","birthday_end_date","start_date_open","start_date_close","end_date_open","end_date_close"],_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},a={};return Object.entries(e).forEach((e=>{let[a,n]=e;n in b&&(t[a]=b[n])})),Object.entries(e).forEach((e=>{let[t,n]=e;u.includes(t)&&(a[t]=null===n||void 0===n?void 0:n.format("YYYY-MM-DD"))})),{...e,...t,...a}},j=n.d.div.withConfig({componentId:"wb__sc-gq8qm5-0"})(["display:flex;flex-direction:column;background-color:",";border-radius:16px;box-shadow:0 0 10px 5px #f3f3f3;padding:15px;border:1px solid rgba(0 0 0 / 3%);transition:box-shadow .1s;margin-bottom:5px;.ant-checkbox-wrapper + .ant-checkbox-wrapper{overflow:hidden;margin-left:0;width:100%;:not(:first-child){overflow:hidden;white-space:nowrap;text-overflow:ellipsis;word-break:keep-all;}}.ant-radio-wrapper{margin-right:0;}.ant-checkbox-group-item{margin-right:0;}.ant-calendar-picker-clear{background:transparent;color:",";}.ant-calendar-picker-input{border-top:none;border-left:none;border-right:none;border-radius:0;margin-top:5px;background:transparent;"," &:focus{box-shadow:none;}}.anticon-calendar{color:rgba(0,0,0,.2);}",""],(e=>e.theme.colors.white),(e=>e.theme.dark&&e.theme.dark_white),(e=>e.theme.dark&&`\n      border-color: ${e.theme.dark_secondary};\n      color: ${e.theme.dark_white};\n    `),(e=>e.tags&&Object(n.c)(["display:flex;flex-wrap:wrap;.ant-tag{margin:0 4px 4px 0;cursor:pointer;}"]))),p=Object(n.d)(i).withConfig({componentId:"wb__sc-gq8qm5-1"})(["width:100%;border-top:none;border-left:none;border-right:none;border-radius:0 !important;margin-top:5px;background:transparent;&.ant-picker-focused{box-shadow:none;}"]),m=n.d.div.withConfig({componentId:"wb__sc-gq8qm5-2"})(["min-width:0;width:0;z-index:210;text-overflow:ellipsis;white-space:nowrap;position:sticky;top:calc(","px + 10px);overflow:hidden;max-height:calc(100vh - 60px);align-self:flex-start;transition:width .2s;",""],(e=>e.theme.menu_top_height),(e=>!!e.$visible&&Object(n.c)(["min-width:230px;width:230px;padding-right:7px;overflow-y:auto;overflow-x:hidden;"])))},627:function(e,t,a){"use strict";var n=a(0),l=a(50),r=a(2937),s=a(137),c=a(578),o=a(116),i=a(585),d=a(28),b=a(598);const u={show_filters:!1,page:1,results:20,sort_field:"name",sort_order:"ascend",filters_value:{},visible_columns:[]};var _=(e,t)=>{if(t.type.includes("set_")&&"payload"in t){const a=t.type.split("set_")[1];return{...e,[a]:t.payload}}return e},j=a(53),p=a.n(j),m=a(635),h=a(22);const v={ascend:"ASC",descend:"DESC"},O=e=>e?p()(e):null;var f=a(405),g=a(610),y=a(27),x=a(582),w=a(1814),k=a(148);var C=e=>{const{total_count:t,records:a,results:r,select_all_query:s,validateRow:c=(e=>!0),rowSelector:i=(e=>e.map((e=>e.id)))}=e,[d,b]=Object(n.useState)([]),[u,_]=Object(n.useState)(!1),[j,p]=Object(n.useState)(!1),[m,v]=Object(n.useState)(!1),O=Object(k.a)(),f=Object(n.useCallback)((()=>{_(!1),b([]),v(!1)}),[]),g=Object(n.useCallback)((()=>{const e=o.b.loading(`${Object(l.b)("verbs.selecting")}...`,0);p(!0);const{query:t,variables:a,resolve:n}=s;O.query({query:t,variables:a,fetchPolicy:"network-only"}).then(n((e=>{_(!0),b(i(e))}))).catch((e=>console.error(e))).then((()=>{e(),p(!1)}))}),[O,i,s]),y=Object(n.useCallback)(((e,t)=>{b(i(t))}),[]),x=Object(n.useMemo)((()=>a.filter(c)),[a,c]);return Object(n.useMemo)((()=>({setSelectedRows:b,selected_all:u,selected_rows:d,validated_records:x,total_count:t,resetSelected:f,records:a,results:r,selectAll:g,onChange:y,is_select_mode:m,setIsSelectMode:v,is_selecting_all:j,setSelectedAll:_,setIsSelectingAll:p,getCheckboxProps:e=>({disabled:!c(e)}),selectedRowKeys:d.map((e=>(null===e||void 0===e?void 0:e.id)||e)),columnTitle:Object(h.jsx)(w.a,{className:"table-select-all",indeterminate:!u&&!!d.length&&d.length!==t,checked:u||d.length===t&&t>0,onChange:()=>{if(d.length<x.length)return b(i(x));f()}})})),[u,d,t,f,a,r,g,y,c,x,m,v,j])},$=a(597),S=a(232);const I=Object(n.lazy)((()=>Object(S.a)((()=>a.e(12).then(a.bind(null,968)))))),z=Object(n.lazy)((()=>Object(S.a)((()=>a.e(7).then(a.bind(null,969)))))),D=()=>{const e=Object(b.b)((e=>e.onSearch)),t=Object(b.b)((e=>e.title));return Object(h.jsx)($.b,{title:t,onSearch:e,children:Object(h.jsx)(x.a,{Desktop:I,Mobile:z})})};D.displayName="DefaultHeader";var M=D,V=a(76);const R=Object(n.lazy)((()=>Object(S.a)((()=>a.e(94).then(a.bind(null,2909)))))),q=Object(n.lazy)((()=>Object(S.a)((()=>a.e(67).then(a.bind(null,3082)))))),E=e=>!(null===e||void 0===e||!e.active),N=e=>null===e||void 0===e?void 0:e.id,H=(e,t)=>{var a,j;const{columns:p,filters:w,extra_actions:k,query:$,getTotalCount:S,getData:I,select_all_query:z,validateRow:D=E,rowSelectorKey:H=N,Header:F,expandedRowKeys:P,title:T,storage_key:L=T,has_feature:B=!0,use_storage:A=!0,addon_id:G,has_joyride:K=!0,show_create_button:Y=!0,item_selectable:J=!0,parseFilters:U=g.d,rowClassName:Q,mobileSwipeLeft:W}=e,X=Object(y.a)((e=>e.current_user.permissions)),Z=Object(y.a)((e=>e.is_mobile)),ee=`MagicTableStorage: ${L}`,[te]=r.a.useForm(),ae=(null===(a=p.find((e=>e.sorter)))||void 0===a?void 0:a.key)||p[0].key,ne=(null===(j=p.find((e=>e.defaultSortOrder)))||void 0===j?void 0:j.defaultSortOrder)||p[0].defaultSortOrder||"ascend",le=Object(n.useMemo)((()=>(e=>{const{default_sort_order:t,default_sort_field:a,filters:n,local_storage_key:l,visible_columns:r,use_storage:s}=e,c=Object(d.c)(l);if(c&&s){const e=null===c||void 0===c?void 0:c.filters_value;return null!==e&&void 0!==e&&e.start_date||null!==e&&void 0!==e&&e.end_date||null!==e&&void 0!==e&&e.birthday_start_date||null!==e&&void 0!==e&&e.birthday_end_date||null!==e&&void 0!==e&&e.start_date_open||null!==e&&void 0!==e&&e.start_date_close||null!==e&&void 0!==e&&e.end_date_open||null!==e&&void 0!==e&&e.end_date_close?{...c,filters_value:{...c.filters_value,start_date:O(c.filters_value.start_date),end_date:O(c.filters_value.end_date),birthday_start_date:O(c.filters_value.birthday_start_date),birthday_end_date:O(c.filters_value.birthday_end_date),start_date_open:O(c.filters_value.start_date_open),start_date_close:O(c.filters_value.start_date_close),end_date_open:O(c.filters_value.end_date_open),end_date_close:O(c.filters_value.end_date_close)}}:c}const o=null===n||void 0===n?void 0:n.reduce(((e,t)=>t.default_value?t.rangepicker?{...e,[t.rangepicker.start_date_name]:t.default_value[0],[t.rangepicker.end_date_name]:t.default_value[1]}:{...e,[t.name]:t.default_value}:e),{});return{...u,sort_field:a,sort_order:v[t],filters_value:o,visible_columns:r}})({local_storage_key:ee,filters:w,default_sort_field:ae,default_sort_order:ne,visible_columns:p.filter((e=>e.default_visible)).map((e=>e.key)),use_storage:A})),[p,ae,ne,w,ee,A]),[re,se]=Object(n.useReducer)(_,le);Object(c.a)((()=>{Object(d.d)(ee,{...re,page:1})}),[re]);const[ce,oe]=Object(n.useState)(""),[ie,de]=Object(n.useState)([]),[be,ue]=Object(n.useState)(0),_e=Object(n.useRef)(!1),je=(e=>{const{columns:t,visible_columns:a=[],dispatch:n}=e,l=t.filter((e=>a.includes(e.key)||e.always_visible)),r=l.findIndex((e=>"actions"===e.key));return r&&(l[r]={...l[r],title:Object(h.jsx)(m.a,{columns:t,visible_columns:a,dispatch:n})}),l})({dispatch:se,columns:p,visible_columns:re.visible_columns}),pe={...Object(n.useMemo)((()=>p.filter((e=>e.include_key_on_query)).reduce(((e,t)=>{var a;return e[t.key]=null===(a=re.visible_columns)||void 0===a?void 0:a.includes(t.key),e}),{})),[p,re.visible_columns]),...U(re.filters_value),is_mobile:Z,search_query:ce,sort_field:re.sort_field,sort_order:re.sort_order,page:re.page,results:re.results},{loading:me,refetch:he}=Object(f.f)($,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:pe,skip:!B,onError:e=>{console.log(e),V.a.captureException(e),o.b.error(Object(l.b)("phrases.loading_error"))},onCompleted:e=>{ue(S(e)),1!==re.page&&_e.current?de((t=>[...t,...I(e)||[]])):de(I(e)||[])}}),ve=Object(n.useCallback)((()=>{if(1===re.page)return he();se({type:"set_page",payload:1})}),[re.page,he]),Oe=Object(n.useCallback)((()=>{_e.current=!0,se({type:"set_page",payload:re.page+1})}),[re.page]),fe=Object(n.useCallback)(((e,t,a)=>{a.order&&(se({type:"set_sort_field",payload:a.field}),se({type:"set_sort_order",payload:"ascend"===a.order?"ASC":"DESC"})),e.current&&se({type:"set_page",payload:e.current}),e.pageSize&&se({type:"set_results",payload:e.pageSize})}),[]),ge=C({total_count:be,results:re.results,records:ie,select_all_query:{query:z,variables:pe,resolve:e=>t=>{let{data:a}=t;return e(I(a)||[])}},validateRow:D,rowSelector:Object(n.useCallback)((e=>e.filter(D).map(H)),[H,D])}),ye=Object(n.useMemo)((()=>P?P(ie):void 0),[ie,P]),xe=Object(n.useCallback)((e=>{he(),ge.resetSelected();const t=Math.ceil((be-e)/re.results);re.page>t&&se({type:"set_page",payload:t})}),[re.page,he,re.results,ge,be]),we=Object(n.useCallback)((e=>{se({type:"set_page",payload:1}),oe(e)}),[oe]),ke=Object(n.useCallback)((e=>{se({type:"set_filters_value",payload:e}),se({type:"set_page",payload:1})}),[]),Ce=Object(n.useMemo)((()=>B?e.permissions?e.permissions:e.permissions_key?{can_create:X[`can_create_${e.permissions_key}`],can_edit:X[`can_edit_${e.permissions_key}`],can_access:X[`can_access_${e.permissions_key}`]}:void 0:{can_create:!1,can_edit:!1,can_access:!1}),[B,e.permissions,e.permissions_key,X]),$e=Object(n.useCallback)((()=>{if(ge.resetSelected(),Z)return 1===re.page?void he():void se({type:"set_page",payload:1});he()}),[Z,he,ge,re.page]);Object(n.useImperativeHandle)(t,(()=>({afterDestroyRecord:xe,refetch:$e})));const Se=Object(n.useMemo)((()=>({onSearch:we,row_selection:ge,onFiltersChange:ke,data_source:ie,form:te,total_count:be,loading:me,new_columns:je,onChange:fe,expanded_row_keys:ye,refetch:ve,handleFetchMore:Oe,...e,has_feature:B,addon_id:G,has_joyride:K,show_create_button:Y,item_selectable:J,validateRow:D,rowSelectorKey:H,permissions:Ce,...re,dispatch:se,rowClassName:Q,extra_actions:k})),[we,ge,ke,ie,te,be,me,je,fe,ye,ve,Oe,e,B,K,Y,D,H,Ce,re,Q,k,J,G]),Ie=Object(n.useMemo)((()=>null===w||void 0===w?void 0:w.reduce(((e,t)=>t.default_value?t.rangepicker?{...e,[t.rangepicker.start_date_name]:t.default_value[0],[t.rangepicker.end_date_name]:t.default_value[1]}:{...e,[t.name]:t.default_value}:e),{})),[w]);return Object(h.jsx)(b.a.Provider,{value:Se,children:Object(h.jsxs)(i.b,{children:[F?Object(h.jsx)(F,{}):Object(h.jsx)(M,{}),Object(h.jsx)(r.a,{form:te,component:!1,layout:"vertical",onChange:Object(s.debounce)(ke,1e3),initialValues:{...Ie,...re.filters_value},children:Object(h.jsx)(x.a,{Desktop:R,Mobile:q,mobileSwipeLeft:W})})]})})};H.displayName="MagicTable";t.a=Object(n.memo)(Object(n.forwardRef)(H))},635:function(e,t,a){"use strict";var n=a(0),l=a(50),r=a(1809),s=a(852),c=a(1814),o=a(3052),i=a(19),d=a(22);const b=e=>{let{columns:t,visible_columns:a,dispatch:c,setVisibleColumns:i}=e;const[b,_]=Object(n.useState)(!1),j=Object(n.useCallback)((()=>{const e=t.filter((e=>e.default_visible)).map((e=>e.key));null===c||void 0===c||c({type:"set_visible_columns",payload:e}),null===i||void 0===i||i(e)}),[t,c,i]),p=Object(n.useCallback)((e=>{if(a.includes(e)){const t=a.filter((t=>t!==e));return null===c||void 0===c||c({type:"set_visible_columns",payload:t}),void(null===i||void 0===i||i(t))}const t=[...a,e];null===c||void 0===c||c({type:"set_visible_columns",payload:t}),null===i||void 0===i||i(t)}),[c,i,a]),m=Object(n.useMemo)((()=>{const e=t.reduce(((e,t)=>{if(!t.title||t.always_visible)return e;const n={key:t.key,disabled:t.always_visible,label:Object(d.jsx)(u,{onClick:()=>p(t.key),checked:a.includes(t.key),children:t.title})};return[...e,n]}),[]);return[{key:"default_title",type:"group",label:Object(d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(d.jsx)("span",{children:Object(l.b)("words.column",{count:2})}),Object(d.jsx)("button",{className:"link",onClick:j,children:Object(l.b)("words.default")})]}),children:e}]}),[t,j,p,a]);return Object(d.jsx)(r.a,{menu:{items:m},trigger:["click"],open:b,onOpenChange:_,className:"no-print table-configuration",children:Object(d.jsx)(s.a,{title:Object(l.b)("phrases.column_settings"),placement:"left",children:Object(d.jsx)("div",{className:"link no-print",style:{fontSize:"15px"},children:Object(d.jsx)(o.a,{})})})})};b.displayName="ColumnsSettings",t.a=b;const u=Object(i.d)(c.a).withConfig({componentId:"wb__sc-1oenz8-0"})(["width:100%;"])},664:function(e,t,a){"use strict";var n=a(13),l=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},s=a(71),c=function(e,t){return l.createElement(s.a,Object(n.a)({},e,{ref:t,icon:r}))},o=l.forwardRef(c);t.a=o},701:function(e,t,a){"use strict";var n=a(0),l=a(250);var r=a(2937),s=a(50),c=a(27),o=a(339),i=a(586),d=a(37),b=a(1850),u=a(116),_=a(76);const j=d.e`
  mutation InventoryVendorDrawer ($data: SaveInventoryVendorInput!) {
    saveInventoryVendor (input: $data) {
      success
      errors
      inventory_vendor {
        id
        name
        phone2
      }
    }
  }
`;var p=()=>{const[e,{loading:t}]=Object(b.a)(j);return[async t=>{try{const{data:a}=await e({variables:{data:t}}),{success:n=!1,errors:l=[],inventory_vendor:r}=(null===a||void 0===a?void 0:a.saveInventoryVendor)||{};return null===l||void 0===l||l.forEach((e=>u.b.error(e))),{success:n,inventory_vendor:r}}catch(a){return _.a.captureException(a),u.b.error(Object(s.b)("phrases.generic_save_error_message")),console.error(a),{success:!1,inventory_vendor:void 0}}},{loading:t}]},m=a(2879);const h=d.e`
  query InventoryVendorDrawer ($id: ID) {
    inventory_vendor (id: $id) {
      id name active phone1 phone2 email cnpj insc
      city_id state_id address number complement district cep
    }
  }
`;var v=e=>{let{onCompleted:t}=e;return Object(m.a)(h,{fetchPolicy:"network-only",onCompleted:e=>{const{inventory_vendor:a}=e;t(a)},onError:e=>{_.a.captureException(e),console.log(e)}})},O=a(19),f=a(2824),g=a(2883),y=a(3023),x=a(603),w=a(806),k=a(807),C=a(591),$=a(626),S=a.n($),I=a(22);var z=e=>{let{id:t,setFieldsValue:a}=e;const o=Object(n.useRef)(null),i=Object(c.a)((e=>e.is_mobile));return Object(n.useEffect)((()=>{let e;return t||(e=setTimeout((()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.focus()}),700)),()=>clearTimeout(e)}),[t]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(r.a.Item,{name:"id",noStyle:!0,children:Object(I.jsx)(f.a,{type:"hidden"})}),Object(I.jsxs)(l.g,{gutter:8,$wrap:!0,children:[Object(I.jsx)(g.a,{xs:24,sm:12,children:Object(I.jsx)(r.a.Item,{name:"name",label:Object(s.b)("words.name"),rules:[{required:!0,message:Object(s.b)("phrases.required_field")}],children:Object(I.jsx)(f.a,{size:i?"large":"middle",ref:o,placeholder:Object(s.b)("words.name"),autoComplete:"off"})})}),Object(I.jsx)(g.a,{xs:24,sm:12,children:Object(I.jsx)(r.a.Item,{name:"email",label:Object(s.b)("words.email"),rules:[{type:"email",message:Object(s.b)("phrases.invalid_email")}],children:Object(I.jsx)(f.a,{placeholder:Object(s.b)("words.email"),autoComplete:"off",size:i?"large":"middle"})})}),Object(I.jsx)(g.a,{xs:24,sm:12,children:Object(I.jsx)(r.a.Item,{name:"phone2",label:Object(s.b)("words.cellphone"),validateTrigger:"onBlur",rules:[{validateTrigger:"onBlur",validator:x.i}],children:Object(I.jsx)(C.a,{size:i?"large":"middle"})})}),Object(I.jsx)(g.a,{xs:24,sm:12,children:Object(I.jsx)(r.a.Item,{name:"phone1",label:Object(s.b)("words.phone"),validateTrigger:"onBlur",rules:[{validateTrigger:"onBlur",validator:x.i}],children:Object(I.jsx)(C.a,{size:i?"large":"middle"})})}),Object(I.jsx)(g.a,{xs:24,sm:12,children:Object(I.jsx)(r.a.Item,{name:"insc",label:Object(s.b)("vendors.state_registration"),children:Object(I.jsx)(f.a,{size:i?"large":"middle",placeholder:Object(s.b)("vendors.state_registration"),autoComplete:"off"})})}),Object(I.jsx)(g.a,{xs:24,sm:12,children:Object(I.jsx)(r.a.Item,{name:"cnpj",label:Object(s.b)("acronyms.cnpj"),children:Object(I.jsx)(S.a,{mask:"**.***.***/****-99",maskPlaceholder:null,placeholder:Object(s.b)("acronyms.cnpj"),autoComplete:"off",maxLength:18,children:Object(I.jsx)(f.a,{size:i?"large":"middle",style:{textTransform:"uppercase"}})})})}),Object(I.jsx)(g.a,{span:24,children:Object(I.jsx)(r.a.Item,{name:"active",valuePropName:"checked",initialValue:!0,label:Object(s.b)("words.active"),help:Object(s.b)("vendors.active_description"),children:Object(I.jsx)(y.a,{})})})]}),Object(I.jsx)(w.StyledCollapse,{ghost:!0,expandIconPosition:"end",items:[{key:"address",forceRender:!0,label:Object(I.jsx)(l.h,{$size:20,$semibold:!0,children:Object(s.b)("words.address")}),children:Object(I.jsx)(k.a,{setFieldsValue:a})}]})]})},D=a(581);const M=(e,t)=>{const[a,d]=Object(n.useState)(!1),[b,_]=Object(n.useState)(void 0),[j,m]=Object(n.useState)(void 0),h=Object(c.a)((e=>e.is_mobile)),{afterSave:O}=e,[f]=r.a.useForm(),{resetFields:g,setFieldsValue:y,submit:x}=f,[w,{loading:k}]=p(),C=Object(n.useCallback)((e=>{y(e)}),[y]),[$,{loading:S,error:M}]=v({onCompleted:C}),R=()=>{d(!1)},q=function(){let{id:e,initial_values:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e?(_(e),$({variables:{id:e}})):m(t),d(!0)};Object(n.useImperativeHandle)(t,(()=>({open:q,close:R})));const E=Object(n.useMemo)((()=>b?`${Object(s.b)("verbs.editing")} ${Object(s.b)("words.vendor").toLocaleLowerCase()}`:`${Object(s.b)("words.new")} ${Object(s.b)("words.vendor").toLocaleLowerCase()}`),[b]);return Object(I.jsx)(l.a,{open:a,title:E,width:650,placement:h?"bottom":"right",height:"100%",onClose:R,closable:!0,destroyOnClose:!0,afterOpenChange:e=>{e||(g(),m(void 0),_(void 0))},footer:Object(I.jsx)(D.a,{close:R,submit:x,loading:S||k,disabled:!1}),children:Object(I.jsxs)(V,{children:[Object(I.jsx)(o.a,{loading:S}),Object(I.jsx)(r.a,{form:f,layout:"vertical",onFinish:async e=>{const t=(e=>({...e,phone2:e.phone2&&e.phone2.length<4?null:e.phone2,phone1:e.phone1&&e.phone1.length<4?null:e.phone1}))(e),{success:a,inventory_vendor:n}=await w(t);a&&(u.b.success(Object(s.b)("phrases.saved_successfully",{prefix:Object(s.b)("words.vendor")})),R(),null===O||void 0===O||O(n))},style:{width:"100%"},initialValues:j,children:Object(I.jsx)(i.a,{visible:!!M,small:h,children:Object(I.jsx)(z,{id:b,setFieldsValue:y})})})]})})};M.displayName="VendorDrawer";t.a=Object(n.memo)(Object(n.forwardRef)(M));const V=Object(O.d)(l.g).withConfig({componentId:"wb__sc-264ncu-0"})(["position:relative;"])},716:function(e,t,a){"use strict";var n=a(13),l=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-32 736H663.9V602.2h104l15.6-120.7H663.9v-77.1c0-35 9.7-58.8 59.8-58.8h63.9v-108c-11.1-1.5-49-4.8-93.2-4.8-92.2 0-155.3 56.3-155.3 159.6v89H434.9v120.7h104.3V848H176V176h672v672z"}}]},name:"facebook",theme:"outlined"},s=a(71),c=function(e,t){return l.createElement(s.a,Object(n.a)({},e,{ref:t,icon:r}))},o=l.forwardRef(c);t.a=o},717:function(e,t,a){"use strict";var n=a(13),l=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 306.9c-113.5 0-205.1 91.6-205.1 205.1S398.5 717.1 512 717.1 717.1 625.5 717.1 512 625.5 306.9 512 306.9zm0 338.4c-73.4 0-133.3-59.9-133.3-133.3S438.6 378.7 512 378.7 645.3 438.6 645.3 512 585.4 645.3 512 645.3zm213.5-394.6c-26.5 0-47.9 21.4-47.9 47.9s21.4 47.9 47.9 47.9 47.9-21.3 47.9-47.9a47.84 47.84 0 00-47.9-47.9zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zm-88 235.8c-7.3 18.2-16.1 31.8-30.2 45.8-14.1 14.1-27.6 22.9-45.8 30.2C695.2 844.7 570.3 840 512 840c-58.3 0-183.3 4.7-235.9-16.1-18.2-7.3-31.8-16.1-45.8-30.2-14.1-14.1-22.9-27.6-30.2-45.8C179.3 695.2 184 570.3 184 512c0-58.3-4.7-183.3 16.1-235.9 7.3-18.2 16.1-31.8 30.2-45.8s27.6-22.9 45.8-30.2C328.7 179.3 453.7 184 512 184s183.3-4.7 235.9 16.1c18.2 7.3 31.8 16.1 45.8 30.2 14.1 14.1 22.9 27.6 30.2 45.8C844.7 328.7 840 453.7 840 512c0 58.3 4.7 183.2-16.2 235.8z"}}]},name:"instagram",theme:"outlined"},s=a(71),c=function(e,t){return l.createElement(s.a,Object(n.a)({},e,{ref:t,icon:r}))},o=l.forwardRef(c);t.a=o},750:function(e,t,a){"use strict";var n=a(0),l=a(583),r=a(19),s=a(591),c=a(117),o=a(22);const i=e=>{const{item:t}=e;return Object(o.jsxs)(d,{children:[Object(o.jsx)(l.b,{width:12,$block:!0,children:null===t||void 0===t?void 0:t.name}),Object(o.jsx)(l.b,{width:12,$block:!0,$color:"gray_1",$size:12,children:(!(null===t||void 0===t||!t.phone2)||!(null===t||void 0===t||!t.phone1))&&Object(o.jsx)(s.a,{hide_input_styles:!0,disabled:!0,value:(null===t||void 0===t?void 0:t.phone2)||(null===t||void 0===t?void 0:t.phone1),inputStyle:{fontSize:12,color:c.a.gray_2}},(null===t||void 0===t?void 0:t.phone2)||(null===t||void 0===t?void 0:t.phone1))})]})};i.displayName="VendorItemMobile",t.a=Object(n.memo)(i);const d=r.d.div.withConfig({componentId:"wb__sc-lot0ij-0"})(["overflow:hidden;padding-top:8px;"])},772:function(e,t,a){"use strict";var n=a(0),l=a(50),r=a(250),s=a(1256),c=a(696),o=a(680),i=a(701),d=a(750),b=a(37),u=a(2879),_=a(76),j=a(116);const p=b.e`
  query VendorsInput($actives: Boolean) {
    vendors(actives: $actives) {
      id name phone2 phone1
    }
  }
`;var m=e=>Object(u.a)(p,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,onError:e=>{_.a.captureException(e),console.log(e),j.b.error(Object(l.b)("phrases.generic_load_error_message"))},onCompleted:t=>{let{vendors:a=[]}=t;e(a)}}),h=a(22);const{Option:v}=s.a,O=e=>{const[t,a]=Object(n.useState)([]),{show_phone:s=!0,initial_values:b,initial_search:u,..._}=e,j=Object(n.useRef)(null),p=Object(n.useRef)(null),[O,{loading:f}]=m(a);Object(n.useEffect)((()=>{if(!_.value)return void O({variables:{actives:!0}});t.some((e=>String(e.id)===String(_.value)))||O({variables:{actives:null}})}),[O,_.value,t]),Object(n.useEffect)((()=>{if(!u)return;const e=t.find((e=>String(e.name)===u));var a;e&&(null===(a=_.onChange)||void 0===a||a.call(_,e.id,{label:e.id,value:e.id,key:e.id,name:e.name,item:e}))}),[u,_,t]);const g=Object(n.useMemo)((()=>{const e=[{key:"name",name:Object(l.b)("words.name"),full:!0}];return s&&e.push({key:"phone2",name:Object(l.b)("words.phone"),span:7}),e}),[s]),y=Object(o.a)(g),x=Object(n.useCallback)((e=>e.map((e=>Object(h.jsx)(v,{value:e.id,name:e.name,title:e.name,item:e,children:Object(h.jsx)(y.Item,{name:e.name,phone2:e.phone2||e.phone1})},e.id)))),[y]),w=Object(n.useCallback)((()=>Object(h.jsx)(r.g,{$column:!0,$left:10,children:Object(l.b)("input.no_vendor")})),[]),k=Object(n.useCallback)((t=>{var a,n,l;const r="multiple"===e.mode?[...e.value,t.id]:t.id;null===(a=e.onChange)||void 0===a||a.call(e,r,{label:t.id,value:t.id,key:t.id,name:t.name,item:t}),null===(n=j.current)||void 0===n||null===(l=n.closeDrawer)||void 0===l||l.call(n)}),[e]),C=Object(n.useCallback)((e=>{var t;const a={...b,name:e||(null===b||void 0===b?void 0:b.name)};null===(t=p.current)||void 0===t||t.open({initial_values:a})}),[b]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(c.a,{ref:j,model_name:Object(l.b)("words.vendor").toLocaleLowerCase(),loading:f,search_keys:Object(n.useMemo)((()=>["name","phone2"]),[]),items:t,SelectDropdown:y,renderOptions:x,popupClassName:"ant-select-dropdown-medium",placeholder:Object(l.b)("words.vendor"),MobileItem:d.a,openDrawer:C,EmptyItem:w,style:{width:"100%"},..._}),Object(h.jsx)(i.a,{ref:p,afterSave:k})]})};t.a=Object(n.memo)(O)},787:function(e,t,a){"use strict";var n=a(13),l=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"},s=a(71),c=function(e,t){return l.createElement(s.a,Object(n.a)({},e,{ref:t,icon:r}))},o=l.forwardRef(c);t.a=o},853:function(e,t,a){"use strict";var n=a(0),l=a(50),r=a(2937),s=a(116),c=a(20),o=a(250),i=a(18),d=a(582),b=a(27),u=a(37),_=a(2879);const j=u.e`
  query fetchDocumentTemplate (
    $id: ID, $client_id: ID, $employee_id: ID, $schedule_group_id: ID, $inventory_sale_id: ID,
    $inventory_package_id: ID, $finance_bill_rec_id: ID, $finance_bill_pay_id: ID, $inventory_purchase_id: ID
  ) {
    document_template (id: $id) {
      id name save_on_generation exchange_variables(
        client_id: $client_id, employee_id: $employee_id, schedule_group_id: $schedule_group_id,
        inventory_sale_id: $inventory_sale_id, inventory_package_id: $inventory_package_id,
        finance_bill_rec_id: $finance_bill_rec_id, finance_bill_pay_id: $finance_bill_pay_id,
        inventory_purchase_id: $inventory_purchase_id
      )
    }
  }
`;var p=()=>Object(_.a)(j,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),m=a(232),h=a(19),v=a(82),O=a(22);const f=Object(n.lazy)((()=>Object(m.a)((()=>Promise.all([a.e(13),a.e(157)]).then(a.bind(null,3084)))))),g=Object(n.lazy)((()=>Object(m.a)((()=>Promise.all([a.e(13),a.e(158)]).then(a.bind(null,3085)))))),y=(e,t)=>{const[a,o]=Object(n.useState)(!1),[u,_]=Object(n.useState)(),[j,m]=Object(n.useState)(),[h,y]=Object(n.useState)(),[w,k]=Object(n.useState)(!0),C=Object(c.o)(),$=Object(b.a)((e=>e.current_user.id)),S=Object(b.a)((e=>e.current_user.authentication_token)),I=Object(b.a)((e=>e.current_user.addons.has_upload_image)),z=Object(n.useRef)(null),[D]=r.a.useForm(),{setFieldsValue:M,getFieldsValue:V,resetFields:R}=D,[q,{data:E,loading:N,called:H}]=p();Object(n.useEffect)((()=>{var e;H&&!N&&null!==E&&void 0!==E&&E.document_template&&(M({exchange_variables:null===E||void 0===E?void 0:E.document_template.exchange_variables}),k(null!==(e=E.document_template.save_on_generation)&&void 0!==e&&e))}),[null===E||void 0===E?void 0:E.document_template,N,H]);const F=Object(n.useCallback)((e=>{let{document_template_id:t,...a}=e;q({variables:{id:t,...a}}),o(!0),_(t),y(a.client_id);const n=a.schedule_group_id||a.inventory_sale_id||a.inventory_package_id||a.finance_bill_rec_id;m(n)}),[q]),P=Object(n.useCallback)((()=>{o(!1)}),[]);Object(n.useImperativeHandle)(t,(()=>({close:P,open:F})));const T=Object(n.useCallback)((()=>{C(`/subscription/addons?addon_id=${i.a.ID_UPLOAD_IMAGE}`)}),[C]),L=Object(n.useCallback)((e=>{const t=document.getElementById("generate-pdf-form");if(!t)return;const a=V();t.save_on_generation.value=e,t.exchange_variables.value=a.exchange_variables,t.submit()}),[V]),B=Object(n.useCallback)((()=>{I||!w?L(w):s.c.confirm({content:Object(l.b)("document_templates.upload_activation"),okText:Object(l.b)("verbs.contract"),okType:"primary",cancelText:Object(l.b)("verbs.cancel"),zIndex:1042,onOk:T,onCancel:()=>{k(!1),L(!1)}})}),[T,I,w,L]),A=Object(n.useCallback)((e=>{e||(R(),_(void 0),y(void 0),m(void 0),k(!0))}),[R]);return Object(O.jsxs)(x,{open:a,width:1650,height:"100%",onClose:P,destroyOnClose:!0,afterOpenChange:A,children:[Object(O.jsx)(r.a,{form:D,layout:"vertical",style:{height:"100%"},children:Object(O.jsx)(d.a,{Mobile:g,Desktop:f,title:null===E||void 0===E?void 0:E.document_template.name,loading:N,save_on_generation:w,setSaveOnGeneration:k,close:P,generatePDF:B,editorRef:z})}),Object(O.jsxs)("form",{id:"generate-pdf-form",action:`${v.a.API}/document_templates/generate_document`,method:"post",target:"_blank",children:[Object(O.jsx)("input",{type:"hidden",name:"document_template_id",value:u,readOnly:!0}),Object(O.jsx)("input",{type:"hidden",name:"client_id",value:h,readOnly:!0}),Object(O.jsx)("input",{type:"hidden",name:"class_id",value:j,readOnly:!0}),Object(O.jsx)("input",{type:"hidden",name:"current_user_id",value:$,readOnly:!0}),Object(O.jsx)("input",{type:"hidden",name:"authentication_token",value:S,readOnly:!0}),Object(O.jsx)("input",{type:"hidden",name:"exchange_variables",readOnly:!0}),Object(O.jsx)("input",{type:"hidden",name:"save_on_generation",readOnly:!0})]})]})};y.displayName="GenerateDocumentDrawer";t.a=Object(n.memo)(Object(n.forwardRef)(y));const x=Object(h.d)(o.a).withConfig({componentId:"wb__sc-wueh2s-0"})([".ant-drawer-body{padding-left:0;padding-right:0;background:",";.tox-statusbar__branding{display:none;}}"],(e=>e.theme.is_mobile?"#f8f8f8":"transparent"))}}]);
//# sourceMappingURL=55.95da5dd5.chunk.js.map