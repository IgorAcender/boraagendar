(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[201],{2983:function(e,t,c){"use strict";c.r(t);var s=c(0),n=c(50),a=c(159),l=c(250),i=c(674),r=c(1088),o=c(356),b=c(2843),j=c(131),d=c(894),O=c(679),u=c(636),h=c(747),p=c(27),m=c(1814),x=c(852),_=c(1809),k=c(3052),y=c(2855),f=c(687),w=c(690),g=c(19),v=c(916),C=c(22);var R=()=>{const e=Object(p.a)((e=>e.current_user.permissions)),t=Object(p.a)((e=>e.current_user.employee_id)),c=Object(s.useRef)(null),[i,r]=Object(s.useState)(!1),{employees_ids:o,employees:b,resetStatus:j,toggleAllEmployees:d,onStatusChange:O,onResourceChange:h,has_filter:g,all_employees_selected:R}=Object(v.a)(),M=Object(u.b)((e=>e.visible_statuses)),z=Object(u.b)((e=>e.hidden_employee_ids)),D=Object(s.useCallback)((e=>{let{status:t,...c}=e;return Object(C.jsx)(m.a,{...c,checked:0===M.length||M.includes(t)})}),[M]),E=Object(s.useCallback)((e=>{let{resource_id:t,checked:c,...s}=e;return Object(C.jsx)(S,{...s,checked:null!==c&&void 0!==c?c:!z.includes(t)})}),[z]),I=Object(s.useCallback)((c=>!(!e.can_access_all_calendars&&t!=c.id)&&(c.active&&c.calendar)),[t,e.can_access_all_calendars]),T=Object(s.useCallback)(((e,t)=>{!1===e&&"menu"===t.source||r(e)}),[]),Y=Object(s.useMemo)((()=>b.filter(I)),[b,I]),q=Object(s.useMemo)((()=>[{key:"employees",type:"group",label:Object(C.jsxs)("div",{className:"flex justify-space-between",children:[Object(C.jsx)("span",{children:Object(n.b)("words.employee_other")}),Object(C.jsx)("button",{className:"link",onClick:()=>d(),children:R?Object(n.b)("phrases.deselect_all"):Object(n.b)("phrases.select_all_people")})]}),children:Y.map(((t,s)=>{const a=!o.includes(t.id);return{key:`${t.id}-${s}`,onClick:()=>!a&&h(t.id),disabled:a,label:Object(C.jsxs)(N,{children:[Object(C.jsx)(x.a,{placement:"left",title:a&&Object(n.b)("calendar.no_working_hours"),children:Object(C.jsx)(E,{resource_id:t.id,disabled:a,checked:!a&&void 0,children:Object(C.jsx)(l.h,{$textEllipsis:!0,$block:!0,children:t.name})})}),e.can_edit_employee&&Object(C.jsx)(x.a,{placement:"top",title:Object(n.b)("words.setting",{count:2}),mouseEnterDelay:1,children:Object(C.jsx)($,{onClick:e=>{var s;e.preventDefault(),e.stopPropagation(),r(!1),null===(s=c.current)||void 0===s||s.open({id:t.id})},children:Object(C.jsx)(k.a,{})})})]})}}))},{key:"divider",type:"divider"},{key:"status",type:"group",label:Object(C.jsxs)("div",{className:"flex justify-space-between",children:[Object(C.jsx)("span",{children:Object(n.b)("words.status")}),Object(C.jsx)("button",{className:"link",onClick:()=>j(),children:Object(n.b)("words.default")})]}),children:[{key:"confirmed",onClick:()=>O("confirmed"),label:Object(C.jsx)(D,{status:"confirmed",children:Object(n.b)("words.confirmed")})},{key:"unconfirmed",onClick:()=>O("unconfirmed"),label:Object(C.jsx)(D,{status:"unconfirmed",children:Object(n.b)("words.unconfirmed")})},{key:"waiting",onClick:()=>O("waiting"),label:Object(C.jsx)(D,{status:"waiting",children:Object(n.b)("verbs.waiting")})},{key:"disconfirm",onClick:()=>O("disconfirm"),label:Object(C.jsx)(D,{status:"disconfirm",children:Object(n.b)("words.disconfirmed")})},{key:"sale",onClick:()=>O("sale"),label:Object(C.jsx)(D,{status:"sale",children:Object(n.b)("words.billed")})},{key:"busy",onClick:()=>O("busy"),label:Object(C.jsx)(D,{status:"busy",children:Object(n.b)("words.blocked")})}]}]),[E,D,o,Y,h,O,e.can_edit_employee,d,j,R]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(_.a,{menu:{items:q},trigger:["click"],placement:"bottomRight",open:i,onOpenChange:T,children:Object(C.jsx)(a.a,{className:g?"ant-btn-gold":void 0,type:g?"primary":"default",icon:g?Object(C.jsx)(y.a,{}):Object(C.jsx)(f.a,{}),children:Object(n.b)("verbs.filter")})}),Object(C.jsx)(w.a,{ref:c})]})};const $=g.d.a.withConfig({componentId:"wb__sc-ehf5kq-0"})(["padding:0 5px;border-radius:5px;&:hover{background-color:#e6f7ff;}"]),N=g.d.div.withConfig({componentId:"wb__sc-ehf5kq-1"})(["width:100%;display:flex;justify-content:space-between;"]),S=Object(g.d)(m.a).withConfig({componentId:"wb__sc-ehf5kq-2"})(["max-width:227px;overflow:hidden;& > span:not(.ant-checkbox){width:215px;overflow-x:hidden;}"]);var M=c(1209);var z=()=>{const e=Object(s.useRef)(null);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(a.a,{icon:Object(C.jsx)(k.a,{}),onClick:()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.open()}}),Object(C.jsx)(M.a,{ref:e})]})},D=c(2969),E=c(116),I=c(1094),T=c(3038),Y=c(3041),q=c(1218),F=c(1201);var H=()=>{const e=Object(p.a)((e=>e.current_user.permissions)),t=Object(s.useRef)(null),c=Object(s.useRef)(null),l=Object(u.b)((e=>e.date)),i=Object(s.useMemo)((()=>[{key:"occupy-calendars",icon:Object(C.jsx)(I.a,{}),onClick:()=>{var t;e.can_create_calendar?null===(t=c.current)||void 0===t||t.open({dates:[l,l]}):E.b.warning(Object(n.b)("phrases.no_permission_to_do_this"))},label:Object(n.b)("calendar.occupy.time_slots"),danger:!0},{key:"invoice-calendars",icon:Object(C.jsx)(T.a,{}),onClick:()=>{var c;e.can_create_sale?null===(c=t.current)||void 0===c||c.open(l.format("YYYY-MM-DD")):E.b.warning(Object(n.b)("phrases.no_permission_to_do_this"))},label:Object(n.b)("calendar.group_schedules")}]),[l,e.can_create_calendar,e.can_create_sale]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(A,{size:"small",offset:[-12,0],children:Object(C.jsx)(_.a,{menu:{items:i},trigger:["click"],placement:"bottomRight",children:Object(C.jsx)(a.a,{icon:Object(C.jsx)(Y.a,{}),children:Object(n.b)("words.action_other")})})}),Object(C.jsx)(F.a,{ref:c}),Object(C.jsx)(q.a,{ref:t})]})};const A=Object(g.d)(D.a).withConfig({componentId:"wb__sc-1v55dv4-0"})(["color:",";sup{background-color:"," !important;font-size:8rem !important;}"],(e=>e.theme.colors.default_text),(e=>e.theme.colors.primary));var J=c(937),L=c(1440),B=c(1128);const K=()=>{const e=Object(u.b)((e=>e.view_interval)),t=Object(B.a)(),c=Object(s.useMemo)((()=>[{key:"daily",onClick:()=>t("daily"),label:Object(n.b)("words.daily")},{key:"weekly",onClick:()=>t("weekly"),label:Object(n.b)("words.weekly")},{key:"monthly",onClick:()=>t("monthly"),label:Object(n.b)("words.monthly")}]),[t]);return Object(C.jsx)(_.a,{trigger:["click"],placement:"bottomRight",menu:{items:c,selectedKeys:[e]},children:Object(C.jsx)(a.a,{icon:Object(C.jsx)(L.a,{}),children:Object(n.b)("words.visualization")})})};K.displayName="ViewButton";var P=K,V=c(82),G=c(579);const Q=e=>{let{onClose:t}=e;const c=Object(p.a)((e=>e.is_whatsapp_booster)),m=Object(p.a)((e=>e.current_user.permissions)),x=Object(u.b)((e=>e.dispatch)),_=Object(u.b)((e=>e.date)),k=Object(u.b)((e=>e.view_interval)),y=Object(s.useRef)(null);Object(s.useEffect)((()=>{document.title=`${Object(G.a)(Object(i.j)(_,k,!0))} | ${V.a.TITLE}`}),[_,k]);const f=Object(s.useCallback)((e=>{x({type:"set_date",payload:_.add(e,Object(i.g)(k))})}),[_,x,k]);return Object(C.jsxs)(d.StyledHeader,{$transparent:c,children:[Object(C.jsxs)(d.TopContent,{children:[Object(C.jsxs)(d.StyledSkeleton,{loading:!1,active:!0,paragraph:{rows:1},title:!1,children:[Object(C.jsxs)(J.a,{style:{overflow:"hidden",display:"flex"},children:[Object(C.jsx)(l.i,{style:{paddingRight:15},onClick:()=>f(-1),children:Object(C.jsx)(l.d,{$size:25,as:r.a})}),Object(C.jsx)(d.Title,{children:Object(G.a)(Object(i.j)(_,k))}),Object(C.jsx)(l.i,{style:{paddingLeft:15},onClick:()=>f(1),children:Object(C.jsx)(l.d,{$size:25,as:o.a})})]}),Object(C.jsx)(d.Title,{style:{height:40},children:Object(C.jsx)(h.a,{})})]}),Object(C.jsx)(d.StyledSkeleton,{loading:!1,className:"right",active:!0,paragraph:{rows:1,width:250},title:!1,children:Object(C.jsxs)(d.HeaderActions,{children:[Object(C.jsx)(P,{}),m.can_access_calendar&&Object(C.jsx)(R,{}),Object(C.jsx)(H,{}),Object(C.jsx)(z,{}),Object(C.jsx)(a.a,{icon:Object(C.jsx)(b.a,{}),type:"primary",onClick:()=>{var e;m.can_create_calendar?null===(e=y.current)||void 0===e||e.open({initial_values:{date:_}}):E.b.warning(Object(n.b)("phrases.no_permission_to_do_this"))},children:Object(n.b)("words.new")}),t&&Object(C.jsx)(a.a,{icon:Object(C.jsx)(j.a,{}),onClick:t})]})})]}),Object(C.jsx)(O.a,{ref:y})]})};Q.displayName="HeaderDesktop";t.default=Object(s.memo)(Q)}}]);
//# sourceMappingURL=201.8e320b90.chunk.js.map