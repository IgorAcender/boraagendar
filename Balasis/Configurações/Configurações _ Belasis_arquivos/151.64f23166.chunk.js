(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[151],{1452:function(e,s,a){"use strict";var t=a(13),n=a(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892 772h-80v-80c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v80h-80c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h80v80c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-80h80c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM373.5 498.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.8-1.7-203.2 89.2-203.2 200 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.8-1.1 6.4-4.8 5.9-8.8zM824 472c0-109.4-87.9-198.3-196.9-200C516.3 270.3 424 361.2 424 472c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C357 742.6 326 814.8 324 891.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C505.8 695.7 563 672 624 672c110.4 0 200-89.5 200-200zm-109.5 90.5C690.3 586.7 658.2 600 624 600s-66.3-13.3-90.5-37.5a127.26 127.26 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4-.1 34.2-13.4 66.3-37.6 90.5z"}}]},name:"usergroup-add",theme:"outlined"},i=a(71),r=function(e,s){return n.createElement(i.a,Object(t.a)({},e,{ref:s,icon:c}))},o=n.forwardRef(r);s.a=o},1834:function(e,s,a){"use strict";var t=a(13),n=a(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}}]},name:"undo",theme:"outlined"},i=a(71),r=function(e,s){return n.createElement(i.a,Object(t.a)({},e,{ref:s,icon:c}))},o=n.forwardRef(r);s.a=o},2922:function(e,s,a){"use strict";a.r(s);var t=a(0),n=a.n(t),c=a(50),i=a(250),r=a(585),o=a(349),_=a(19),l=a(37),d=a(405);const m=l.e`
  query WhatsAppMarketingConfiguration {
    current_salon {
      id
      send_reminder_sms_automatic
      send_sms_calendar_message
      send_sms_calendar_through_app_message
      send_sms_inactive_clients
      send_sms_status_confirm
      send_sms_status_disconfirm
      send_sms_status_unconfirm
      sms_birthday_automatic
      sms_calendar_default
      send_calendar_change_message

      sms_message_configuration {
        id
        send_welcome_message
        send_invite_schedule_message
        send_cashback_message
        send_expiring_package_message
        send_care_message
        send_unconfirmed_message_creation
        send_pin_message
      }
    }
  }
`;var b=()=>Object(d.f)(m,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),u=a(116),h=a(13),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 224H768v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H548v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H328v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H96c-17.7 0-32 14.3-32 32v576c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V256c0-17.7-14.3-32-32-32zm-40 568H136V296h120v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56h148v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56h148v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56h120v496zM416 496H232c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm0 136H232c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm308.2-177.4L620.6 598.3l-52.8-73.1c-3-4.2-7.8-6.6-12.9-6.6H500c-6.5 0-10.3 7.4-6.5 12.7l114.1 158.2a15.9 15.9 0 0025.8 0l165-228.7c3.8-5.3 0-12.7-6.5-12.7H737c-5-.1-9.8 2.4-12.8 6.5z"}}]},name:"schedule",theme:"outlined"},g=a(71),p=function(e,s){return t.createElement(g.a,Object(h.a)({},e,{ref:s,icon:j}))};var O=t.forwardRef(p),f=a(18),x=a(593),w=a(2937),v=a(3023),k=a(2824),y=a(2879);const C=l.e`
  query WhatsAppMarketingConfiguration {
    current_salon {
      id

      sms_message_configuration {
        id
        invite_schedule_message
        send_invite_schedule_message
      }
    }
  }
`;var S=e=>{let{setFieldsValue:s,setChecked:a}=e;return Object(y.a)(C,{fetchPolicy:"network-only",onCompleted:e=>{let{current_salon:{sms_message_configuration:t}}=e;s({message:t.invite_schedule_message}),a(t.send_invite_schedule_message)}})},A=a(668),F=a(27),I=a(637),M=a(339),E=a(581),R=a(22);const V=(e,s)=>{const{afterSave:a}=e,[n,r]=Object(t.useState)(!1),[o,_]=Object(t.useState)(!1),l=Object(F.a)((e=>e.current_user.permissions)),d=Object(F.a)((e=>e.is_mobile)),m=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),b=Object(t.useRef)(null),h=Object(x.b)(),[j]=w.a.useForm(),{resetFields:g,submit:p,setFieldsValue:O}=j,[y,{loading:C}]=S({setFieldsValue:O,setChecked:_}),[V,{loading:P}]=Object(A.a)(),L=Object(t.useCallback)((()=>{y(),r(!0)}),[y]),$=Object(t.useCallback)((()=>{r(!1)}),[]);Object(t.useImperativeHandle)(s,(()=>({open:L,close:$})));const q=Object(t.useCallback)((e=>{e||g()}),[g]),z=Object(t.useCallback)((async e=>{m?_(e):h({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[h,m]),T=Object(t.useCallback)((async e=>{if(!l.can_edit_whatsapp_marketing)return void u.b.warning(Object(c.b)("phrases.no_permission_to_do_this"));const s={sms_message_configuration_attributes:{invite_schedule_message:e.message,send_invite_schedule_message:o}},{success:t}=await V(s);t&&(null===a||void 0===a||a(),$())}),[a,o,$,l.can_edit_whatsapp_marketing,V]);return Object(R.jsxs)(i.a,{open:n,onClose:$,closable:!0,width:500,placement:d?"bottom":"right",height:"100%",destroyOnClose:!0,afterOpenChange:q,push:!1,title:Object(c.b)("setup_whatsapp_marketing.online_schedule.title"),footer:Object(R.jsx)(E.a,{close:$,submit:p,loading:P}),children:[Object(R.jsx)(M.a,{loading:C}),Object(R.jsxs)(w.a,{layout:"vertical",form:j,onFinish:T,children:[Object(R.jsx)(i.h,{$bottom:15,$align:"justify",children:Object(c.b)("setup_whatsapp_marketing.online_schedule.second_visit_no_booking_message")}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:m&&o,onChange:z})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:"message",rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:b,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","salon_name","link"],textAreaRef:b,fieldName:"message",setFieldsValue:O})]})]})};V.displayName="InviteToScheduleOnlineMessageDrawer";var P=Object(t.forwardRef)(V),L=a(159);const $=e=>{const{active:s,loading:a,show_active_button:n=!0,show_personalize_button:r=!0,icon:o,title:_,content:l,handleConfiguration:d,onChangeActive:m}=e;return Object(R.jsxs)(z,{children:[Object(R.jsxs)(T,{children:[Object(t.isValidElement)(o)?o:Object(R.jsx)(i.d,{as:o,$size:45}),Object(R.jsx)(i.h,{style:{display:"flex",alignItems:"center"},$size:18,$bold:!0,$top:15,$bottom:15,$alignCenter:!0,children:_}),Object(R.jsx)(i.h,{$size:12,$color:"gray_1",children:l})]}),n&&Object(R.jsxs)(H,{children:[Object(c.b)("setup_whatsapp_marketing.automatic_send_status",{status:s?Object(c.b)("words.enabled").toLocaleLowerCase():Object(c.b)("words.disabled").toLocaleLowerCase()}),"\xa0",Object(R.jsx)(v.a,{onChange:m,checked:s,loading:a})]}),r&&Object(R.jsx)(B,{$show_active_button:n,children:Object(R.jsx)(L.a,{type:"link",disabled:a,onClick:()=>null===d||void 0===d?void 0:d(),children:Object(c.b)("verbs.personalize")})})]})};$.displayName="WhatsAppMarketingItem";var q=$;const z=_.d.div.withConfig({componentId:"wb__sc-u3tb4c-0"})(["flex:1;display:flex;flex-direction:column;background:#FFFFFF;box-shadow:0 0 10px 5px #f3f3f3;border:1px solid #F1F2F9;border-radius:20px;height:auto;cursor:no-drop;overflow:hidden;min-height:420px;"]),T=_.d.div.withConfig({componentId:"wb__sc-u3tb4c-1"})(["display:flex;flex-direction:column;align-items:center;padding:15px;"]),B=_.d.div.withConfig({componentId:"wb__sc-u3tb4c-2"})(["height:20px;display:flex;align-items:center;justify-content:space-around;border-top:1px solid rgba(0,0,0,0.08);padding:15px;",""],(e=>!e.$show_active_button&&Object(_.c)(["margin-top:auto;"]))),H=_.d.div.withConfig({componentId:"wb__sc-u3tb4c-3"})(["border-top:1px solid rgba(0,0,0,0.08);padding:15px;margin-top:auto;height:25px;text-align:center;"]);var W=e=>{let{active:s,loading:a,refetch:n}=e;const i=Object(F.a)((e=>e.current_user.permissions)),r=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),o=Object(x.b)(),_=Object(t.useRef)(null),[l,{loading:d}]=Object(A.a)(),m=Object(t.useCallback)((async e=>{r?i.can_edit_whatsapp_marketing?(await l({sms_message_configuration_attributes:{send_invite_schedule_message:e}}),n()):u.b.warning(Object(c.b)("phrases.no_permission_to_do_this")):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[o,r,i.can_edit_whatsapp_marketing,n,l]);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(q,{title:Object(c.b)("setup_whatsapp_marketing.online_schedule.title"),content:Object(c.b)("setup_whatsapp_marketing.online_schedule.content"),active:s,icon:O,loading:a||d,handleConfiguration:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.open()},onChangeActive:m}),Object(R.jsx)(P,{ref:_,afterSave:n})]})},N=a(3044);const D=l.e`
  query ExpiringPackageConfiguration {
    current_salon {
      id

      sms_message_configuration {
        id
        expiring_package_message
        send_expiring_package_message
      }
    }
  }
`;var G=e=>{let{setFieldsValue:s,setChecked:a}=e;return Object(y.a)(D,{fetchPolicy:"network-only",onCompleted:e=>{let{current_salon:{sms_message_configuration:t}}=e;s({message:t.expiring_package_message}),a(t.send_expiring_package_message)}})};const K=(e,s)=>{const{afterSave:a}=e,[n,r]=Object(t.useState)(!1),[o,_]=Object(t.useState)(!1),l=Object(F.a)((e=>e.current_user.permissions)),d=Object(F.a)((e=>e.is_mobile)),m=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),b=Object(t.useRef)(null),h=Object(x.b)(),[j]=w.a.useForm(),{resetFields:g,submit:p,setFieldsValue:O}=j,[y,{loading:C}]=G({setFieldsValue:O,setChecked:_}),[S,{loading:V}]=Object(A.a)(),P=Object(t.useCallback)((()=>{y(),r(!0)}),[y]),L=Object(t.useCallback)((()=>{r(!1)}),[]);Object(t.useImperativeHandle)(s,(()=>({close:L,open:P})));const $=Object(t.useCallback)((e=>{e||g()}),[g]),q=Object(t.useCallback)((async e=>{m?_(e):h({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[h,m]),z=Object(t.useCallback)((async e=>{if(!l.can_edit_whatsapp_marketing)return void u.b.warning(Object(c.b)("phrases.no_permission_to_do_this"));const s={sms_message_configuration_attributes:{expiring_package_message:e.message,send_expiring_package_message:o}},{success:t}=await S(s);t&&(null===a||void 0===a||a(),L())}),[a,o,L,l.can_edit_whatsapp_marketing,S]);return Object(R.jsxs)(i.a,{open:n,onClose:L,closable:!0,width:500,placement:d?"bottom":"right",height:"100%",destroyOnClose:!0,afterOpenChange:$,push:!1,title:Object(c.b)("setup_whatsapp_marketing.expiring_package.title"),footer:Object(R.jsx)(E.a,{close:L,submit:p,loading:V}),children:[Object(R.jsx)(M.a,{loading:C}),Object(R.jsxs)(w.a,{layout:"vertical",form:j,onFinish:z,children:[Object(R.jsx)(i.h,{$bottom:15,$align:"justify",children:Object(c.b)("setup_whatsapp_marketing.expiring_package.notify_package_expiration_message")}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:m&&o,onChange:q})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:"message",rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:b,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","service_name","expiring_package_date"],textAreaRef:b,fieldName:"message",setFieldsValue:O})]})]})};K.displayName="ExpiringPackageMessageDrawer";var J=Object(t.forwardRef)(K);var U=e=>{let{active:s,loading:a,refetch:n}=e;const i=Object(F.a)((e=>e.current_user.permissions)),r=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),o=Object(x.b)(),_=Object(t.useRef)(null),[l,{loading:d}]=Object(A.a)(),m=Object(t.useCallback)((async e=>{r?i.can_edit_whatsapp_marketing?(await l({sms_message_configuration_attributes:{send_expiring_package_message:e}}),n()):u.b.warning(Object(c.b)("phrases.no_permission_to_do_this")):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[o,r,i.can_edit_whatsapp_marketing,n,l]);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(q,{title:Object(c.b)("setup_whatsapp_marketing.expiring_package.title"),content:Object(c.b)("setup_whatsapp_marketing.expiring_package.content"),active:s,loading:a||d,show_active_button:!0,icon:N.a,onChangeActive:m,handleConfiguration:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.open()}}),Object(R.jsx)(J,{ref:_,afterSave:()=>n()})]})},Q=a(1452),X=a(2838);const Y=l.e`
  query WhatsAppMarketingConfiguration {
    current_salon {
      id
      send_sms_inactive_clients

      sms_message_configuration {
        id
        sms_inactive_clients_message
        days_define_inactive_client
        days_no_send_inactive_client_message
      }
    }
  }
`;var Z=e=>{let{setFieldsValue:s,setChecked:a}=e;return Object(y.a)(Y,{fetchPolicy:"network-only",onCompleted:e=>{let{current_salon:t}=e;s({message:t.sms_message_configuration.sms_inactive_clients_message,days_define_inactive_client:t.sms_message_configuration.days_define_inactive_client,days_no_send_inactive_client_message:t.sms_message_configuration.days_no_send_inactive_client_message}),a(t.send_sms_inactive_clients)}})},ee=a(2853),se=a(1227);var ae=e=>{let{label:s,help_content:a}=e;return Object(R.jsxs)(R.Fragment,{children:[s,"\xa0",Object(R.jsx)(se.a,{content:a,title:s,overlayStyle:{maxWidth:250},children:Object(R.jsx)(ee.a,{})})]})};const te=(e,s)=>{const{afterSave:a}=e,[n,r]=Object(t.useState)(!1),[o,_]=Object(t.useState)(!1),l=Object(F.a)((e=>e.current_user.permissions)),d=Object(F.a)((e=>e.is_mobile)),m=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),b=Object(t.useRef)(null),h=Object(x.b)(),[j]=w.a.useForm(),{resetFields:g,submit:p,setFieldsValue:O}=j,[y,{loading:C}]=Z({setFieldsValue:O,setChecked:_}),[S,{loading:V}]=Object(A.a)(),P=Object(t.useCallback)((()=>{y(),r(!0)}),[y]),L=Object(t.useCallback)((()=>{r(!1)}),[]);Object(t.useImperativeHandle)(s,(()=>({open:P,close:L})));const $=Object(t.useCallback)((e=>{e||g()}),[g]),q=Object(t.useCallback)((async e=>{m?_(e):h({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[h,m]),z=Object(t.useCallback)((async e=>{if(!l.can_edit_whatsapp_marketing)return void u.b.warning(Object(c.b)("phrases.no_permission_to_do_this"));const s={send_sms_inactive_clients:o,sms_message_configuration_attributes:{sms_inactive_clients_message:e.message,days_define_inactive_client:e.days_define_inactive_client,days_no_send_inactive_client_message:e.days_no_send_inactive_client_message}},{success:t}=await S(s);t&&(null===a||void 0===a||a(),L())}),[a,o,L,l.can_edit_whatsapp_marketing,S]);return Object(R.jsxs)(i.a,{open:n,onClose:L,closable:!0,width:500,placement:d?"bottom":"right",height:"100%",destroyOnClose:!0,afterOpenChange:$,push:!1,title:Object(c.b)("setup_whatsapp_marketing.inactive_clients.title"),footer:Object(R.jsx)(E.a,{close:L,submit:p,loading:V}),children:[Object(R.jsx)(M.a,{loading:C}),Object(R.jsxs)(w.a,{layout:"vertical",form:j,onFinish:z,children:[Object(R.jsx)(i.h,{$bottom:15,$align:"justify",children:Object(c.b)("setup_whatsapp_marketing.inactive_clients.inactive_customer_message")}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:m&&o,onChange:q})}),Object(R.jsx)(w.a.Item,{label:Object(R.jsx)(ae,{label:Object(c.b)("setup_whatsapp_marketing.inactive_clients.days_inactive_threshold"),help_content:Object(c.b)("setup_whatsapp_marketing.inactive_clients.inform_days_inactive_threshold")}),name:"days_define_inactive_client",rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(X.a,{type:"number",style:{width:"100%"},className:"hide-number-button"})}),Object(R.jsx)(w.a.Item,{label:Object(R.jsx)(ae,{label:Object(c.b)("setup_whatsapp_marketing.inactive_clients.repeat_message_days"),help_content:Object(c.b)("setup_whatsapp_marketing.inactive_clients.repeat_message_interval")}),name:"days_no_send_inactive_client_message",rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(X.a,{type:"number",max:3650,style:{width:"100%"},className:"hide-number-button"})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:"message",rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:b,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","salon_name"],textAreaRef:b,fieldName:"message",setFieldsValue:O})]})]})};te.displayName="InactiveClientsMessageDrawer";var ne=Object(t.forwardRef)(te);var ce=e=>{let{active:s,loading:a,refetch:n}=e;const i=Object(F.a)((e=>e.current_user.permissions)),r=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),o=Object(x.b)(),_=Object(t.useRef)(null),[l,{loading:d}]=Object(A.a)(),m=Object(t.useCallback)((async e=>{r?i.can_edit_whatsapp_marketing?(await l({send_sms_inactive_clients:e}),n()):u.b.warning(Object(c.b)("phrases.no_permission_to_do_this")):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[o,r,i.can_edit_whatsapp_marketing,n,l]);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(q,{title:Object(c.b)("setup_whatsapp_marketing.inactive_clients.title"),content:Object(c.b)("setup_whatsapp_marketing.inactive_clients.content"),active:s,loading:a||d,icon:Q.a,handleConfiguration:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.open()},onChangeActive:m}),Object(R.jsx)(ne,{ref:_,afterSave:n})]})},ie=a(3048);const re=l.e`
  query WhatsAppMarketingConfiguration {
    current_salon {
      id

      sms_message_configuration {
        id
        cashback_message
        cashback_minimum_value
        send_cashback_message
      }
    }
  }
`;var oe=e=>{let{setFieldsValue:s,setChecked:a}=e;return Object(y.a)(re,{fetchPolicy:"network-only",onCompleted:e=>{let{current_salon:{sms_message_configuration:t}}=e;s({message:t.cashback_message,active:t.send_cashback_message,cashback_minimum_value:t.cashback_minimum_value}),a(t.send_cashback_message)}})},_e=a(584);const le=(e,s)=>{const{afterSave:a}=e,[n,r]=Object(t.useState)(!1),[o,_]=Object(t.useState)(!1),l=Object(F.a)((e=>e.current_user.permissions)),d=Object(F.a)((e=>e.is_mobile)),m=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),b=Object(t.useRef)(null),h=Object(x.b)(),[j]=w.a.useForm(),{resetFields:g,submit:p,setFieldsValue:O}=j,[y,{loading:C}]=oe({setFieldsValue:O,setChecked:_}),[S,{loading:V}]=Object(A.a)(),P=Object(t.useCallback)((()=>{y(),r(!0)}),[y]),L=Object(t.useCallback)((()=>{r(!1)}),[]);Object(t.useImperativeHandle)(s,(()=>({close:L,open:P})));const $=Object(t.useCallback)((e=>{e||g()}),[g]),q=Object(t.useCallback)((async e=>{m?_(e):h({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[h,m]),z=Object(t.useCallback)((async e=>{if(!l.can_edit_whatsapp_marketing)return void u.b.warning(Object(c.b)("phrases.no_permission_to_do_this"));const s={sms_message_configuration_attributes:{cashback_message:e.message,send_cashback_message:o,cashback_minimum_value:e.cashback_minimum_value}},{success:t}=await S(s);t&&(null===a||void 0===a||a(),L())}),[a,o,L,l.can_edit_whatsapp_marketing,S]);return Object(R.jsxs)(i.a,{open:n,onClose:L,closable:!0,width:500,placement:d?"bottom":"right",height:"100%",destroyOnClose:!0,afterOpenChange:$,push:!1,title:Object(c.b)("words.cashback"),footer:Object(R.jsx)(E.a,{close:L,submit:p,loading:V}),children:[Object(R.jsx)(M.a,{loading:C}),Object(R.jsxs)(w.a,{layout:"vertical",form:j,onFinish:z,children:[Object(R.jsx)(i.h,{$bottom:15,$align:"justify",children:Object(c.b)("setup_whatsapp_marketing.cashback.minimum_balance_notification")}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:m&&o,onChange:q})}),Object(R.jsx)(w.a.Item,{label:Object(R.jsxs)("span",{children:[Object(c.b)("setup_whatsapp_marketing.cashback.minimum_balance"),Object(R.jsx)(se.a,{title:Object(c.b)("setup_whatsapp_marketing.cashback.minimum_balance"),trigger:["hover","click"],overlayStyle:{maxWidth:250},content:Object(R.jsx)("div",{children:Object(c.b)("setup_whatsapp_marketing.cashback.your_client_will_be_notified")}),children:Object(R.jsx)(ie.a,{style:{marginLeft:5}})})]}),name:"cashback_minimum_value",children:Object(R.jsx)(_e.a,{})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:"message",rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:b,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","salon_name","cashback_value"],textAreaRef:b,fieldName:"message",setFieldsValue:O})]})]})};le.displayName="CashbackMessageDrawer";var de=Object(t.forwardRef)(le),me=a(756);var be=e=>{let{active:s,loading:a,refetch:n}=e;const i=Object(F.a)((e=>e.current_user.permissions)),r=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),o=Object(x.b)(),_=Object(t.useRef)(null),[l,{loading:d}]=Object(A.a)(),m=Object(t.useCallback)((async e=>{r?i.can_edit_whatsapp_marketing?(await l({sms_message_configuration_attributes:{send_cashback_message:e}}),n()):u.b.warning(Object(c.b)("phrases.no_permission_to_do_this")):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[o,r,i.can_edit_whatsapp_marketing,n,l]);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(q,{title:Object(c.b)("setup_whatsapp_marketing.cashback.title"),content:Object(c.b)("setup_whatsapp_marketing.cashback.content"),active:s,loading:a||d,show_active_button:!0,icon:Object(R.jsx)(me.a,{style:{fontSize:"52rem"}}),onChangeActive:m,handleConfiguration:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.open()}}),Object(R.jsx)(de,{ref:_,afterSave:()=>n()})]})},ue=a(2969),he=a(1829),je=a(2831),ge=a(2976),pe=a(340);var Oe=e=>{let{checked:s,setChecked:a,setFieldsValue:n}=e;const i=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),r=Object(t.useRef)(null),o=Object(x.b)();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ge.a,{type:"info",style:{marginBottom:16},message:Object(R.jsx)(pe.a,{i18nKey:"setup_whatsapp_marketing.calendar_status.status_canceled_description",components:[Object(R.jsx)("b",{})]})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:i&&s.disconfirmed,onChange:e=>{i?a({...s,disconfirmed:e}):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:["sms_message_configuration","sms_message_calendar_disconfirm"],rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:r,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","salon_name","service_name","date","time","employee_name","price","confirmation_link"],textAreaRef:r,fieldName:["sms_message_configuration","sms_message_calendar_disconfirm"],setFieldsValue:n})]})};var fe=e=>{let{checked:s,setChecked:a,setFieldsValue:n}=e;const i=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),r=Object(t.useRef)(null),o=Object(x.b)();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ge.a,{type:"info",style:{marginBottom:16},message:Object(R.jsx)(pe.a,{i18nKey:"setup_whatsapp_marketing.calendar_status.online_schedule_creation_description",components:[Object(R.jsx)("b",{})]})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:i&&s.create_app,onChange:e=>{i?a({...s,create_app:e}):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:["sms_message_configuration","sms_calendar_through_app_message"],rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:r,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","service_name","date","salon_name","time","employee_name","price","confirmation_link"],textAreaRef:r,fieldName:["sms_message_configuration","sms_calendar_through_app_message"],setFieldsValue:n})]})};var xe=e=>{let{checked:s,setChecked:a,setFieldsValue:n}=e;const i=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),r=Object(t.useRef)(null),o=Object(x.b)();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ge.a,{type:"info",style:{marginBottom:16},message:Object(R.jsx)(pe.a,{i18nKey:"setup_whatsapp_marketing.calendar_status.system_schedule_creation_description",components:[Object(R.jsx)("b",{})]})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:i&&s.create_system,onChange:e=>{i?a({...s,create_system:e}):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:["sms_message_configuration","sms_calendar_message"],rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:r,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","service_name","date","salon_name","time","employee_name","price","confirmation_link"],textAreaRef:r,fieldName:["sms_message_configuration","sms_calendar_message"],setFieldsValue:n})]})};var we=e=>{let{checked:s,setChecked:a,setFieldsValue:n}=e;const i=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),r=Object(t.useRef)(null),o=Object(x.b)();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ge.a,{type:"info",style:{marginBottom:16},message:Object(R.jsx)(pe.a,{i18nKey:"setup_whatsapp_marketing.calendar_status.status_unconfirmed_description",components:[Object(R.jsx)("b",{})]})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:i&&s.unconfirmed,onChange:e=>{i?a({...s,unconfirmed:e}):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:["sms_message_configuration","sms_message_calendar_unconfirmed"],rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:r,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","salon_name","service_name","date","time","employee_name","price","confirmation_link"],textAreaRef:r,fieldName:["sms_message_configuration","sms_message_calendar_unconfirmed"],setFieldsValue:n})]})};var ve=e=>{let{checked:s,setChecked:a,setFieldsValue:n}=e;const i=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),r=Object(t.useRef)(null),o=Object(x.b)();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ge.a,{type:"info",style:{marginBottom:16},message:Object(R.jsx)(pe.a,{i18nKey:"setup_whatsapp_marketing.calendar_status.update_calendar_description",components:[Object(R.jsx)("b",{})]})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:i&&s.change_calendar,onChange:e=>{i?a({...s,change_calendar:e}):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:["sms_message_configuration","change_calendar_message"],rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:r,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","service_name","date","time","employee_name","salon_name","confirmation_link"],textAreaRef:r,fieldName:["sms_message_configuration","change_calendar_message"],setFieldsValue:n})]})};var ke=e=>{let{checked:s,setChecked:a,setFieldsValue:n}=e;const i=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),r=Object(t.useRef)(null),o=Object(x.b)();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ge.a,{type:"info",style:{marginBottom:16},message:Object(R.jsx)(pe.a,{i18nKey:"setup_whatsapp_marketing.calendar_status.status_confirmed_description",components:[Object(R.jsx)("b",{})]})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:i&&s.confirmed,onChange:e=>{i?a({...s,confirmed:e}):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:["sms_message_configuration","sms_message_calendar_confirmed"],rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:r,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","salon_name","service_name","date","time","employee_name","price","confirmation_link"],textAreaRef:r,fieldName:["sms_message_configuration","sms_message_calendar_confirmed"],setFieldsValue:n})]})};var ye=e=>{let{checked:s,setChecked:a,setFieldsValue:n}=e;const i=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),r=Object(t.useRef)(null),o=Object(x.b)();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ge.a,{type:"info",style:{marginBottom:16},message:Object(R.jsx)(pe.a,{i18nKey:"setup_whatsapp_marketing.calendar_status.system_unconfirmed_schedule_creation_description",components:[Object(R.jsx)("b",{})]})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:i&&s.create_unconfirmed_system,onChange:e=>{i?a({...s,create_unconfirmed_system:e}):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:["sms_message_configuration","unconfirmed_message_creation"],rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:r,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","service_name","date","salon_name","time","employee_name","price","confirmation_link"],textAreaRef:r,fieldName:["sms_message_configuration","unconfirmed_message_creation"],setFieldsValue:n})]})};const Ce=e=>{const{active_tab:s,checked:a,setActiveTab:n,setChecked:i,setFieldsValue:r}=e,o=Object(F.a)((e=>e.is_mobile)),_=Object(t.useMemo)((()=>[{key:"create_schedule_system",forceRender:!0,label:Object(c.b)("setup_whatsapp_marketing.calendar_status.system_schedule_creation"),children:Object(R.jsx)(xe,{checked:a,setChecked:i,setFieldsValue:r})},{key:"create_unconfirmed_schedule_system",forceRender:!0,label:Object(c.b)("setup_whatsapp_marketing.calendar_status.system_unconfirmed_schedule_creation"),children:Object(R.jsx)(ye,{checked:a,setChecked:i,setFieldsValue:r})},{key:"create_schedule_online",forceRender:!0,label:Object(c.b)("setup_whatsapp_marketing.calendar_status.online_schedule_creation"),children:Object(R.jsx)(fe,{checked:a,setChecked:i,setFieldsValue:r})},{key:"update_schedule",forceRender:!0,label:Object(c.b)("setup_whatsapp_marketing.calendar_status.update_calendar"),children:Object(R.jsx)(ve,{checked:a,setChecked:i,setFieldsValue:r})},{key:"schedule_confirmed",forceRender:!0,label:Object(c.b)("setup_whatsapp_marketing.calendar_status.status_confirmed"),children:Object(R.jsx)(ke,{checked:a,setChecked:i,setFieldsValue:r})},{key:"schedule_unconfirmed",forceRender:!0,label:Object(c.b)("setup_whatsapp_marketing.calendar_status.status_unconfirmed"),children:Object(R.jsx)(we,{checked:a,setChecked:i,setFieldsValue:r})},{key:"schedule_disconfirmed",forceRender:!0,label:Object(c.b)("setup_whatsapp_marketing.calendar_status.status_canceled"),children:Object(R.jsx)(Oe,{checked:a,setChecked:i,setFieldsValue:r})}]),[a,i,r]);return Object(R.jsx)(Ae,{onTabClick:e=>n(e),tabPosition:o?"top":"left",activeKey:s,items:_,renderTabBar:(e,s)=>Object(R.jsx)(s,{...e,mobile:!1})})};Ce.displayName="CalendarStatusMessageTabs";var Se=Object(t.memo)(Ce);const Ae=Object(_.d)(je.a).withConfig({componentId:"wb__sc-1iunmnr-0"})(["height:100%;.ant-tabs-content-holder{overflow-y:auto;}"]),Fe=l.e`
  query WhatsAppMarketingConfiguration {
    current_salon {
      id
      send_sms_calendar_message
      send_sms_calendar_through_app_message
      send_sms_status_confirm
      send_sms_status_unconfirm
      send_sms_status_disconfirm
      send_calendar_change_message

      sms_message_configuration {
        id
        sms_calendar_message
        sms_calendar_through_app_message
        sms_message_calendar_confirmed
        sms_message_calendar_unconfirmed
        sms_message_calendar_disconfirm
        change_calendar_message
        send_unconfirmed_message_creation
        unconfirmed_message_creation
      }
    }
  }
`;var Ie=e=>{let{setFieldsValue:s,setChecked:a}=e;const t=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp}));return Object(y.a)(Fe,{fetchPolicy:"network-only",onCompleted:e=>{let{current_salon:n}=e;a({create_app:t&&n.send_sms_calendar_through_app_message,create_system:t&&n.send_sms_calendar_message,change_calendar:t&&n.send_calendar_change_message,confirmed:t&&n.send_sms_status_confirm,unconfirmed:t&&n.send_sms_status_unconfirm,disconfirmed:t&&n.send_sms_status_disconfirm,create_unconfirmed_system:t&&n.sms_message_configuration.send_unconfirmed_message_creation});const c={sms_calendar_message:n.sms_message_configuration.sms_calendar_message,sms_calendar_through_app_message:n.sms_message_configuration.sms_calendar_through_app_message,change_calendar_message:n.sms_message_configuration.change_calendar_message,sms_message_calendar_confirmed:n.sms_message_configuration.sms_message_calendar_confirmed,sms_message_calendar_unconfirmed:n.sms_message_configuration.sms_message_calendar_unconfirmed,sms_message_calendar_disconfirm:n.sms_message_configuration.sms_message_calendar_disconfirm,unconfirmed_message_creation:n.sms_message_configuration.unconfirmed_message_creation};s({sms_message_configuration:c})}})};const Me={create_app:!1,create_system:!1,change_calendar:!1,confirmed:!1,unconfirmed:!1,disconfirmed:!1},Ee=(e,s)=>{const{afterSave:a}=e,[n,r]=Object(t.useState)("create_schedule_system"),[o,_]=Object(t.useState)(Me),l=Object(F.a)((e=>e.is_mobile)),d=Object(F.a)((e=>e.current_user.permissions)),[m]=w.a.useForm(),{resetFields:b,submit:h,setFieldsValue:j}=m,[g,{loading:p}]=Ie({setFieldsValue:j,setChecked:_}),[O,{loading:f}]=Object(A.a)(),[x,v]=Object(t.useState)(!1),k=Object(t.useCallback)((()=>{g(),v(!0)}),[g]),y=Object(t.useCallback)((()=>{v(!1)}),[]);Object(t.useImperativeHandle)(s,(()=>({open:k,close:y})));const C=Object(t.useCallback)((e=>{e||b()}),[b]);return Object(R.jsx)(i.a,{title:Object(c.b)("setup_whatsapp_marketing.calendar_status.title"),open:x,onClose:y,closable:!0,width:950,placement:l?"bottom":"right",height:"100%",destroyOnClose:!0,afterOpenChange:C,push:!1,footer:Object(R.jsx)(E.a,{close:y,submit:h,loading:f}),children:Object(R.jsxs)(w.a,{style:{height:"100%"},layout:"vertical",form:m,onFinish:async e=>{if(!d.can_edit_whatsapp_marketing)return void u.b.warning(Object(c.b)("phrases.no_permission_to_do_this"));const s={send_sms_calendar_message:o.create_system,send_sms_calendar_through_app_message:o.create_app,send_calendar_change_message:o.change_calendar,send_sms_status_confirm:o.confirmed,send_sms_status_unconfirm:o.unconfirmed,send_sms_status_disconfirm:o.disconfirmed,sms_message_configuration_attributes:{...e.sms_message_configuration,send_unconfirmed_message_creation:o.create_unconfirmed_system}},{success:t}=await O(s);t&&(null===a||void 0===a||a(),y())},children:[Object(R.jsx)(M.a,{loading:p}),Object(R.jsx)(Se,{active_tab:n,checked:o,setActiveTab:r,setChecked:_,setFieldsValue:j})]})})};Ee.displayName="CalendarStatusMessageDrawer";var Re=Object(t.forwardRef)(Ee),Ve=a(342);const Pe=e=>{const{send_sms_calendar_message:s,send_sms_calendar_through_app_message:a,send_calendar_change_message:n,send_sms_status_confirm:r,send_sms_status_unconfirm:o,send_sms_status_disconfirm:_,send_unconfirmed_message_creation:l,refetch:d}=e,m=Object(t.useRef)(null),b=Object(t.useMemo)((()=>[s,a,r,o,_,n,l].every(Boolean)?Object(c.b)("setup_whatsapp_marketing.automatic_send_status",{status:Object(c.b)("words.enabled").toLocaleLowerCase()}):[s,a,r,o,_,n,l].some(Boolean)?Object(c.b)("setup_whatsapp_marketing.automatic_send_status",{status:Object(c.b)("words.partial").toLocaleLowerCase()}):Object(c.b)("setup_whatsapp_marketing.automatic_send_status",{status:Object(c.b)("words.disabled").toLocaleLowerCase()})),[n,s,a,r,_,o,l]);return Object(R.jsxs)(z,{children:[Object(R.jsxs)(T,{children:[Object(R.jsx)(i.d,{as:he.a,$size:50}),Object(R.jsx)(i.h,{$size:18,$bold:!0,$top:15,$bottom:15,$alignCenter:!0,children:Object(c.b)("setup_whatsapp_marketing.calendar_status.title")}),Object(R.jsx)(i.h,{$align:"justify",children:Object(c.b)("setup_whatsapp_marketing.calendar_status.content")})]}),Object(R.jsxs)(H,{children:[b,"\xa0",Object(R.jsx)(se.a,{content:Object(c.b)("setup_whatsapp_marketing.calendar_status.popover"),title:b,styles:{root:{maxWidth:250}},children:Object(R.jsx)(ie.a,{})})]}),Object(R.jsx)(B,{$show_active_button:!0,children:Object(R.jsx)($e,{count:Object(Ve.b)({date:"2025/03/01"})?"":Object(c.b)("words.new"),size:"small",offset:[22,-4],children:Object(R.jsx)(i.h,{$color:"primary",$cursor:"pointer",onClick:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.open()},children:Object(c.b)("verbs.personalize")})})}),Object(R.jsx)(Re,{ref:m,afterSave:d})]})};Pe.displayName="CalendarStatus";var Le=Pe;const $e=Object(_.d)(ue.a).withConfig({componentId:"wb__sc-c3fzoj-0"})(["color:",";sup{background-color:"," !important;font-size:10rem !important;}"],(e=>e.theme.colors.default_text),(e=>e.theme.colors.primary));var qe=a(3038);const ze=l.e`
  query WhatsAppMarketingConfiguration {
    current_salon {
      id

      sms_message_configuration {
        id
        message_charge_overdue_bills
      }
    }
  }
`;var Te=e=>Object(y.a)(ze,{fetchPolicy:"network-only",onCompleted:s=>{let{current_salon:a}=s;e({message:a.sms_message_configuration.message_charge_overdue_bills})}});const Be=(e,s)=>{const a=Object(F.a)((e=>e.is_mobile)),n=Object(F.a)((e=>e.current_user.permissions)),r=Object(t.useRef)(null),[o]=w.a.useForm(),{resetFields:_,submit:l,setFieldsValue:d}=o,[m,{loading:b}]=Te(d),[h,{loading:j}]=Object(A.a)(),[g,p]=Object(t.useState)(!1),O=Object(t.useCallback)((()=>{m(),p(!0)}),[m]),f=Object(t.useCallback)((()=>{p(!1)}),[]);Object(t.useImperativeHandle)(s,(()=>({open:O,close:f})));const x=Object(t.useCallback)((e=>{e||_()}),[_]);return Object(R.jsxs)(i.a,{open:g,onClose:f,closable:!0,width:500,placement:a?"bottom":"right",height:"100%",destroyOnClose:!0,afterOpenChange:x,push:!1,title:Object(c.b)("setup_whatsapp_marketing.charge_overdue.title"),footer:Object(R.jsx)(E.a,{close:f,submit:l,loading:j}),children:[Object(R.jsx)(M.a,{loading:b}),Object(R.jsxs)(w.a,{layout:"vertical",form:o,onFinish:async e=>{if(!n.can_edit_whatsapp_marketing)return void u.b.warning(Object(c.b)("phrases.no_permission_to_do_this"));const s={sms_message_configuration_attributes:{message_charge_overdue_bills:e.message}},{success:a}=await h(s);a&&f()},children:[Object(R.jsx)(i.h,{$bottom:15,$align:"justify",children:Object(c.b)("setup_whatsapp_marketing.charge_overdue.overdue_invoices_notification")}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:"message",rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:r,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","salon_name"],textAreaRef:r,fieldName:"message",setFieldsValue:d})]})]})};Be.displayName="ChargeOverdueMessageDrawer";var He=Object(t.forwardRef)(Be);var We=()=>{const e=Object(t.useRef)(null);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(q,{title:Object(c.b)("setup_whatsapp_marketing.charge_overdue.title"),content:Object(c.b)("setup_whatsapp_marketing.charge_overdue.content"),active:!1,loading:!1,show_active_button:!1,icon:qe.a,handleConfiguration:()=>{var s;return null===(s=e.current)||void 0===s?void 0:s.open()}}),Object(R.jsx)(He,{ref:e})]})},Ne=a(1834),De=a(1005);var Ge=e=>{let{active:s,loading:a,refetch:n}=e;const i=Object(F.a)((e=>e.current_user.permissions)),r=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),o=Object(x.b)(),_=Object(t.useRef)(null),[l,{loading:d}]=Object(A.a)(),m=Object(t.useCallback)((async e=>{r?i.can_edit_whatsapp_marketing?(await l({send_reminder_sms_automatic:e}),n()):u.b.warning(Object(c.b)("phrases.no_permission_to_do_this")):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[o,r,i.can_edit_whatsapp_marketing,n,l]);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(q,{title:Object(c.b)("setup_whatsapp_marketing.client_return.title"),content:Object(c.b)("setup_whatsapp_marketing.client_return.content"),active:s,icon:Ne.a,loading:a||d,handleConfiguration:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.open()},onChangeActive:m}),Object(R.jsx)(De.a,{ref:_,afterSave:n})]})},Ke=a(3042);const Je=e=>{let{active:s,loading:a,refetch:n}=e;const i=Object(F.a)((e=>e.current_user.permissions)),r=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),o=Object(x.b)(),[_,{loading:l}]=Object(A.a)(),d=Object(t.useCallback)((async e=>{r?i.can_edit_whatsapp_marketing?(await _({sms_message_configuration_attributes:{send_pin_message:e}}),n()):u.b.warning(Object(c.b)("phrases.no_permission_to_do_this")):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[o,r,i.can_edit_whatsapp_marketing,n,_]);return Object(R.jsx)(q,{title:Object(c.b)("setup_whatsapp_marketing.send_pin_code.title"),content:Object(c.b)("setup_whatsapp_marketing.send_pin_code.content"),active:s,loading:a||l,show_active_button:!0,show_personalize_button:!1,icon:Ke.a,onChangeActive:d})};Je.displayName="SendPinCode";var Ue=Je,Qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"},Xe=function(e,s){return t.createElement(g.a,Object(h.a)({},e,{ref:s,icon:Qe}))};var Ye=t.forwardRef(Xe);const Ze=e=>{let{active:s,loading:a,refetch:n}=e;const i=Object(F.a)((e=>e.current_user.permissions)),r=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),o=Object(x.b)(),[_,{loading:l}]=Object(A.a)(),d=Object(t.useCallback)((async e=>{r?i.can_edit_whatsapp_marketing?(await _({sms_message_configuration_attributes:{send_care_message:e}}),n()):u.b.warning(Object(c.b)("phrases.no_permission_to_do_this")):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[o,r,i.can_edit_whatsapp_marketing,n,_]);return Object(R.jsx)(q,{title:Object(c.b)("setup_whatsapp_marketing.care_message.title"),content:Object(c.b)("setup_whatsapp_marketing.care_message.content"),active:s,loading:a||l,show_active_button:!0,show_personalize_button:!1,icon:Ye,onChangeActive:d,is_new:!Object(Ve.b)({date:"2025/09/10"})})};Ze.displayName="CareMessage";var es=Ze,ss=a(3035);const as=l.e`
  query WhatsAppMarketingConfiguration {
    current_salon {
      id
      sms_birthday_automatic

      sms_message_configuration {
        id
        sms_message_birthday
      }
    }
  }
`;var ts=e=>{let{setFieldsValue:s,setChecked:a}=e;return Object(y.a)(as,{fetchPolicy:"network-only",onCompleted:e=>{let{current_salon:t}=e;s({message:t.sms_message_configuration.sms_message_birthday}),a(t.sms_birthday_automatic)}})};const ns=(e,s)=>{const{afterSave:a}=e,[n,r]=Object(t.useState)(!1),[o,_]=Object(t.useState)(!1),l=Object(F.a)((e=>e.current_user.permissions)),d=Object(F.a)((e=>e.is_mobile)),m=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),b=Object(t.useRef)(null),h=Object(x.b)(),[j]=w.a.useForm(),{resetFields:g,submit:p,setFieldsValue:O}=j,[y,{loading:C}]=ts({setFieldsValue:O,setChecked:_}),[S,{loading:V}]=Object(A.a)(),P=Object(t.useCallback)((()=>{y(),r(!0)}),[y]),L=Object(t.useCallback)((()=>{r(!1)}),[]);Object(t.useImperativeHandle)(s,(()=>({open:P,close:L})));const $=Object(t.useCallback)((e=>{e||g()}),[g]),q=Object(t.useCallback)((async e=>{m?_(e):h({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[h,m]),z=Object(t.useCallback)((async e=>{if(!l.can_edit_whatsapp_marketing)return void u.b.warning(Object(c.b)("phrases.no_permission_to_do_this"));const s={sms_birthday_automatic:o,sms_message_configuration_attributes:{sms_message_birthday:e.message}},{success:t}=await S(s);t&&(null===a||void 0===a||a(),L())}),[a,o,L,l.can_edit_whatsapp_marketing,S]);return Object(R.jsxs)(i.a,{open:n,onClose:L,closable:!0,width:500,placement:d?"bottom":"right",height:"100%",destroyOnHidden:!0,afterOpenChange:$,push:!1,title:Object(c.b)("setup_whatsapp_marketing.birthday.congratulate_clients"),footer:Object(R.jsx)(E.a,{close:L,submit:p,loading:V}),children:[Object(R.jsx)(M.a,{loading:C}),Object(R.jsxs)(w.a,{layout:"vertical",form:j,onFinish:z,children:[Object(R.jsx)(i.h,{$bottom:15,$align:"justify",children:Object(c.b)("setup_whatsapp_marketing.birthday.automatic_sending")}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:m&&o,onChange:q})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:"message",rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:b,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","salon_name"],textAreaRef:b,fieldName:"message",setFieldsValue:j.setFieldsValue})]})]})};ns.displayName="BirthdayMessageDrawer";var cs=Object(t.forwardRef)(ns);var is=e=>{let{active:s,loading:a,refetch:n}=e;const i=Object(F.a)((e=>e.current_user.permissions)),r=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),o=Object(x.b)(),_=Object(t.useRef)(null),[l,{loading:d}]=Object(A.a)(),m=Object(t.useCallback)((async e=>{r?i.can_edit_whatsapp_marketing?(await l({sms_birthday_automatic:e}),n()):u.b.warning(Object(c.b)("phrases.no_permission_to_do_this")):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[o,r,i.can_edit_whatsapp_marketing,n,l]);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(q,{title:Object(c.b)("setup_whatsapp_marketing.birthday.title"),content:Object(c.b)("setup_whatsapp_marketing.birthday.content"),active:s,icon:ss.a,loading:a||d,handleConfiguration:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.open()},onChangeActive:m}),Object(R.jsx)(cs,{ref:_,afterSave:n})]})},rs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},os=function(e,s){return t.createElement(g.a,Object(h.a)({},e,{ref:s,icon:rs}))};var _s=t.forwardRef(os),ls=a(444),ds=a(1850),ms=a(76);const bs=l.e`
  mutation SMSCOnfigurationSaveSalon($data: SaveSalonInput!) {
    saveSalon(input: $data) {
      success
      errors
    }
  }
`;var us=()=>{const[e,{loading:s}]=Object(ds.a)(bs);return[async s=>{try{const{data:a}=await e({variables:{data:s}}),{success:t=!1,errors:n=[]}=(null===a||void 0===a?void 0:a.saveSalon)||{};return null===n||void 0===n||n.forEach((e=>u.b.error(e))),{success:t}}catch(a){return ms.a.captureException(a),u.b.error(Object(c.b)("phrases.generic_save_error_message")),console.error(a),{success:!1}}},{loading:s}]};const hs=l.e`
  query WhatsAppMarketingConfiguration {
    current_salon {
      id
      sms_calendar_default

      reminder_configurations {
        id
        message
        hours_before
      }
    }
  }
`;var js=e=>{let{setFieldsValue:s,setChecked:a}=e;return Object(y.a)(hs,{fetchPolicy:"network-only",onCompleted:e=>{let{current_salon:t}=e;s({reminder_configurations:t.reminder_configurations.map((e=>({id:e.id,message:e.message,hours_before:e.hours_before})))}),a(t.sms_calendar_default)}})},gs=a(447),ps=a(2883),Os=a(1438),fs=a(2854),xs=a(2843);const ws=()=>{const e=Object(F.a)((e=>e.is_mobile));return Object(R.jsx)(w.a.Item,{shouldUpdate:(e,s)=>e.reminder_configurations!==s.reminder_configurations,children:s=>{let{getFieldValue:a,setFieldsValue:t}=s;const r=(a("reminder_configurations")||[]).filter((e=>!e._destroy));return Object(R.jsx)(w.a.List,{name:"reminder_configurations",children:(s,o)=>{let{add:_}=o;return Object(R.jsxs)(R.Fragment,{children:[0===s.length&&Object(R.jsx)(i.h,{$semibold:!0,$alignCenter:!0,$block:!0,$size:16,children:Object(c.b)("setup_whatsapp_marketing.reminder.no_reminder_created_message")}),s.map(((s,o)=>{const _=a(["reminder_configurations",s.name,"_destroy"]),l=n.a.createRef();return Object(R.jsxs)(i.g,{$wrap:!0,gutter:{xs:0,md:8},$hidden:_,children:[Object(R.jsx)(w.a.Item,{name:[s.name,"id"],noStyle:!0,hidden:!0,children:Object(R.jsx)("input",{hidden:!0,autoComplete:"off"})}),Object(R.jsx)(w.a.Item,{name:[s.name,"_destroy"],noStyle:!0,hidden:!0,children:Object(R.jsx)("input",{hidden:!0,autoComplete:"off"})}),Object(R.jsx)(ps.a,{span:24,children:Object(R.jsx)(w.a.Item,{label:Object(R.jsx)(ae,{label:Object(c.b)("setup_whatsapp_marketing.reminder.reminder_advance_hours"),help_content:Object(c.b)("setup_whatsapp_marketing.reminder.hours_before_appointment_message")}),name:[s.name,"hours_before"],rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(X.a,{size:e?"large":"middle",style:{width:"100%"},type:"number",className:"hide-number-button"})})}),Object(R.jsxs)(ps.a,{flex:"1",children:[Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:[s.name,"message"],rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,autoSize:{minRows:3},ref:l})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","salon_name","date","time","service_name","employee_name","schedule_link"],textAreaRef:l,formListName:"reminder_configurations",fieldName:[s.name,"message"],setFieldsValue:t,getFieldValue:a})]}),r.length>1&&Object(R.jsx)(ps.a,{flex:"15px",children:Object(R.jsx)(fs.a,{className:"color-red",style:{marginTop:32,cursor:"pointer"},onClick:()=>(e=>{const s=a("reminder_configurations")||[];s[e]={...s[e],_destroy:!0},t({reminder_configurations:s})})(o)})}),Object(R.jsx)(Os.a,{})]},s.name)})),Object(R.jsx)(i.g,{$justifyCenter:!0,$top:15,$bottom:15,children:Object(R.jsxs)(L.a,{type:"primary",onClick:()=>(()=>{const e=Object(c.b)("setup_whatsapp_marketing.reminder.new_reminder");_({message:e,id:Object(gs.a)(),hours_before:2})})(),children:[Object(R.jsx)(xs.a,{})," ",Object(c.b)("setup_whatsapp_marketing.reminder.add_reminder")]})})]})}})}})};ws.displayName="RemindersFields";var vs=ws;const ks=(e,s)=>{const{afterSave:a}=e,[n,r]=Object(t.useState)(!1),[o,_]=Object(t.useState)(!1),l=Object(F.a)((e=>e.current_user.permissions)),d=Object(F.a)((e=>e.is_mobile)),m=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),b=Object(x.b)(),[h]=w.a.useForm(),{resetFields:j,submit:g,setFieldsValue:p}=h,[O,{loading:k}]=js({setFieldsValue:p,setChecked:_}),[y,{loading:C}]=us(),S=Object(t.useCallback)((()=>{O(),r(!0)}),[O]),A=Object(t.useCallback)((()=>{r(!1)}),[]);Object(t.useImperativeHandle)(s,(()=>({open:S,close:A})));const I=Object(t.useCallback)((e=>{e||j()}),[j]),V=Object(t.useCallback)((async e=>{m?_(e):b({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[b,m]),P=Object(t.useCallback)((async e=>{if(!l.can_edit_whatsapp_marketing)return void u.b.warning(Object(c.b)("phrases.no_permission_to_do_this"));const s=(e.reminder_configurations||[]).map((e=>({...e,id:Object(ls.a)(e.id)?void 0:e.id})));if(!s.some((e=>!e._destroy&&e.message&&e.hours_before)))return void u.b.error(Object(c.b)("setup_whatsapp_marketing.reminder.valid_configuration_example"));const{success:t}=await y({sms_calendar_default:o,reminder_configurations_attributes:s});t&&(u.b.success(Object(c.b)("phrases.saved_successfully",{prefix:Object(c.b)("words.setting"),context:"female"})),null===a||void 0===a||a(),A())}),[a,o,A,l.can_edit_whatsapp_marketing,y]);return Object(R.jsxs)(i.a,{open:n,onClose:A,closable:!0,width:500,placement:d?"bottom":"right",height:"100%",destroyOnClose:!0,afterOpenChange:I,push:!1,title:Object(c.b)("setup_whatsapp_marketing.reminder.title"),footer:Object(R.jsx)(E.a,{close:A,submit:g,loading:C}),children:[Object(R.jsx)(M.a,{loading:k}),Object(R.jsxs)(w.a,{form:h,layout:"vertical",onFinish:P,children:[Object(R.jsx)(i.h,{$bottom:15,$align:"justify",children:Object(c.b)("setup_whatsapp_marketing.reminder.schedule_reminder_message")}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:m&&o,onChange:V})}),Object(R.jsx)(vs,{})]})]})};ks.displayName="ReminderMessageDrawer";var ys=Object(t.forwardRef)(ks);var Cs=e=>{let{active:s,loading:a,refetch:n}=e;const i=Object(F.a)((e=>e.current_user.permissions)),r=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),o=Object(x.b)(),_=Object(t.useRef)(null),[l,{loading:d}]=Object(A.a)(),m=Object(t.useCallback)((async e=>{r?i.can_edit_whatsapp_marketing?(await l({sms_calendar_default:e}),n()):u.b.warning(Object(c.b)("phrases.no_permission_to_do_this")):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[o,r,i.can_edit_whatsapp_marketing,n,l]);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(q,{title:Object(c.b)("setup_whatsapp_marketing.reminder.title"),content:Object(c.b)("setup_whatsapp_marketing.reminder.content"),active:s,loading:a||d,icon:_s,handleConfiguration:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.open()},onChangeActive:m}),Object(R.jsx)(ys,{ref:_,afterSave:n})]})},Ss={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M521.7 82c-152.5-.4-286.7 78.5-363.4 197.7-3.4 5.3.4 12.3 6.7 12.3h70.3c4.8 0 9.3-2.1 12.3-5.8 7-8.5 14.5-16.7 22.4-24.5 32.6-32.5 70.5-58.1 112.7-75.9 43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 32.6 32.5 58.1 70.4 76 112.5C865.7 417.8 875 464.1 875 512c0 47.9-9.4 94.2-27.8 137.8-17.8 42.1-43.4 80-76 112.5s-70.5 58.1-112.7 75.9A352.8 352.8 0 01520.6 866c-47.9 0-94.3-9.4-137.9-27.8A353.84 353.84 0 01270 762.3c-7.9-7.9-15.3-16.1-22.4-24.5-3-3.7-7.6-5.8-12.3-5.8H165c-6.3 0-10.2 7-6.7 12.3C234.9 863.2 368.5 942 520.6 942c236.2 0 428-190.1 430.4-425.6C953.4 277.1 761.3 82.6 521.7 82zM395.02 624v-76h-314c-4.4 0-8-3.6-8-8v-56c0-4.4 3.6-8 8-8h314v-76c0-6.7 7.8-10.5 13-6.3l141.9 112a8 8 0 010 12.6l-141.9 112c-5.2 4.1-13 .4-13-6.3z"}}]},name:"login",theme:"outlined"},As=function(e,s){return t.createElement(g.a,Object(h.a)({},e,{ref:s,icon:Ss}))};var Fs=t.forwardRef(As);const Is=l.e`
  query WhatsAppMarketingConfiguration {
    current_salon {
      id

      sms_message_configuration {
        id
        welcome_message
        send_welcome_message
      }
    }
  }
`;var Ms=e=>{let{setFieldsValue:s,setChecked:a}=e;return Object(y.a)(Is,{fetchPolicy:"network-only",onCompleted:e=>{let{current_salon:{sms_message_configuration:t}}=e;s({message:t.welcome_message}),a(t.send_welcome_message)}})};const Es=(e,s)=>{const{afterSave:a}=e,[n,r]=Object(t.useState)(!1),[o,_]=Object(t.useState)(!1),l=Object(F.a)((e=>e.current_user.permissions)),d=Object(F.a)((e=>e.is_mobile)),m=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),b=Object(t.useRef)(null),h=Object(x.b)(),[j]=w.a.useForm(),{resetFields:g,submit:p,setFieldsValue:O}=j,[y,{loading:C}]=Ms({setFieldsValue:O,setChecked:_}),[S,{loading:V}]=Object(A.a)(),P=Object(t.useCallback)((()=>{y(),r(!0)}),[y]),L=Object(t.useCallback)((()=>{r(!1)}),[]);Object(t.useImperativeHandle)(s,(()=>({open:P,close:L})));const $=Object(t.useCallback)((e=>{e||g()}),[g]),q=Object(t.useCallback)((async e=>{m?_(e):h({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[h,m]),z=Object(t.useCallback)((async e=>{if(!l.can_edit_whatsapp_marketing)return void u.b.warning(Object(c.b)("phrases.no_permission_to_do_this"));const s={sms_message_configuration_attributes:{welcome_message:e.message,send_welcome_message:o}},{success:t}=await S(s);t&&(null===a||void 0===a||a(),L())}),[a,o,L,l.can_edit_whatsapp_marketing,S]);return Object(R.jsxs)(i.a,{open:n,onClose:L,closable:!0,width:500,placement:d?"bottom":"right",height:"100%",destroyOnClose:!0,afterOpenChange:$,push:!1,title:Object(c.b)("setup_whatsapp_marketing.welcome.title"),footer:Object(R.jsx)(E.a,{close:L,submit:p,loading:V}),children:[Object(R.jsx)(M.a,{loading:C}),Object(R.jsxs)(w.a,{layout:"vertical",form:j,onFinish:z,children:[Object(R.jsx)(i.h,{$bottom:15,$align:"justify",children:Object(c.b)("setup_whatsapp_marketing.welcome.first_visit_followup_message")}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("phrases.enable_automatic_sending"),children:Object(R.jsx)(v.a,{checked:m&&o,onChange:q})}),Object(R.jsx)(w.a.Item,{label:Object(c.b)("words.message"),name:"message",rules:[{required:!0,message:Object(c.b)("phrases.required_field")}],children:Object(R.jsx)(k.a.TextArea,{showCount:!0,maxLength:750,ref:b,autoSize:{minRows:3}})}),Object(R.jsx)(I.a,{keys:["client_name","nickname","salon_name"],textAreaRef:b,fieldName:"message",setFieldsValue:O})]})]})};Es.displayName="WelcomeMessageDrawer";var Rs=Object(t.forwardRef)(Es);var Vs=e=>{let{active:s,loading:a,refetch:n}=e;const i=Object(F.a)((e=>e.current_user.permissions)),r=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),o=Object(x.b)(),_=Object(t.useRef)(null),[l,{loading:d}]=Object(A.a)(),m=Object(t.useCallback)((async e=>{r?i.can_edit_whatsapp_marketing?(await l({sms_message_configuration_attributes:{send_welcome_message:e}}),n()):u.b.warning(Object(c.b)("phrases.no_permission_to_do_this")):o({is_addon:!0,search:f.a.ID_MOBILE_MESSAGES_WHATSAPP})}),[o,r,i.can_edit_whatsapp_marketing,n,l]);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(q,{title:Object(c.b)("setup_whatsapp_marketing.welcome.title"),content:Object(c.b)("setup_whatsapp_marketing.welcome.content"),active:s,loading:a||d,icon:Fs,handleConfiguration:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.open()},onChangeActive:m}),Object(R.jsx)(Rs,{ref:_,afterSave:n})]})};const Ps=()=>{var e;const[s,a]=Object(t.useState)(0),n=Object(t.useRef)(null),r=Object(F.a)((e=>e.is_mobile)),_=Object(F.a)((e=>e.current_user.permissions)),l=Object(F.a)((e=>{let{current_user:{features:s,addons:a}}=e;return s.has_whatsapp_auto||a.has_messages_whatsapp})),d=Object(F.a)((e=>e.current_user.is_staff)),m=Object(o.b)("show_impersonate_bar"),{data:u,loading:h,refetch:j}=b(),g=null===u||void 0===u?void 0:u.current_salon,p=null===g||void 0===g?void 0:g.sms_message_configuration,O=m||d,f=Object(t.useMemo)((()=>{const e=[{component:is,key:"birthday"},{component:ce,key:"inactive-clients"},{component:Cs,key:"reminder"},{component:es,key:"care-message"},{component:Ge,key:"client-return"},{component:Le,key:"calendar-status"},{component:Vs,key:"welcome"},{component:W,key:"invite-to-schedule"},{component:be,key:"cashback-message"},{component:U,key:"expiring-package"},{component:We,key:"charge-overdue"}];return O&&e.push({component:Ue,key:"send-pin-code"}),e}),[O]);return Object(R.jsxs)(Ls,{has_permission:_.can_access_whatsapp_marketing,children:[Object(R.jsx)(i.h,{$paddings:r?[0,15]:0,$semibold:!0,$mBottom:10,children:Object(c.b)("setup_whatsapp_marketing.choose_automatic_whatsapp_campaigns")}),Object(R.jsxs)($s,{children:[Object(R.jsxs)(qs,{ref:n,onScroll:()=>{if(!n.current)return;const e=n.current.scrollLeft,t=n.current.offsetWidth-30,c=Math.round(e/t);c!==s&&a(c)},children:[Object(R.jsx)(is,{active:l&&!(null===g||void 0===g||!g.sms_birthday_automatic),loading:h,refetch:j}),Object(R.jsx)(ce,{active:l&&!(null===g||void 0===g||!g.send_sms_inactive_clients),loading:h,refetch:j}),Object(R.jsx)(Cs,{active:l&&!(null===g||void 0===g||!g.sms_calendar_default),loading:h,refetch:j}),Object(R.jsx)(es,{active:l&&!(null===p||void 0===p||!p.send_care_message),loading:h,refetch:j}),Object(R.jsx)(Ge,{active:l&&!(null===g||void 0===g||!g.send_reminder_sms_automatic),loading:h,refetch:j}),Object(R.jsx)(Le,{loading:h,send_sms_calendar_message:(null===g||void 0===g?void 0:g.send_sms_calendar_message)||!1,send_sms_calendar_through_app_message:(null===g||void 0===g?void 0:g.send_sms_calendar_through_app_message)||!1,send_calendar_change_message:(null===g||void 0===g?void 0:g.send_calendar_change_message)||!1,send_sms_status_confirm:(null===g||void 0===g?void 0:g.send_sms_status_confirm)||!1,send_sms_status_unconfirm:(null===g||void 0===g?void 0:g.send_sms_status_unconfirm)||!1,send_sms_status_disconfirm:(null===g||void 0===g?void 0:g.send_sms_status_disconfirm)||!1,send_unconfirmed_message_creation:(null===g||void 0===g||null===(e=g.sms_message_configuration)||void 0===e?void 0:e.send_unconfirmed_message_creation)||!1,refetch:j}),Object(R.jsx)(Vs,{active:l&&!(null===p||void 0===p||!p.send_welcome_message),loading:h,refetch:j}),Object(R.jsx)(W,{active:l&&!(null===p||void 0===p||!p.send_invite_schedule_message),loading:h,refetch:j}),Object(R.jsx)(be,{active:l&&!(null===p||void 0===p||!p.send_cashback_message),loading:h,refetch:j}),Object(R.jsx)(U,{active:l&&!(null===p||void 0===p||!p.send_expiring_package_message),loading:h,refetch:j}),Object(R.jsx)(We,{}),O&&Object(R.jsx)(Ue,{active:l&&!(null===p||void 0===p||!p.send_pin_message),loading:h,refetch:j})]}),Object(R.jsx)(zs,{children:f.map(((e,a)=>Object(R.jsx)(Ts,{$active:s===a,onClick:()=>(e=>{if(!n.current)return;const s=n.current.offsetWidth-30;n.current.scrollTo({left:e*s,behavior:"smooth"})})(a)},`campaign-${a}`)))})]})]})};Ps.displayName="Campaigns";s.default=Object(t.memo)(Ps);const Ls=Object(_.d)(r.c).withConfig({componentId:"wb__sc-rmxtoq-0"})(["flex-direction:column;margin-bottom:25px;",""],(e=>e.theme.is_mobile&&Object(_.c)(["margin-bottom:","px;"],(e=>e.theme.sidebar_mobile_bottom_margin)))),$s=_.d.div.withConfig({componentId:"wb__sc-rmxtoq-1"})(["position:relative;width:100%;"]),qs=_.d.div.withConfig({componentId:"wb__sc-rmxtoq-2"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(min(100%,270px),1fr));gap:16px;container-type:inline-size;@supports not (container-type:inline-size){grid-template-columns:repeat(auto-fit,minmax(270px,1fr));}@media (max-width:768px){display:flex;flex-direction:row;overflow-x:auto;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;scroll-padding:0 15px;padding:15px;scroll-behavior:smooth;scrollbar-width:none;&::-webkit-scrollbar{display:none;}> *{flex:0 0 calc(100% - 30px);max-width:calc(100% - 30px);scroll-snap-align:start;}}"]),zs=_.d.div.withConfig({componentId:"wb__sc-rmxtoq-3"})(["display:none;@media (max-width:768px){display:flex;justify-content:center;align-items:center;gap:8px;margin-top:12px;}"]),Ts=_.d.div.withConfig({componentId:"wb__sc-rmxtoq-4"})(["width:","px;height:8px;border-radius:4px;background:",";transition:all 0.3s ease;cursor:pointer;&:hover{background:",";}"],(e=>e.$active?24:8),(e=>e.$active?e.theme.color_primary:"#D9D9D9"),(e=>e.$active?e.theme.color_primary:"#BFBFBF"))}}]);
//# sourceMappingURL=151.64f23166.chunk.js.map