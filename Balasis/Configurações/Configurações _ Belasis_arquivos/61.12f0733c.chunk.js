(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[61],{1191:function(e,t,n){"use strict";var i=n(116),s=n(50),c=n(37),o=n(1850),a=n(76);const l=c.e`
  mutation updateSalonSettings($data: SaveSalonInput!) {
    saveSalon(input: $data) {
      success errors
    }
  }
`;t.a=()=>Object(o.a)(l,{onError:e=>{i.b.error(Object(s.b)("phrases.generic_save_error_message")),console.log(e),a.a.captureException(e)}})},1410:function(e,t,n){"use strict";var i=n(37),s=n(1850),c=n(50),o=n(116),a=n(76);const l=i.e`
  mutation SaveSalonConfiguration($data: SaveSalonConfigurationInput!) {
    saveSalonConfiguration(input: $data) {
      success errors
    }
  }
`;t.a=()=>Object(s.a)(l,{onError:e=>{o.b.error(Object(c.b)("phrases.generic_save_error_message")),console.log("saveMessageModel",e),a.a.captureException(e)},onCompleted:e=>{let{saveSalonConfiguration:{success:t,errors:n}}=e;t||o.b.error(Object(c.b)("phrases.generic_save_error_message")+(null===n||void 0===n?void 0:n.join(", "))||"")}})},1411:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(37),s=n(405),c=n(76);const o=i.e`
  query OnlineBookingSettingsSalon {
    current_company {
      id

      salon_configuration {
        id
        calendar_client_can_cancel
        calendar_client_can_cancel_hours_before
        calendar_client_can_schedule_minutes_before
        display_reviews
        display_anamneses
        status_calendar_client_created
        receive_online_booking_payment
        online_booking_group_multiple_calendars
        clients_schedules_slot_limit
        can_pay_in_local
        can_pay_with_card
        can_pay_with_pix
      }

      salon_web_profile {
        id
        wifi
        snack_bar
        parking_lot
        physically_impaired_accessibility
        kids
        primary_color
        theme_preference
        scheduling_flow
        required_login
      }
    }
  }
`;t.b=e=>Object(s.f)(o,{fetchPolicy:"network-only",onCompleted:t=>e(t.current_company),onError:e=>{c.a.captureException(e),console.error(e)}})},1412:function(e,t,n){"use strict";n(0);var i=n(2927),s=n(19),c=n(22);const o=e=>Object(c.jsx)(a,{style:{width:"100%"},allowClear:!1,disabledAlpha:!0,...e,onChange:(t,n)=>{var i;null===(i=e.onChange)||void 0===i||i.call(e,n,{value:n})}});o.displayName="ColorPickerInput",t.a=o;const a=Object(s.d)(i.a).withConfig({componentId:"wb__sc-xjeiqb-0"})([".ant-color-picker-color-block{width:100% !important;}"])},1413:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(37),s=n(405),c=n(76);const o=i.e`
  query Salon {
    current_salon {
      id
      salon_configuration {
        id
        down_payment_active
        down_payment_value
        can_pay_in_local
        can_pay_with_card
        can_pay_with_pix
      }
      salon_web_profile {
        id
        required_login
      }
    }
  }
`;t.b=e=>Object(s.f)(o,{fetchPolicy:"network-only",onCompleted:t=>{e(t.current_salon)},onError:e=>{c.a.captureException(e),console.log({error:e})}})},1414:function(e,t,n){"use strict";var i=n(37),s=n(405),c=n(76);const o=i.e`
  query subscriptionDrawerSalonData {
    current_company {
      id address number district city_name state_name
    }
  }
`;t.a=()=>Object(s.f)(o,{fetchPolicy:"network-only",onError:e=>{c.a.captureException(e),console.error(e)}})},1434:function(e,t,n){"use strict";n(0);var i=n(2937),s=n(2824),c=n(3026),o=n(19),a=n(50),l=n(579),r=n(27),b=n(82),d=n(2867),j=n(3065),h=n(717),_=n(3042),p=n(1095),u=n(716),g=n(18),m=n(250),O=n(722),x=n(1191),f=n(137),v=n(62);var w=n(1033),y=n(159),k=n(22);const C=e=>{let{icon:t,title:n,subtitle:i,handleCopy:c}=e;const o=Object(O.a)();return Object(k.jsxs)(I,{children:[Object(k.jsxs)(S,{children:[Object(k.jsx)(m.d,{as:t,$size:50}),Object(k.jsx)(m.h,{$size:18,$bold:!0,$top:15,$bottom:15,$alignCenter:!0,children:n}),Object(k.jsx)(m.h,{$align:"justify",children:i})]}),Object(k.jsx)("div",{style:{width:"100%"},children:Object(k.jsx)(s.a,{prefix:Object(k.jsx)(d.a,{}),disabled:!0,style:{width:"100%"},value:o,suffix:Object(k.jsx)(y.a,{size:"small",type:"primary",onClick:c,children:Object(a.b)("verbs.copy")})})})]})};C.displayName="LinkCard";var $=C;const S=o.d.div.withConfig({componentId:"wb__sc-1mogcyf-0"})(["display:flex;flex-direction:column;align-items:center;margin-bottom:25px;"]),I=o.d.div.withConfig({componentId:"wb__sc-1mogcyf-1"})(["flex:1;display:flex !important;flex-direction:column;justify-content:space-between;align-items:center;min-width:200px;max-width:280px;background:#FFFFFF;box-shadow:0 0 10px 4px rgba(168,168,168,0.4);border-radius:5px;padding:10px;height:320px;",";"],(e=>e.theme.is_mobile&&Object(o.c)(["padding:15px;max-width:unset;height:400px;margin:15px;"])));var N=n(116);const P=`.${g.w?b.a.ONLINEBOOKING_DOMAIN:"localhost:3050"}`,F=()=>{const[e]=i.a.useForm(),t=Object(v.a)(),n=Object(r.a)((e=>e.is_mobile)),c=Object(r.a)((e=>e.current_user)),o=Object(r.a)((e=>{var t;return null===(t=e.current_user.salon.site_config)||void 0===t?void 0:t.subdomain})),b=Object(w.a)(),g=Object(O.a)(),[y,{loading:C}]=Object(x.a)(),S=e=>{const t=(e=>({instagram:"?origin=instagram",whatsapp:"?origin=whatsapp",facebook:"?origin=facebook",google:"?origin=google",general:""}[e]))(e);b(`${g}${t}`)};return Object(k.jsxs)(E,{children:[Object(k.jsxs)(H,{children:[Object(k.jsx)(m.h,{className:"title",$semibold:!0,$mBottom:10,children:Object(a.b)("settings.online_booking.links.page_title")}),Object(k.jsx)(i.a,{form:e,layout:"vertical",onFinish:async e=>{var n;const i=await y({variables:{data:e}}),{success:s=!1,errors:o=[]}=(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.saveSalon)||{};if(null===o||void 0===o||o.map((e=>N.b.error(e))),!s)return;N.b.success(Object(a.b)("phrases.saved_successfully",{prefix:Object(a.b)("words.link")}));const l=Object(f.cloneDeepWith)(c);l.salon.site_config=e.site_config_attributes,t({type:"set_current_user",payload:l})},initialValues:{site_config_attributes:{subdomain:o}},style:{width:"100%"},children:Object(k.jsx)(i.a.Item,{normalize:l.x,name:["site_config_attributes","subdomain"],rules:[{required:!0,message:Object(a.b)("phrases.required_field")}],initialValue:{site_config:{subdomain:o}},label:Object(a.b)("phrases.default_link"),children:Object(k.jsx)(s.a.Search,{size:"large",style:{width:"100%"},enterButton:Object(a.b)("verbs.save"),onSearch:e.submit,loading:C,prefix:n?void 0:Object(k.jsx)(d.a,{}),suffix:P})})})]}),Object(k.jsxs)(q,{children:[Object(k.jsx)($,{handleCopy:()=>S("general"),icon:j.a,title:Object(a.b)("words.general"),subtitle:Object(a.b)("settings.online_booking.links.general_description")}),Object(k.jsx)($,{handleCopy:()=>S("instagram"),icon:h.a,title:"Instagram",subtitle:Object(a.b)("settings.online_booking.links.instagram_description")}),Object(k.jsx)($,{handleCopy:()=>S("whatsapp"),icon:_.a,title:"WhatsApp",subtitle:Object(a.b)("settings.online_booking.links.whatsapp_description")}),Object(k.jsx)($,{handleCopy:()=>S("google"),icon:p.a,title:"Google",subtitle:Object(a.b)("settings.online_booking.links.google_description")}),Object(k.jsx)($,{handleCopy:()=>S("facebook"),icon:u.a,title:"Facebook",subtitle:Object(a.b)("settings.online_booking.links.facebook_description")})]})]})};F.displayName="Links";t.a=F;const E=o.d.div.withConfig({componentId:"wb__sc-18hyx95-0"})(["display:flex;flex-direction:column;width:100%;",""],(e=>e.theme.is_mobile&&Object(o.c)(["max-width:unset;"]))),q=e=>{let{children:t}=e;return Object(r.a)((e=>e.is_mobile))?Object(k.jsx)(B,{children:t}):Object(k.jsx)(z,{children:t})};q.displayName="CardsContainer";const z=o.d.div.withConfig({componentId:"wb__sc-18hyx95-1"})(["display:flex;flex-direction:row;align-items:center;justify-content:flex-start;flex-wrap:wrap;gap:10px;margin-bottom:15px;padding:0 5px;"]),B=Object(o.d)(c.a).withConfig({componentId:"wb__sc-18hyx95-2"})(["height:100%;.slick-dots.slick-dots-bottom{bottom:-10px;li button{background:"," !important;}}"],(e=>e.theme.colors.primary)),H=o.d.div.withConfig({componentId:"wb__sc-18hyx95-3"})(["display:flex;flex-direction:column;padding:5px;.title{font-size:22rem;}",";"],(e=>e.theme.is_mobile&&Object(o.c)(["padding:10px 15px 0 15px;.title{font-size:16rem;}"])))},2810:function(e,t,n){},2821:function(e,t,n){"use strict";n.r(t);var i=n(0),s=n(20),c=n(585),o=n(50),a=n(340),l=n(2937),r=n(3023),b=n(159),d=n(116),j=n(250),h=n(1413),_=n(742),p=n(743),u=n(758),g=n(665),m=n(27),O=n(608),x=n(339),f=n(586),v=n(623),w=n(82),y=n(22);const k=e=>{let{handleBelasisPayClick:t}=e;const n=Object(m.a)((e=>e.current_user.permissions)),k=Object(m.a)((e=>e.current_user.salon)),[C,$]=Object(i.useState)(!1),[S,I]=Object(i.useState)(!1),N=Object(s.o)(),P=Object(i.useRef)(null),F=Object(i.useRef)(null),[E]=l.a.useForm(),{setFieldsValue:q,submit:z}=E,{loading:B,error:H}=Object(h.b)((e=>{const t={down_payment_active:e.salon_configuration.down_payment_active,down_payment_value:e.salon_configuration.down_payment_value,can_pay_in_local:e.salon_configuration.can_pay_in_local,can_pay_with_card:e.salon_configuration.can_pay_with_card,can_pay_with_pix:e.salon_configuration.can_pay_with_pix};$(k.has_online_payment),I(e.salon_web_profile.required_login),q(t)})),[M,{loading:V}]=Object(u.a)(),L=Object(i.useCallback)((()=>{var e,t;n.is_admin?w.a.IS_WEBOOK?null===(t=F.current)||void 0===t||t.open():null===(e=P.current)||void 0===e||e.open():d.b.warning(Object(o.b)("phrases.no_permission_to_do_this"))}),[n.is_admin]),W=Object(i.useCallback)(((e,n)=>{if(!1===e.can_pay_in_local){if(S)return;q({can_pay_in_local:!0}),O.a.information({className:"webook-modal",useConfirm:!0,title:Object(o.b)("words.attention"),content:Object(o.b)("settings.online_booking.required_local_pay"),okText:Object(o.b)("settings.online_booking.go_to_settings"),onOk:()=>N("/online-booking/settings")})}const i=n.can_pay_with_card,s=n.can_pay_with_pix;i||s||q({can_pay_in_local:!0}),C||(!0===e.can_pay_with_card&&(t(),q({can_pay_with_card:!1})),!0===e.can_pay_with_pix&&(t(),q({can_pay_with_pix:!1})))}),[C,S,t,N,q]);return Object(y.jsxs)(c.c,{has_permission:n.is_admin,children:[Object(y.jsx)(f.a,{visible:!!H,small:!1,children:Object(y.jsxs)(l.a,{form:E,onFinish:async e=>{const{data:t}=await M({variables:{data:{salon_configuration_attributes:e}}}),{success:n=!1,errors:i=[]}=(null===t||void 0===t?void 0:t.saveSalon)||{};null===i||void 0===i||i.map((e=>d.b.error(e))),n&&d.b.success(Object(o.b)("phrases.saved_successfully",{prefix:Object(o.b)("words.setting_other"),context:"female",count:2}))},onValuesChange:W,children:[Object(y.jsx)(x.a,{loading:B}),Object(y.jsx)(v.a,{title:Object(o.b)("words.payment_type_other"),is_column:!0,description:Object(y.jsxs)(y.Fragment,{children:[Object(o.b)("settings.payments.payment_type.description"),!C&&Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(a.a,{i18nKey:"settings.payments.payment_type.open_belasis_pay_account",components:[Object(y.jsx)(j.h,{onClick:t,$color:"primary",$size:16,$cursor:"pointer"})]})})]}),children:Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(y.jsx)(l.a.Item,{shouldUpdate:(e,t)=>e.can_pay_with_card!==t.can_pay_with_card||e.can_pay_with_pix!==t.can_pay_with_pix,noStyle:!0,children:e=>{let{getFieldValue:t}=e;const n=t("can_pay_with_card"),i=t("can_pay_with_pix");return Object(y.jsx)(l.a.Item,{noStyle:!0,valuePropName:"checked",name:"can_pay_in_local",children:Object(y.jsx)(r.a,{disabled:!n&&!i,checkedChildren:Object(o.b)("settings.payments.payment_type.in_local"),unCheckedChildren:Object(o.b)("settings.payments.payment_type.in_local")})})}}),Object(y.jsx)(l.a.Item,{name:"can_pay_with_card",noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(r.a,{style:{marginTop:8},checkedChildren:Object(o.b)("settings.payments.payment_type.with_card"),unCheckedChildren:Object(o.b)("settings.payments.payment_type.with_card")})}),w.a.IS_BELASIS&&Object(y.jsx)(l.a.Item,{name:"can_pay_with_pix",noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(r.a,{style:{marginTop:8},checkedChildren:Object(o.b)("settings.payments.payment_type.with_pix"),unCheckedChildren:Object(o.b)("settings.payments.payment_type.with_pix")})})]})}),Object(y.jsx)(v.a,{title:Object(o.b)("settings.payments.down_payment.active.title"),description:Object(y.jsx)(a.a,{i18nKey:"settings.payments.down_payment.active.description",components:[Object(y.jsx)("strong",{})]}),children:Object(y.jsx)(l.a.Item,{noStyle:!0,name:"down_payment_active",valuePropName:"checked",initialValue:!1,rules:[{validator:(e,t)=>t?k.has_online_payment?Promise.resolve():(L(),E.setFieldValue("down_payment_active",!1),Promise.reject()):Promise.resolve()}],children:Object(y.jsx)(r.a,{})})}),Object(y.jsx)(v.a,{title:Object(o.b)("settings.payments.down_payment.value.title"),description:Object(o.b)("settings.payments.down_payment.value.description"),is_column:!0,children:Object(y.jsx)(l.a.Item,{noStyle:!0,dependencies:["down_payment_active"],children:e=>{let{getFieldValue:t}=e;const n=t("down_payment_active");return Object(y.jsx)(l.a.Item,{name:"down_payment_value",initialValue:0,style:{width:"100%"},rules:n?[{type:"number",min:1,message:Object(o.b)("phrases.minimum_value",{number:"1%"})}]:void 0,children:Object(y.jsx)(g.a,{style:{width:"100%"},disabled:!n})})}})}),Object(y.jsx)(j.g,{$paddings:[15,0],justify:"end",children:Object(y.jsx)(b.a,{size:"middle",block:!1,type:"primary",onClick:z,loading:V,children:Object(o.b)("verbs.save")})})]})}),Object(y.jsx)(_.a,{ref:P}),Object(y.jsx)(p.a,{ref:F})]})};k.displayName="Payments";var C=Object(i.memo)(k),$=n(603),S=n(3024),I=n(1813),N=n(2854),P=n(3066),F=n(1195),E=n(37),q=n(1850),z=n(76);const B=E.e`
  mutation saveSalonWebProfile($data: SaveSalonWebProfileInput!) {
    saveSalonWebProfile(input: $data) {
      success errors
    }
  }
`;var H=()=>Object(q.a)(B,{onError:e=>{d.b.error(Object(o.b)("phrases.generic_save_error_message")),console.log("saveMessageModel",e),z.a.captureException(e)},onCompleted:e=>{let{saveSalonWebProfile:{success:t,errors:n}}=e;t||d.b.error(Object(o.b)("phrases.generic_save_error_message")+(null===n||void 0===n?void 0:n.join(", "))||"")}}),M=n(19);const V={transition:"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s",transform:"translateZ(0px) scale3d(.98, .98, 1)"},L={transition:"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s",transform:"translateZ(0px) scale3d(0.9, 0.9, 1)"},W={backgroundColor:"#eee",cursor:"pointer",overflow:"hidden",position:"relative",left:0,top:0},R=e=>{const{index:t,onClick:n,photo:i,margin:s,direction:c,top:a,left:l}=e,r=(100-30/i.width*100)/100,b=(100-30/i.height*100)/100;return L.transform=`translateZ(0px) scale3d(${r}, ${b}, 1)`,"column"===c&&(W.position="absolute",W.left=l,W.top=a),Object(y.jsxs)(A,{style:{margin:s,...W},className:i.selected?"":"not-selected",children:[Object(y.jsx)(T,{selected:!!i.selected}),Object(y.jsx)("img",{alt:Object(o.b)("settings.online_booking.selected_image"),style:i.selected?{...V,...L}:{...V},...i,onClick:e=>n(e,{index:t,photo:i})})]})};R.displayName="SelectedImage";var D=Object(i.memo)(R);const T=e=>{let{selected:t}=e;const n=Object(m.a)((e=>e.theme));return Object(y.jsx)("div",{style:{left:"4px",top:"4px",position:"absolute",zIndex:1},children:t?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("svg",{style:{fill:"white",position:"absolute"},width:"24px",height:"24px",children:Object(y.jsx)("circle",{cx:"12.5",cy:"12.2",r:"8.292"})}),Object(y.jsx)("svg",{style:{fill:n.colors.primary,position:"absolute"},width:"24px",height:"24px",children:Object(y.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})]}):Object(y.jsx)("svg",{height:"24px",width:"24px",children:Object(y.jsx)("circle",{cx:"12.5",cy:"12.2",r:"8.292",stroke:"white",strokeWidth:"2",fill:"transparent"})})})};T.displayName="Checkmark";const A=M.d.div.withConfig({componentId:"wb__sc-luzzty-0"})([""]);var U=n(148);const K=E.e`
  query OnlineBookingPhotoGallery {
    current_company {
      id

      salon_web_profile {
        id

        salon_web_profile_images {
          id
          src: image_url
          image_blurhash
          height
          width
        }
      }
    }
  }
`;var G=(e,t)=>{const n=Object(U.a)(),[s,c]=Object(i.useState)(!1);return[Object(i.useCallback)((async()=>{c(!0);try{const i=(await n.query({query:K,fetchPolicy:"network-only"})).data.current_company.salon_web_profile,s=(i.salon_web_profile_images||[]).map((e=>({...e,key:e.id,original_width:e.width,original_height:e.height})));t(i.id),e(s)}catch(i){z.a.captureException(i),console.error(i)}finally{c(!1)}}),[n,t,e]),{loading:s}]},Q=n(1126),J=n(826);const Z=e=>{const{index:t,margin:n,photo:s,top:c,left:o,onClick:a}=e,[l,r]=Object(i.useState)(!1);Object(i.useEffect)((()=>{if(r(!1),null===s||void 0===s||!s.src)return;const e=new Image;e.onload=()=>r(!0),e.src=s.src}),[s.src]);const b=Object(i.useMemo)((()=>{const e=s.image_blurhash||"U5SY{sxu~mxu%MfQt6fQ~mfQ9IfQ%MfQWCfQ",t=Object(J.a)(e,s.original_width,s.original_height);return l?s.src:t}),[s.image_blurhash,s.original_width,s.original_height,s.src,l]);return Object(y.jsx)(X,{style:{margin:n,top:c,left:o,height:s.height,width:s.width},children:Object(y.jsx)("img",{alt:"",loading:"lazy",...s,src:b,onClick:e=>a(e,{index:t,photo:s})})})};Z.displayName="RemoteImage";var Y=Object(i.memo)(Z);const X=M.d.div.withConfig({componentId:"wb__sc-1wpiv95-0"})(["position:relative;cursor:pointer;"]);var ee=n(1787),te=n.n(ee);const ne=()=>{const[e,t]=Object(i.useState)(),[n,s]=Object(i.useState)(!1),[c,a]=Object(i.useState)([]),[l,r]=Object(i.useState)(0),[h,_]=Object(i.useState)(!1),p=Object(i.useRef)(null),[u,{loading:g}]=H(),[m,{loading:O}]=G(a,t);Object(i.useEffect)((()=>{m()}),[]);const f=Object(i.useCallback)(((e,t)=>{r(t.index),_(!0)}),[]),v=Object(i.useCallback)(((e,t)=>{a((e=>e.map((e=>e.id===t.photo.id?{...e,selected:!e.selected}:e))))}),[]),w=Object(i.useCallback)(((e,t)=>{n?v(e,t):f(e,t)}),[f,v,n]),k=async t=>{var n;const i=t.map((e=>({image:e}))),s={id:e,salon_web_profile_images_attributes:i},c=await u({variables:{data:s}}),{success:a,errors:l}=(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.saveSalonWebProfile)||{};if(a)return d.b.success(Object(o.b)("phrases.saved_successfully",{prefix:Object(o.b)("words.setting"),context:"female"})),void m();null===l||void 0===l||l.forEach((e=>d.b.error(e)))},C=Object(i.useMemo)((()=>c.reduce(((e,t)=>t.selected?[...e,t.id]:e),[])),[c]),E=()=>{S.a.confirm({centered:!0,className:"webook-modal",title:Object(o.b)("words.attention"),content:Object(o.b)("phrases.confirm_delete",{model:Object(o.b)("words.image",{count:C.length}).toLocaleLowerCase(),count:C.length,context:"female"}),okText:Object(o.b)("phrases.yes_delete"),okType:"danger",cancelText:Object(o.b)("verbs.cancel"),onOk:()=>(async()=>{var t;if(0===C.length)return;const n=C.map((e=>({id:e,_destroy:!0}))),i={id:e,salon_web_profile_images_attributes:n},s=await u({variables:{data:i}}),{success:c,errors:a}=(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.saveSalonWebProfile)||{};if(c)return d.b.success(Object(o.b)("phrases.deleted_successfully",{count:n.length,context:"female",prefix:Object(o.b)("words.image",{count:n.length})})),void m();null===a||void 0===a||a.forEach((e=>d.b.error(e)))})()})};return Object(y.jsxs)("div",{style:{width:"100%"},children:[Object(y.jsx)(x.a,{loading:O}),Object(y.jsxs)(se,{children:[Object(y.jsxs)(j.g,{$alignCenter:!0,style:{display:"flex",justifyContent:"space-between"},$mBottom:16,children:[Object(y.jsx)(j.h,{$semibold:!0,$size:22,children:Object(o.b)("words.image",{count:2})}),Object(y.jsx)(oe,{children:n?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(b.a,{onClick:()=>s(!1),disabled:g,children:Object(o.b)("verbs.cancel")}),Object(y.jsxs)(b.a,{disabled:!1,onClick:()=>C.length?E():s(!1),loading:g,danger:!0,icon:Object(y.jsx)(N.a,{}),ghost:!0,children:[Object(o.b)("verbs.delete")," (",C.length,")"]})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(b.a,{type:"primary",icon:Object(y.jsx)(P.a,{}),onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},loading:O||g,children:Object(o.b)("settings.online_booking.upload_image")}),c.length?Object(y.jsx)(b.a,{danger:!0,ghost:!0,style:{marginLeft:8},icon:Object(y.jsx)(N.a,{}),onClick:()=>s(!0),disabled:O||g,children:Object(o.b)("settings.online_booking.delete_images")}):null]})})]}),Object(y.jsx)(ce,{children:c.length?Object(y.jsx)(Q.a,{photos:c,onClick:w,renderImage:e=>n?Object(y.jsx)(D,{...e}):Object(y.jsx)(Y,{...e})}):Object(y.jsx)(I.a,{image:I.a.PRESENTED_IMAGE_SIMPLE,description:Object(o.b)("settings.online_booking.add_first_image")})}),Object(y.jsx)("input",{hidden:!0,multiple:!0,type:"file",ref:p,onChange:async()=>{var e;const t=null===(e=p.current)||void 0===e?void 0:e.files;if(!t)return;const n=[],i=Array.from(t);await Promise.all(i.map((async e=>{try{await Object($.g)(e,p)}catch(t){return void d.b.error(t)}try{const t=await(async e=>{const t=new Promise(((t,n)=>{new te.a(e,{quality:.6,convertSize:1048576,success(n){n instanceof File&&t(n);const i=new File([n],e.name);t(i)},error(e){n(e)}})}));return await t})(e);n.push(t)}catch(t){d.b.error(Object(o.b)("settings.online_booking.unable_to_load_file")),console.log(t)}}))),n.length&&k(n),p.current&&(p.current.value="")},accept:"image/png, image/jpeg, image/jpg"}),Object(y.jsx)(F.b,{children:h?Object(y.jsx)(F.a,{onClose:()=>_(!1),children:Object(y.jsx)(F.c,{currentIndex:l,views:c})}):null})]})]})};ne.displayName="PhotoGallery";var ie=ne;const se=M.d.div.withConfig({componentId:"wb__sc-1tif1xx-0"})(["width:100%;padding:10px 0;"]),ce=M.d.div.withConfig({componentId:"wb__sc-1tif1xx-1"})(["width:100%;justify-content:center;"]),oe=M.d.div.withConfig({componentId:"wb__sc-1tif1xx-2"})(["display:flex;.ant-btn + .ant-btn{margin-left:8px;}"]);var ae=n(137),le=n(53),re=n.n(le),be=n(405);const de=E.e`
  query WebookAllEmployees {
    employees(actives: true) {
      id
      schedule_hours
    }
  }
`;var je=()=>Object(be.f)(de,{fetchPolicy:"network-only",onError:e=>{z.a.captureException(e),console.log(e)}});const he=(e,t)=>{const{setFieldsValue:n}=e,[s,c]=Object(i.useState)(!1),{data:l,loading:r}=je(),d=Object(i.useMemo)((()=>(null===l||void 0===l?void 0:l.employees)||[]),[null===l||void 0===l?void 0:l.employees]),h=Object(i.useMemo)((()=>{const e=[];return[0,1,2,3,4,5,6].forEach((t=>{const n=re()("23:59","HH:mm"),i=re()("00:00","HH:mm");e[t]={start_hour:n,end_hour:i,wday:t,work:!1}})),d.forEach((t=>{const n=JSON.parse(t.schedule_hours||"[]");[0,1,2,3,4,5,6].forEach((t=>{const i=n.find((e=>e.wday===t));i&&i.work&&(e[t].work=!0,e[t].start_hour.isAfter(re()(i.start,"HH:mm"))&&(e[t].start_hour=re()(i.start,"HH:mm")),e[t].end_hour.isBefore(re()(i.end,"HH:mm"))&&(e[t].end_hour=re()(i.end,"HH:mm")))}))})),e}),[d]),_=()=>{c(!0)},p=()=>{c(!1)};Object(i.useImperativeHandle)(t,(()=>({open:_,close:p})));const u=Object(i.useCallback)((()=>{h.forEach(((e,t)=>{if(!e.work)return void n({schedule_hours:{[t]:{work:!1}}});const i={work:!0,start:e.start_hour.format("HH:mm"),end:e.end_hour.format("HH:mm")};n({schedule_hours:{[t]:i}})})),p()}),[h,n]);return Object(y.jsx)(j.a,{open:s,onClose:p,width:600,title:Object(o.b)("settings.online_booking.schedule_suggestion"),footer:Object(y.jsxs)(pe,{children:[Object(y.jsx)(b.a,{size:"large",block:!0,onClick:p,children:Object(o.b)("verbs.cancel")}),Object(y.jsx)(b.a,{size:"large",block:!0,loading:r,disabled:r,type:"primary",onClick:u,children:Object(y.jsx)(j.h,{$semibold:!0,children:Object(o.b)("settings.online_booking.use_suggestion")})})]}),children:h.map((e=>Object(y.jsxs)(j.g,{$column:!0,$left:10,$right:10,$bottom:20,children:[Object(y.jsx)(j.h,{$block:!0,$bold:!0,$bottom:5,$size:16,children:re()().day(e.wday).format("dddd")}),e.work?Object(y.jsxs)(j.g,{$column:!0,children:[Object(y.jsx)(j.h,{$block:!0,children:Object(y.jsx)(a.a,{i18nKey:"settings.online_booking.start_of_business_hours",values:{time:e.start_hour.format("HH:mm")},components:[Object(y.jsx)(j.h,{$semibold:!0})]})}),Object(y.jsx)(j.h,{$block:!0,children:Object(y.jsx)(a.a,{i18nKey:"settings.online_booking.end_of_business_hours",values:{time:e.end_hour.format("HH:mm")},components:[Object(y.jsx)(j.h,{$semibold:!0})]})})]}):Object(y.jsx)(j.h,{$block:!0,$semibold:!0,children:Object(o.b)("settings.online_booking.no_business_hours")})]},e.wday)))})};he.displayName="OfficeHoursSuggestionDrawer";var _e=Object(i.forwardRef)(he);const pe=M.d.div.withConfig({componentId:"wb__sc-15a7z92-0"})(["display:flex;justify-content:flex-end;.ant-btn + .ant-btn{margin-left:8px;}"]);var ue=n(912),ge=n(1410),me=n(62);const Oe=()=>{const e=Object(m.a)((e=>e.current_user)),t=Object(i.useRef)(null),n=Object(m.a)((e=>e.current_user.salon.salon_configuration.business_hours)),s=Object(m.a)((e=>e.current_user.salon.salon_configuration.id)),c=Object(me.a)(),[r]=l.a.useForm(),{submit:h,setFieldsValue:_}=r,[p,{loading:u}]=Object(ge.a)(),g=Object(i.useCallback)((async t=>{var n;let i={};Object.entries(t.schedule_hours).forEach((e=>{let[t,n]=e;i={...i,[`wday_${t}`]:n.work,[`wday_${t}_start`]:n.start,[`wday_${t}_end`]:n.end,[`wday_${t}_lunch_start`]:n.lunch_start,[`wday_${t}_lunch_end`]:n.lunch_end}}));const a=await p({variables:{data:{id:s,business_hours:i}}}),{success:l,errors:r}=(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.saveSalonConfiguration)||{};if(!l)return void(null===r||void 0===r||r.forEach((e=>d.b.error(e))));d.b.success(Object(o.b)("phrases.saved_successfully",{prefix:Object(o.b)("words.setting"),context:"female"}));const b=Object(ae.cloneDeep)(e);b.salon.salon_configuration={...e.salon.salon_configuration,business_hours:i},c({type:"set_current_user",payload:b})}),[e,c,s,p]),O=[0,1,2,3,4,5,6].map((e=>({wday:e,work:n[`wday_${e}`],start:n[`wday_${e}_start`],end:n[`wday_${e}_end`],lunch_start:n[`wday_${e}_lunch_start`],lunch_end:n[`wday_${e}_lunch_end`]})));return Object(y.jsxs)(fe,{children:[Object(y.jsx)(j.h,{$size:16,$block:!0,$bottom:15,children:Object(y.jsx)(a.a,{i18nKey:"settings.online_booking.consider_all_active_employees",components:[Object(y.jsx)(j.h,{$size:16,$color:"primary",onClick:()=>{var e;return null===(e=t.current)||void 0===e?void 0:e.open()},$cursor:"pointer"})]})}),Object(y.jsx)(ve,{children:Object(y.jsx)(l.a,{form:r,onFinish:g,initialValues:{schedule_hours:O},children:Object(y.jsx)(f.a,{visible:!1,small:!0,children:Object(y.jsx)(ue.a,{loading:!1})})})}),Object(y.jsx)(we,{children:Object(y.jsx)(b.a,{type:"primary",onClick:()=>h(),loading:u,disabled:u,children:Object(o.b)("verbs.save")})}),Object(y.jsx)(_e,{ref:t,setFieldsValue:_})]})};Oe.displayName="OfficeHour";var xe=Oe;const fe=M.d.div.withConfig({componentId:"wb__sc-10cor82-0"})(["width:100%;padding:15px 0;"]),ve=M.d.div.withConfig({componentId:"wb__sc-10cor82-1"})(["position:relative;margin:0 -10px;"]),we=M.d.div.withConfig({componentId:"wb__sc-10cor82-2"})(["display:flex;margin-top:15px;justify-content:flex-end;"]);var ye=n(2824),ke=n(1256),Ce=n(2838),$e=n(2883),Se=n(1411),Ie=n(652),Ne=n(1191),Pe=n(1412),Fe=n(342);const Ee=()=>{const e=Object(m.a)((e=>e.current_user)),[t,n]=Object(i.useState)(!1),c=Object(me.a)(),h=Object(s.o)(),[_]=l.a.useForm(),{setFieldsValue:p,submit:u}=_,{loading:g}=Object(Se.b)((e=>{const{salon_configuration:t,salon_web_profile:i}=e;n(t.can_pay_in_local),p({salon_configuration:t,salon_web_profile:i})})),[f,{loading:v}]=Object(Ne.a)(),w=Object(i.useCallback)((async t=>{var n;const{salon_configuration:i}=t,s={salon_configuration_attributes:{...i,calendar_client_can_schedule_minutes_before:i.calendar_client_can_schedule_minutes_before||0},salon_web_profile_attributes:t.salon_web_profile},a=await f({variables:{data:s}}),{success:l=!1,errors:r=[]}=(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.saveSalon)||{};if(null===r||void 0===r||r.map((e=>d.b.error(e))),!l)return;d.b.success(Object(o.b)("phrases.saved_successfully",{prefix:Object(o.b)("words.setting",{count:2}),context:"female",count:2}));const b=Object(ae.cloneDeepWith)(e);b.salon.salon_configuration={...e.salon.salon_configuration,...t.salon_configuration},c({type:"set_current_user",payload:b})}),[e,c,f]),k=Object(i.useCallback)((e=>{var n;if(!1===(null===e||void 0===e||null===(n=e.salon_web_profile)||void 0===n?void 0:n.required_login)){if(t)return;_.setFieldsValue({salon_web_profile:{required_login:!0}}),O.a.information({className:"webook-modal",useConfirm:!0,title:Object(o.b)("words.attention"),content:Object(o.b)("settings.online_booking.required_local_pay"),okText:Object(o.b)("settings.online_booking.go_to_payments"),onOk:()=>h("/online-booking/payments")})}}),[t,_,h]);return Object(y.jsxs)(ze,{children:[Object(y.jsx)(x.a,{loading:g}),Object(y.jsxs)(l.a,{form:_,layout:"vertical",onFinish:w,style:{width:"100%"},onValuesChange:k,children:[Object(y.jsx)(l.a.Item,{name:["salon_configuration","id"],noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(ye.a,{type:"hidden"})}),Object(y.jsx)(l.a.Item,{name:["salon_web_profile","id"],noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(ye.a,{type:"hidden"})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsxs)(He,{children:[Object(o.b)("settings.online_booking.primary_color"),Object(y.jsx)(Fe.c,{date:"2024/10/01"})]}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.primary_color_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_web_profile","primary_color"],noStyle:!0,children:Object(y.jsx)(Pe.a,{})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsxs)(He,{children:[Object(o.b)("settings.online_booking.theme"),Object(y.jsx)(Fe.c,{date:"2024/10/01"})]}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.theme_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_web_profile","theme_preference"],noStyle:!0,children:Object(y.jsx)(ke.a,{style:{width:"100%"},allowClear:!1,options:[{label:Object(o.b)("words.light"),value:"light"},{label:Object(o.b)("words.dark"),value:"dark"},{label:Object(o.b)("words.optional"),value:"optional"}]})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsxs)(He,{children:[Object(o.b)("settings.online_booking.scheduling_flow"),Object(y.jsx)(Fe.c,{date:"2024/10/01"})]}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.scheduling_flow_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_web_profile","scheduling_flow"],noStyle:!0,children:Object(y.jsx)(ke.a,{style:{width:"100%"},allowClear:!1,options:[{label:Object(o.b)("words.service_other"),value:"services"},{label:Object(o.b)("words.employee_other"),value:"employees"}]})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsxs)(He,{children:[Object(o.b)("settings.online_booking.required_login"),Object(y.jsx)(Fe.c,{date:"2024/10/01"})]}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(y.jsx)(a.a,{i18nKey:"settings.online_booking.required_login_description",components:[Object(y.jsx)("br",{}),Object(y.jsx)("strong",{})]})}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_web_profile","required_login"],noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(r.a,{})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsx)(He,{children:Object(o.b)("settings.online_booking.booking_advance_time")}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.booking_advance_time_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_configuration","calendar_client_can_schedule_minutes_before"],noStyle:!0,children:Object(y.jsx)(Ie.b,{interval:30,last_interval:25,show_zero:!0,style:{width:"100%"},allowClear:!0})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsx)(He,{children:Object(o.b)("settings.online_booking.allow_booking_cancellations")}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.allow_booking_cancellations_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_configuration","calendar_client_can_cancel"],noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(r.a,{})})})]})]})}),Object(y.jsx)(l.a.Item,{noStyle:!0,shouldUpdate:(e,t)=>{var n,i;return(null===(n=e.salon_configuration)||void 0===n?void 0:n.calendar_client_can_cancel)!==(null===(i=t.salon_configuration)||void 0===i?void 0:i.calendar_client_can_cancel)},children:e=>{let{getFieldValue:t}=e;const n=t(["salon_configuration","calendar_client_can_cancel"]);return Object(y.jsx)(Be,{$hidden:!n,children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsx)(He,{children:Object(o.b)("settings.online_booking.booking_cancellation_hours_advance")}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.booking_cancellation_hours_advance_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_configuration","calendar_client_can_cancel_hours_before"],noStyle:!0,children:Object(y.jsx)(Ce.a,{style:{width:"100%"}})})})]})]})})}}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsx)(He,{children:Object(o.b)("settings.online_booking.client_created_booking_status")}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.client_created_booking_status_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_configuration","status_calendar_client_created"],noStyle:!0,children:Object(y.jsxs)(ke.a,{style:{width:"100%"},children:[Object(y.jsx)(ke.a.Option,{value:"confirmed",children:Object(o.b)("words.confirmed")}),Object(y.jsx)(ke.a.Option,{value:"unconfirmed",children:Object(o.b)("words.unconfirmed")})]})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsx)(He,{children:Object(o.b)("settings.online_booking.clients_per_hour")}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.clients_per_hour_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_configuration","clients_schedules_slot_limit"],noStyle:!0,children:Object(y.jsx)(Ce.a,{style:{width:"100%"}})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsx)(He,{children:Object(o.b)("settings.online_booking.allow_booking_grouping")}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.allow_booking_grouping_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_configuration","online_booking_group_multiple_calendars"],noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(r.a,{})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsx)(He,{children:Object(o.b)("settings.online_booking.show_received_reviews")}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.show_received_reviews_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_configuration","display_reviews"],noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(r.a,{})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsx)(He,{children:Object(o.b)("settings.online_booking.show_display_anamneses")}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.show_display_anamneses_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_configuration","display_anamneses"],noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(r.a,{})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsxs)(He,{children:[Object(o.b)("settings.online_booking.kids"),Object(y.jsx)(Fe.c,{date:"2024/10/01"})]}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.kids_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_web_profile","kids"],noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(r.a,{})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsx)(He,{children:Object(o.b)("settings.online_booking.own_parking")}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.own_parking_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_web_profile","parking_lot"],noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(r.a,{})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsx)(He,{children:Object(o.b)("words.wifi")}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.wifi_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_web_profile","wifi"],noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(r.a,{})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsx)(He,{children:Object(o.b)("settings.online_booking.bar_snacks")}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.bar_snacks_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_web_profile","snack_bar"],noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(r.a,{})})})]})]})}),Object(y.jsx)(Be,{children:Object(y.jsxs)(j.g,{$column:!0,$right:10,children:[Object(y.jsx)(He,{children:Object(o.b)("settings.online_booking.special_access")}),Object(y.jsxs)(j.g,{gutter:8,children:[Object(y.jsx)(Me,{flex:"auto",children:Object(o.b)("settings.online_booking.special_access_description")}),Object(y.jsx)(Me,{flex:"160px",children:Object(y.jsx)(l.a.Item,{name:["salon_web_profile","physically_impaired_accessibility"],noStyle:!0,valuePropName:"checked",children:Object(y.jsx)(r.a,{})})})]})]})})]}),Object(y.jsx)(j.g,{align:"middle",justify:"end",style:{marginTop:10},children:Object(y.jsx)(b.a,{type:"primary",loading:g||v,onClick:()=>u(),children:Object(o.b)("verbs.save")})})]})};Ee.displayName="Settings";var qe=Object(i.memo)(Ee);const ze=M.d.div.withConfig({componentId:"wb__sc-bjkieo-0"})(["width:100%;padding:15px 0;position:relative;"]),Be=M.d.div.withConfig({componentId:"wb__sc-bjkieo-1"})(["font-size:14rem;color:unset;display:",";flex-direction:row;justify-content:space-between;align-items:center;padding:15px 0;border-bottom:1px solid rgba(0,0,0,0.1);"],(e=>e.$hidden?"none":"flex")),He=M.d.span.withConfig({componentId:"wb__sc-bjkieo-2"})(["display:flex;align-items:center;justify-content:left;font-size:18rem;font-weight:bold;"]),Me=Object(M.d)($e.a).withConfig({componentId:"wb__sc-bjkieo-3"})(["font-size:16rem;"]);var Ve=n(713);const Le=E.e`
  fragment OnlineBookingServicesAttributes on Product {
    id
    active
    description
    image_blurhash
    image_url: small_thumb_url
    favorite
    price_cents
    duration
    site
    is_service: service
    deleted_at
  }
`,We=E.e`
  query OnlineBookingServicesList {
    all_inventory_products (
      actives: true,
      service: true,
      use_replica: true
    ) {
      all {
        ...OnlineBookingServicesAttributes
      }
    }
  }

  ${Le}
`;var Re=()=>{const{data:e,loading:t,refetch:n}=Object(be.f)(We,{fetchPolicy:"network-only",onError:e=>{console.log(e),z.a.captureException(e)}}),s=Object(i.useMemo)((()=>{var t;return null!==e&&void 0!==e&&null!==(t=e.all_inventory_products)&&void 0!==t&&t.all?e.all_inventory_products.all.filter((e=>e.is_service&&e.active&&!e.deleted_at)):[]}),[e]);return{available_services:Object(i.useMemo)((()=>s.filter((e=>e.site))),[s]),unavailable_services:Object(i.useMemo)((()=>s.filter((e=>!e.site))),[s]),loading:t,refetch:n}},De=n(1792),Te=n(909),Ae=n(631);const Ue=e=>{let{service:t,key:n,style:i,openServiceDrawer:s,saveService:c}=e;const a=Object(m.a)((e=>e.current_user.permissions));return Object(y.jsxs)(Ge,{style:i,children:[Object(y.jsxs)(Qe,{onClick:()=>s(t.id),children:[Object(y.jsx)(Ze,{type:"image",src:t.image_url},t.image_url),Object(y.jsxs)(Je,{children:[Object(y.jsx)(j.h,{$semibold:!0,$block:!0,$textEllipsis:!0,children:t.description}),Object(y.jsx)(j.h,{$block:!0,$textEllipsis:!0,$color:"gray_1",children:t.public_description||Object(o.b)("settings.online_booking.no_public_description")})]})]}),a.can_edit_product&&Object(y.jsx)(Ye,{available:t.site,onClick:async()=>{await c({id:t.id,site:!t.site})},children:t.site?Object(o.b)("verbs.unavailable"):Object(o.b)("verbs.available")})]},n)};Ue.displayName="Item";var Ke=Ue;const Ge=M.d.div.withConfig({componentId:"wb__sc-1wb4qqk-0"})(["width:100%;height:60px;display:flex;flex-direction:row;border-bottom:1px solid #ebeced;"]),Qe=M.d.div.withConfig({componentId:"wb__sc-1wb4qqk-1"})(["cursor:pointer;width:100%;display:flex;flex-direction:row;align-items:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),Je=M.d.div.withConfig({componentId:"wb__sc-1wb4qqk-2"})(["cursor:pointer;overflow:hidden;display:flex;flex-direction:column;"]),Ze=Object(M.d)(Ae.a).withConfig({componentId:"wb__sc-1wb4qqk-3"})(["width:40px !important;height:40px !important;border-radius:5px !important;margin-right:10px !important;border:1px solid #eee;"]),Ye=M.d.div.withConfig({componentId:"wb__sc-1wb4qqk-4"})(["color:",";cursor:pointer;align-self:center;margin-left:10px;margin-right:10px;"],(e=>e.available?e.theme.colors.red:e.theme.colors.primary)),Xe=e=>{const{services:t,title:n,description:s,openServiceDrawer:c,loading:a=!1}=e,l=Object(i.useRef)(null),[r,{loading:b}]=Object(Te.a)(),d=Object(i.useCallback)((e=>{const{index:n,key:i,style:s}=e,o=t[n];return Object(y.jsx)(Ke,{saveService:r,service:o,style:s,openServiceDrawer:c},i)}),[c,r,t]);return Object(y.jsxs)(tt,{className:"service-item",children:[Object(y.jsxs)("div",{ref:l,children:[Object(y.jsx)(j.h,{$size:18,$bold:!0,$block:!0,children:n}),Object(y.jsx)(j.h,{$align:"justify",$size:16,$bottom:10,children:s})]}),Object(y.jsx)(x.a,{loading:a||b}),0===t.length&&Object(y.jsx)(I.a,{image:I.a.PRESENTED_IMAGE_SIMPLE,description:Object(o.b)("phrases.empty")}),0!==t.length&&Object(y.jsx)(De.a,{children:e=>{var n;let{width:i,height:s}=e;return Object(y.jsx)(De.b,{width:i,height:s-((null===(n=l.current)||void 0===n?void 0:n.clientHeight)||0),rowHeight:60,rowRenderer:d,rowCount:t.length,overscanRowCount:10})}})]})};Xe.displayName="ServicesList";var et=Xe;const tt=M.d.div.withConfig({componentId:"wb__sc-c25127-0"})(["width:100%;padding:0 10px;"]),nt=()=>{const e=Object(i.useRef)(null),t=Object(m.a)((e=>e.current_user.permissions)),{available_services:n,unavailable_services:s,loading:c,refetch:a}=Re(),l=n=>{var i;t.can_edit_product?null===(i=e.current)||void 0===i||i.open({id:n}):d.b.warning(Object(o.b)("phrases.no_permission_to_do_this"))};return Object(y.jsxs)(st,{children:[Object(y.jsx)(et,{title:Object(o.b)("words.available",{count:2}),services:n,openServiceDrawer:l,description:Object(o.b)("settings.online_booking.available_services"),loading:c}),Object(y.jsx)(et,{title:Object(o.b)("words.unavailable",{count:2}),services:s,openServiceDrawer:l,description:Object(o.b)("settings.online_booking.unavailable_services"),loading:c}),Object(y.jsx)(Ve.a,{ref:e,afterSave:()=>a()})]})};nt.displayName="Services";var it=nt;const st=M.d.div.withConfig({componentId:"wb__sc-33f74v-0"})(["height:calc(100vh - 175px);width:100%;display:flex;flex-direction:row;padding:15px 0;.service-item + .service-item{margin-left:20px;}"]);var ct=n(543),ot=n(717),at=n(716),lt=n(3065);const rt=E.e`
  query OnlineBookingSettings {
    current_company {
      id

      salon_web_profile {
        id
        name
        address
        description
        phone
        whatsapp_number
        website
        image_url: large_thumb_url
        image_blurhash
        facebook
        instagram
      }
    }
  }
`;var bt=e=>Object(be.f)(rt,{fetchPolicy:"network-only",onCompleted:t=>e(t.current_company.salon_web_profile),onError:e=>{z.a.captureException(e),console.error(e)}}),dt=n(992),jt=n(1414),ht=n(591),_t=n(18),pt=n(722);n(2810);const ut=()=>{const e=Object(pt.a)(),t=Object(m.a)((e=>{var t;return null===(t=e.current_user.salon.site_config)||void 0===t?void 0:t.subdomain}));return Object(y.jsx)(mt,{children:Object(y.jsxs)("div",{className:"marvel-device iphone-x",children:[Object(y.jsx)("div",{className:"sleep"}),Object(y.jsx)("div",{className:"volume"}),Object(y.jsxs)("div",{className:"overflow",children:[Object(y.jsx)("div",{className:"shadow shadow--tr"}),Object(y.jsx)("div",{className:"shadow shadow--tl"}),Object(y.jsx)("div",{className:"shadow shadow--br"}),Object(y.jsx)("div",{className:"shadow shadow--bl"})]}),Object(y.jsx)("div",{className:"inner-shadow"}),Object(y.jsx)("div",{className:"screen",children:Object(y.jsx)("iframe",{title:t,src:`${_t.v?"http://":"https://"}${e}`,style:{width:"100%",height:"100%",border:"none"}})})]})})};ut.displayName="Preview";var gt=ut;const mt=M.d.div.withConfig({componentId:"wb__sc-ijry7u-0"})(["margin:10px 50px;"]);var Ot=n(3049),xt=n(599);const ft=e=>{let{image_url:t,image_blurhash:n,setImage:s,setPreview:c,...a}=e;const l=Object(i.useRef)(null),r=()=>{var e;null===(e=l.current)||void 0===e||e.click()},j=Object(i.useCallback)((e=>{new te.a(e,{quality:.8,convertSize:1048576,success(t){if(t instanceof File)return s(t),void c(URL.createObjectURL(t));const n=new File([t],e.name);s(n),c(URL.createObjectURL(t))},error(e){d.b.error(Object(o.b)("settings.online_booking.unable_to_load_file")),console.log(e.message)}})}),[s,c]),h=Object(i.useCallback)((async()=>{var e;const t=null===(e=l.current)||void 0===e?void 0:e.files;if(!t||!t[0])return;const n=t[0];try{await Object($.g)(n,l)}catch(i){return void d.b.error(i)}j(n)}),[j]);return Object(y.jsxs)(wt,{children:[Object(y.jsx)(kt,{onClick:r,type:"image",src:t,style:{cursor:"pointer"},blurhash:n,...a}),Object(y.jsxs)(yt,{children:[Object(y.jsx)(b.a,{icon:Object(y.jsx)(Ot.a,{}),size:"small",onClick:r,type:"primary",children:Object(o.b)("verbs.change")}),!!t&&Object(y.jsx)(b.a,{icon:Object(y.jsx)(N.a,{}),size:"small",onClick:()=>{s(null),c(void 0)},type:"primary",danger:!0,children:Object(o.b)("verbs.remove")})]}),Object(y.jsx)("input",{hidden:!0,type:"file",ref:l,onChange:h,multiple:!1,accept:"image/png, image/jpeg, image/jpg"})]})};ft.displayName="Logo";var vt=Object(i.memo)(ft);const wt=M.d.div.withConfig({componentId:"wb__sc-7tqeld-0"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;margin-bottom:15px;"]),yt=M.d.div.withConfig({componentId:"wb__sc-7tqeld-1"})(["display:flex;justify-content:center;align-items:center;margin-top:10px;.ant-btn + .ant-btn{margin-left:8px;}"]),kt=Object(M.d)(xt.a).withConfig({componentId:"wb__sc-7tqeld-2"})(["box-shadow:0 0 20px 0 #e8e8e8;min-height:130px;width:200px;"]),Ct=()=>{const[e,t]=Object(i.useState)(1),[n,s]=Object(i.useState)(),[c,a]=Object(i.useState)(),[r,h]=Object(i.useState)(),[_]=l.a.useForm(),{setFieldsValue:p,submit:u}=_,{loading:g}=bt((e=>{var t,n;const i=null===(t=e.facebook)||void 0===t?void 0:t.split("facebook.com/"),s=null===i||void 0===i?void 0:i[i.length-1],c=null===(n=e.instagram)||void 0===n?void 0:n.split("instagram.com/"),o=null===c||void 0===c?void 0:c[c.length-1];p({id:e.id,name:e.name,address:e.address,description:e.description,phone:e.phone,whatsapp_number:e.whatsapp_number,website:e.website,facebook:s,instagram:o}),a(e.image_url),h(e.image_blurhash)})),[m,{loading:O}]=Object(dt.a)(),{data:f,error:v}=Object(jt.a)(),w=null===f||void 0===f?void 0:f.current_company;return Object(y.jsxs)(It,{children:[Object(y.jsxs)(St,{children:[Object(y.jsx)(x.a,{loading:g}),Object(y.jsx)(vt,{image_url:c,image_blurhash:r,setImage:s,setPreview:a}),Object(y.jsxs)(l.a,{form:_,layout:"vertical",onFinish:async e=>{var i;const{facebook:s,instagram:c,...a}=e,l=s?`https://www.facebook.com/${s}`:s,r=c?`https://www.instagram.com/${c}`:c;a.phone&&a.phone.length<4&&delete a.phone,a.whatsapp_number&&a.whatsapp_number.length<4&&delete a.whatsapp_number;const b={...a,facebook:l,instagram:r,image:n},j=await m({variables:{data:b}}),{success:h,errors:_}=(null===(i=j.data)||void 0===i?void 0:i.saveSalonWebProfile)||{};null===_||void 0===_||_.map((e=>d.b.error(e))),h&&(t((e=>e+1)),d.b.success(Object(o.b)("phrases.saved_successfully_other",{prefix:Object(o.b)("words.data")})))},style:{width:"100%"},children:[Object(y.jsx)(Nt,{children:Object(y.jsxs)("div",{style:{width:"100%"},children:[Object(y.jsxs)(ct.a,{gutter:12,children:[Object(y.jsx)(l.a.Item,{name:"id",noStyle:!0,children:Object(y.jsx)(ye.a,{type:"hidden"})}),Object(y.jsx)($e.a,{span:12,children:Object(y.jsx)(l.a.Item,{label:Object(o.b)("phrases.company_name"),name:"name",children:Object(y.jsx)(ye.a,{placeholder:Object(o.b)("phrases.company_name"),autoComplete:"off"})})}),Object(y.jsxs)($e.a,{span:12,children:[Object(y.jsx)(l.a.Item,{style:{marginBottom:5},name:"address",label:Object(o.b)("words.address"),children:Object(y.jsx)(ye.a,{placeholder:Object(o.b)("words.address"),autoComplete:"off"})}),!v&&Object(y.jsx)(j.h,{$cursor:"pointer",$color:"primary",onClick:()=>{const e=`${null===w||void 0===w?void 0:w.address}, ${null===w||void 0===w?void 0:w.number}, ${null===w||void 0===w?void 0:w.district}, ${null===w||void 0===w?void 0:w.city_name} - ${null===w||void 0===w?void 0:w.state_name}`;p({address:e})},children:Object(o.b)("settings.online_booking.use_registered_address")})]}),Object(y.jsx)($e.a,{span:24,children:Object(y.jsx)(l.a.Item,{name:"description",label:Object(o.b)("words.description"),children:Object(y.jsx)(ye.a.TextArea,{maxLength:16777215,rows:2,style:{width:"100%"},placeholder:Object(o.b)("settings.online_booking.business_description"),autoComplete:"off"})})}),Object(y.jsx)($e.a,{span:12,children:Object(y.jsx)(l.a.Item,{label:Object(o.b)("words.whatsapp"),name:"whatsapp_number",validateTrigger:"onBlur",rules:[{validateTrigger:"onBlur",validator:$.i}],children:Object(y.jsx)(ht.a,{})})}),Object(y.jsx)($e.a,{span:12,children:Object(y.jsx)(l.a.Item,{label:Object(o.b)("words.phone"),name:"phone",validateTrigger:"onBlur",rules:[{validateTrigger:"onBlur",validator:$.i}],children:Object(y.jsx)(ht.a,{})})})]}),Object(y.jsxs)(ct.a,{gutter:12,children:[Object(y.jsx)($e.a,{span:12,children:Object(y.jsx)(l.a.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.instagram!==t.instagram,children:e=>{let{getFieldValue:t}=e;const n=t("instagram"),i=n?`https://www.instagram.com/${n}`:void 0;return Object(y.jsx)(l.a.Item,{label:"Instagram",name:"instagram",children:Object(y.jsx)(ye.a,{placeholder:"instagram",addonBefore:Object(y.jsxs)(Pt,{$has_link:!!n,href:i,target:"_blank",rel:"noopener noreferrer",children:[Object(y.jsx)(ot.a,{size:18})," instagram.com/"]})})})}})}),Object(y.jsx)($e.a,{span:12,children:Object(y.jsx)(l.a.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.facebook!==t.facebook,children:e=>{let{getFieldValue:t}=e;const n=t("facebook"),i=n?`https://www.facebook.com/${n}`:void 0;return Object(y.jsx)(l.a.Item,{label:"Facebook",name:"facebook",children:Object(y.jsx)(ye.a,{placeholder:"facebook",addonBefore:Object(y.jsxs)(Pt,{$has_link:!!n,href:i,target:"_blank",rel:"noopener noreferrer",children:[Object(y.jsx)(at.a,{size:18})," facebook.com/"]})})})}})}),Object(y.jsx)($e.a,{span:12,children:Object(y.jsx)(l.a.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.website!==t.website,children:e=>{var t;let{getFieldValue:n}=e;const i=null===(t=n("website"))||void 0===t?void 0:t.replace("https://",""),s=i?`https://${i}`:void 0;return Object(y.jsx)(l.a.Item,{label:Object(o.b)("words.site"),name:"website",children:Object(y.jsx)(ye.a,{placeholder:"https://www.seusite.com.br",addonBefore:Object(y.jsx)(Pt,{$has_link:!!i,href:s,target:"_blank",rel:"noopener noreferrer",children:Object(y.jsx)(lt.a,{})})})})}})})]})]})}),Object(y.jsx)(ct.a,{justify:"end",children:Object(y.jsx)(b.a,{type:"primary",loading:g||O,onClick:u,children:Object(o.b)("verbs.save")})})]})]}),Object(y.jsx)(gt,{},e)]})};Ct.displayName="Company";var $t=Ct;const St=M.d.div.withConfig({componentId:"wb__sc-1jb77hx-0"})(["position:relative;width:100%;flex-direction:column;margin-top:10px;"]),It=M.d.div.withConfig({componentId:"wb__sc-1jb77hx-1"})(["width:100%;display:flex;flex-direction:row;justify-content:space-between;"]),Nt=M.d.div.withConfig({componentId:"wb__sc-1jb77hx-2"})(["display:flex;flex-direction:row;"]),Pt=M.d.a.withConfig({componentId:"wb__sc-1jb77hx-3"})(["font-size:16rem;color:unset;&:focus,&:hover{color:unset;}",""],(e=>!e.$has_link&&"cursor: default;"));var Ft=n(1434),Et=n(597);const qt=()=>Object(y.jsx)(Et.b,{$showBottomBorder:!0,title:Object(o.b)("words.online_booking"),tabs:[{path:"/online-booking",label:Object(o.b)("settings.company_details")},{path:"/online-booking/settings",label:Object(o.b)("words.setting_other"),is_new:!Object(Fe.b)({date:"2024/10/01"})},{path:"/online-booking/links",label:Object(o.b)("words.link_other")},{path:"/online-booking/photo-gallery",label:Object(o.b)("settings.online_booking.photo_gallery")},{path:"/online-booking/services",label:Object(o.b)("words.service_other")},{path:"/online-booking/office-hour",label:Object(o.b)("settings.online_booking.business_hours")},{path:"/online-booking/payments",label:Object(o.b)("settings.payments.title")}]});qt.displayName="Header";var zt=qt;const Bt=e=>{let{handleBelasisPayClick:t}=e;const n=Object(m.a)((e=>e.current_user.permissions));return Object(y.jsxs)(c.b,{children:[Object(y.jsx)(zt,{}),Object(y.jsx)(c.c,{$pageFull:!0,has_permission:n.is_admin,children:Object(y.jsx)(Ht,{children:Object(y.jsxs)(s.d,{children:[Object(y.jsx)(s.b,{path:"/",element:Object(y.jsx)($t,{})}),Object(y.jsx)(s.b,{path:"/settings",element:Object(y.jsx)(qe,{})}),Object(y.jsx)(s.b,{path:"/links",element:Object(y.jsx)(Ft.a,{})}),Object(y.jsx)(s.b,{path:"/photo-gallery",element:Object(y.jsx)(ie,{})}),Object(y.jsx)(s.b,{path:"/services",element:Object(y.jsx)(it,{})}),Object(y.jsx)(s.b,{path:"/office-hour",element:Object(y.jsx)(xe,{})}),Object(y.jsx)(s.b,{path:"/payments",element:Object(y.jsx)(C,{handleBelasisPayClick:t})})]})})})]})};Bt.displayName="OnlineBookingDesktop";t.default=Bt;const Ht=M.d.div.withConfig({componentId:"wb__sc-e09cu9-0"})(["width:100%;background:#FFFFFF;padding:10px;margin-bottom:30px;"])},992:function(e,t,n){"use strict";var i=n(37),s=n(1850),c=n(50),o=n(116),a=n(76);const l=i.e`
  mutation saveSalonWebProfile($data: SaveSalonWebProfileInput!) {
    saveSalonWebProfile(input: $data) {
      success errors
    }
  }
`;t.a=()=>Object(s.a)(l,{onError:e=>{o.b.error(Object(c.b)("phrases.generic_save_error_message")),console.log("saveMessageModel",e),a.a.captureException(e)},onCompleted:e=>{let{saveSalonWebProfile:{success:t,errors:n}}=e;t||o.b.error(Object(c.b)("phrases.generic_save_error_message")+(null===n||void 0===n?void 0:n.join(", "))||"")}})}}]);
//# sourceMappingURL=61.12f0733c.chunk.js.map