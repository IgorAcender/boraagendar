(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[51,179],{1037:function(e,t,a){"use strict";var c=a(37),n=a(2879),s=a(76);const o=c.e`
  query OpenedCashAccountingQuery {
    close_cash_accounting {
      pay_movements {
        id historical status value_cents bill_type due
        payment { id name processing_days }
        account { id name cash }
        chart { id name }

        account_used_to_pay: account { id name cash }
        payment_used_to_pay: payment { id name processing_days }
      }
      rec_movements {
        id historical status value_cents bill_type due
        payment { id name processing_days }
        account { id name cash }
        chart { id name }
        account_used_to_pay { id name cash }
        payment_used_to_pay { id name processing_days }
      }
      accounted_rec_movements {
        id historical status value_cents bill_type due type difference_cents
        payment { id name processing_days }
        account { id name cash }
        chart { id name }
        account_used_to_pay { id name cash }
        payment_used_to_pay { id name processing_days }
      }
      accounted_pay_movements {
        id historical status value_cents bill_type due type difference_cents
        payment { id name processing_days }
        account { id name cash }
        chart { id name }

        account_used_to_pay: account { id name cash }
        payment_used_to_pay: payment { id name processing_days }
      }

      last_cash_accounting {
        id balance_start_cents date_open date_close closed
      }
    }
  }
`;t.a=e=>Object(n.a)(o,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,onCompleted:t=>e(t),onError:e=>{s.a.captureException(e),console.error(e)}})},1083:function(e,t,a){"use strict";var c=a(0),n=a(50),s=a(2937),o=a(250),l=a(20),i=a(579),r=a(726),d=a(1094),u=a(2883),b=a(2934),_=a(1810),j=a(1438),h=a(852),m=a(27),p=a(732),O=a(662),f=a(2854),v=a(2824),g=a(2838),y=a(543),x=a(646),w=a(19),k=a(22);const C=e=>{const{field:t,container:a,last_item:c,add:o,destroy:l}=e,r=Object(m.a)((e=>e.is_mobile)),d=Object(m.a)((e=>e.finance_accounts.find((e=>"Caixa"===e.name)))),b=()=>{c&&o()};return Object(k.jsxs)(S,{gutter:{xs:0,md:8},children:[Object(k.jsx)(s.a.Item,{noStyle:!0,name:[t.name,"_destroy"],fieldKey:[t.key,"_destroy"],children:Object(k.jsx)(v.a,{type:"hidden"})}),Object(k.jsx)(u.a,{xs:24,md:14,children:Object(k.jsx)(s.a.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.transfers!==t.transfers,children:e=>{let{getFieldValue:o}=e;const l=o("transfers").reduce(((e,t)=>{const a=null===t||void 0===t?void 0:t.account_id;return a?[...e,a]:e}),[]),i=null!==d&&void 0!==d&&d.id?[...l,d.id]:l;return Object(k.jsx)(s.a.Item,{name:[t.name,"account_id"],rules:[{required:!c,message:Object(n.b)("finance.cash_account.inform_an_account")}],children:Object(k.jsx)(x.a,{onChange:b,disabledOptions:i,getPopupContainer:()=>a||document.body,size:r?"large":"middle",style:{width:"100%"}})})}})}),Object(k.jsx)(u.a,{xs:24,md:10,children:Object(k.jsx)(s.a.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.transfers!==t.transfers,children:e=>{let{getFieldValue:a}=e;const o=a(["transfers",t.name,"account_id"]);return Object(k.jsx)(s.a.Item,{initialValue:0,name:[t.name,"value_cents"],rules:[{required:!c,message:Object(n.b)("phrases.enter_value")}],children:Object(k.jsx)(g.a,{min:0,size:r?"large":"middle",parser:i.e,style:{width:"100%"},formatter:e=>Object(i.d)(e),disabled:!o})})}})}),!c&&!r&&Object(k.jsx)(I,{className:"color-red",onClick:()=>l(t.name)})]})};C.displayName="TransferItem";var $=C;const S=Object(w.d)(y.a).withConfig({componentId:"wb__sc-weocs4-0"})(["width:100%;position:relative;padding-right:20px;.ant-form-item{margin-bottom:8px;.ant-form-item-explain{display:none;}}@media (max-width:768px){padding:0;background-color:",";user-select:none;.swipeable-list-item__content{border-radius:5px;}}"],(e=>e.theme.colors.white)),I=Object(w.d)(f.a).withConfig({componentId:"wb__sc-weocs4-1"})(["position:absolute;right:0;top:8px;font-size:18rem;"]);var z=a(53),A=a.n(z);const M=e=>{var t;let{setFieldsValue:a,getFieldValue:l,movements:f,cash_accounting:v}=e;const g=Object(m.a)((e=>e.is_mobile)),[y,x]=Object(c.useState)("keep"),w=(null===v||void 0===v||null===(t=v.last_cash_accounting)||void 0===t?void 0:t.balance_start_cents)||0,C=f.filter(r.b),S=Object(r.e)(C).reduce(((e,t)=>e+t.total),0),I=S+w;return Object(k.jsxs)(o.g,{$column:!0,gutter:16,children:[Object(k.jsx)(u.a,{span:24,children:Object(k.jsx)(p.a,{style:{padding:"0 8px"},size:16,left:Object(n.b)("finance.cash_account.initial_balance"),value:w,black:!0})}),Object(k.jsx)(u.a,{span:24,children:Object(k.jsx)(p.a,{style:{padding:"0 8px"},size:16,left:Object(n.b)("words.movement",{count:2}),value:S,black:!0})}),Object(k.jsx)(u.a,{span:24,children:Object(k.jsx)(p.a,{style:{padding:"0 8px"},size:16,left:Object(n.b)("finance.cash_account.cash_balance"),value:I,black:!0})}),Object(k.jsx)(u.a,{span:24,children:Object(k.jsx)(s.a.Item,{name:"date_close",label:Object(n.b)("finance.cash_account.closing_date"),rules:[{required:!0,message:Object(n.b)("phrases.required_field")}],initialValue:A()(),children:Object(k.jsx)(b.a,{allowClear:!1,size:g?"large":"middle",format:"L",style:{width:"100%"}})})}),Object(k.jsx)(u.a,{span:24,children:Object(k.jsxs)(_.a.Group,{onChange:e=>x(e.target.value),value:y,children:[Object(k.jsx)(_.a,{value:"keep",children:Object(n.b)("finance.cash_account.keep_balance")}),Object(k.jsx)(_.a,{value:"transfer",children:Object(n.b)("finance.cash_account.transfer_amount_to_another_account")})]})}),Object(k.jsx)(u.a,{span:24,children:"transfer"===y&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(j.a,{}),Object(k.jsx)(o.g,{$justifyCenter:!0,$alignCenter:!0,children:Object(k.jsx)(o.h,{$size:16,$semibold:!0,children:Object(n.b)("words.transfer")})}),Object(k.jsx)(O.a,{name:"transfers",style:{margin:"0 0 0 0"},Item:$,setFieldsValue:a,getFieldValue:l}),Object(k.jsx)(j.a,{}),Object(k.jsx)(s.a.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.transfers!==t.transfers,children:e=>{let{getFieldValue:t}=e;const a=t("transfers").reduce(((e,t)=>e+t.value_cents),0),c=I-a;return Object(k.jsxs)(o.g,{justify:"center",gutter:16,style:g?{flexDirection:"column"}:void 0,children:[Object(k.jsx)(u.a,{xs:24,md:12,style:g?{textAlign:"center"}:{textAlign:"right"},children:Object(n.b)("finance.cash_account.total_to_be_transferred",{value:Object(i.d)(a)})}),Object(k.jsxs)(u.a,{xs:24,md:12,style:g?{textAlign:"center"}:void 0,children:[Object(n.b)("finance.cash_account.remaining_transfer",{value:Object(i.d)(c)}),c<0&&Object(k.jsx)(h.a,{title:Object(n.b)("finance.cash_account.cannot_go_negative"),children:Object(k.jsx)(d.a,{style:{color:"red",paddingLeft:5}})})]})]})}})]})})]})};M.displayName="CloseCashAccountingForm";var V=M,H=a(116),F=a(37),R=a(1850),N=a(76);const E=F.e`
  mutation CloseCashAccounting($data: CloseCashAccountingInput!) {
    closeCashAccounting(input: $data) {
      success errors
    }
  }
`;var q=()=>{const[e,{loading:t}]=Object(R.a)(E);return[async t=>{try{const{data:a}=await e({variables:{data:t}}),{success:c,errors:n}=(null===a||void 0===a?void 0:a.closeCashAccounting)||{};return null===n||void 0===n||n.forEach((e=>H.b.error(e))),{success:c}}catch(a){return N.a.captureException(a),H.b.error(Object(n.b)("finance.cash_account.close_error_message")),console.error(a),{success:!1}}},{loading:t}]},L=a(581),D=a(608);const P=(e,t)=>{let{afterSave:a,cash_accounting:d,movements:u,accounted_movements:b}=e;const _=Object(m.a)((e=>e.current_user.permissions)),j=Object(m.a)((e=>e.is_mobile)),h=Object(l.o)(),[p,O]=Object(c.useState)(!1),[f]=s.a.useForm(),{resetFields:v,submit:g,setFieldsValue:y,getFieldValue:x}=f,[w,{loading:C}]=q(),$=Object(c.useCallback)((()=>{O(!0),y({transfers:[{}]})}),[y]),S=Object(c.useCallback)((()=>{O(!1)}),[]);Object(c.useImperativeHandle)(t,(()=>({open:$,close:S})));const I=Object(c.useCallback)((async e=>{var t;if(!_.can_access_cash_accounting)return void H.b.warning(Object(n.b)("phrases.no_permission_to_do_this"));if(!d)return;const c=Object(r.c)(e,u,d,b),s=(null===(t=e.transfers)||void 0===t?void 0:t.reduce(((e,t)=>e+(t?t.value_cents:0)),0))||0,o=c.balance_cents-s;if(o<0)return void H.b.error(Object(n.b)("finance.cash_account.cannot_go_negative"));const{success:l}=await w(c);l&&D.a.success({className:"webook-modal hide-buttons",title:Object(n.b)("finance.cash_account.closed_successfully"),content:Object(n.b)("finance.cash_account.remaining_value",{value:Object(i.d)(o)}),onCancel:()=>{S(),null===a||void 0===a||a(),h("/finance/cash-accounting/closed")}})}),[b,a,d,S,w,u,h,_.can_access_cash_accounting]),z=Object(c.useCallback)((e=>{e||v()}),[v]);return Object(k.jsx)(o.a,{open:p,title:Object(n.b)("finance.cash_account.closing"),placement:j?"bottom":"right",height:"100%",onClose:S,width:680,closable:!0,destroyOnClose:!0,afterOpenChange:z,footer:Object(k.jsx)(L.a,{loading:C,submit:g,save_text:Object(n.b)("phrases.close_cash_account"),close:S}),push:!1,children:Object(k.jsx)(s.a,{form:f,layout:"vertical",onFinish:I,children:Object(k.jsx)(V,{setFieldsValue:y,getFieldValue:x,cash_accounting:d,movements:u})})})};P.displayName="CloseCashAccountingDrawer";t.a=Object(c.forwardRef)(P)},1094:function(e,t,a){"use strict";var c=a(13),n=a(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},o=a(71),l=function(e,t){return n.createElement(o.a,Object(c.a)({},e,{ref:t,icon:s}))},i=n.forwardRef(l);t.a=i},1097:function(e,t,a){"use strict";var c=a(13),n=a(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"},o=a(71),l=function(e,t){return n.createElement(o.a,Object(c.a)({},e,{ref:t,icon:s}))},i=n.forwardRef(l);t.a=i},1100:function(e,t,a){"use strict";var c=a(13),n=a(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},o=a(71),l=function(e,t){return n.createElement(o.a,Object(c.a)({},e,{ref:t,icon:s}))},i=n.forwardRef(l);t.a=i},1219:function(e,t,a){"use strict";var c=a(13),n=a(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M882 272.1V144c0-17.7-14.3-32-32-32H174c-17.7 0-32 14.3-32 32v128.1c-16.7 1-30 14.9-30 31.9v131.7a177 177 0 0014.4 70.4c4.3 10.2 9.6 19.8 15.6 28.9v345c0 17.6 14.3 32 32 32h676c17.7 0 32-14.3 32-32V535a175 175 0 0015.6-28.9c9.5-22.3 14.4-46 14.4-70.4V304c0-17-13.3-30.9-30-31.9zM214 184h596v88H214v-88zm362 656.1H448V736h128v104.1zm234 0H640V704c0-17.7-14.3-32-32-32H416c-17.7 0-32 14.3-32 32v136.1H214V597.9c2.9 1.4 5.9 2.8 9 4 22.3 9.4 46 14.1 70.4 14.1s48-4.7 70.4-14.1c13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0038.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0038.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 3-1.3 6-2.6 9-4v242.2zm30-404.4c0 59.8-49 108.3-109.3 108.3-40.8 0-76.4-22.1-95.2-54.9-2.9-5-8.1-8.1-13.9-8.1h-.6c-5.7 0-11 3.1-13.9 8.1A109.24 109.24 0 01512 544c-40.7 0-76.2-22-95-54.7-3-5.1-8.4-8.3-14.3-8.3s-11.4 3.2-14.3 8.3a109.63 109.63 0 01-95.1 54.7C233 544 184 495.5 184 435.7v-91.2c0-.3.2-.5.5-.5h655c.3 0 .5.2.5.5v91.2z"}}]},name:"shop",theme:"outlined"},o=a(71),l=function(e,t){return n.createElement(o.a,Object(c.a)({},e,{ref:t,icon:s}))},i=n.forwardRef(l);t.a=i},1348:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var c=a(37),n=a(405),s=a(76);const o=c.e`
  query FinanceCashAccountings(
    $page: Int, $results: Int, $user_id: ID, $close_user_id: ID, $start_date_open: String, $start_date_close: String,
    $end_date_open: String, $end_date_close: String, $code: String,

  ) {
    finance_cash_accountings(
      closed_only: true,
      page: $page,
      results: $results,
      user_id: $user_id,
      close_user_id: $close_user_id
      start_date_open: $start_date_open
      start_date_close: $start_date_close
      end_date_open: $end_date_open
      end_date_close: $end_date_close
      code: $code
    ) {
      total_count
      all {
        id code date_open date_close balance_start_cents balance_checked_cents
        user { id name }
        close_user { id name }
      }
    }
  }
`,l=c.e`
  query LastCashAccounting {
    last_cash_accounting {
      id closed
    }
  }
`;t.b=()=>Object(n.f)(l,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,onError:e=>{s.a.captureException(e),console.error(e)}})},2939:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(20),s=a(1348),o=a(50),l=a(250),i=a(159),r=a(1809),d=a(282),u=a(2883),b=a(2831),_=a(726),j=a(585),h=a(2843),m=a(1100),p=a(18),O=a(19),f=a(645),v=a(1204),g=a(1205),y=a(1037),x=a(1083),w=a(1097),k=a(3038),C=a(638);var $=e=>{let{handleCloseCashAccounting:t,handleOpenCashAccounting:a,closed:s,new_button_menu:l}=e;const i=Object(n.o)(),r=Object(c.useMemo)((()=>{const e=[{label:Object(o.b)("words.history"),icon:w.a,onClick:()=>i("/finance/cash-accounting/closed")}];return s?e.push({label:Object(o.b)("phrases.open_cash_account"),icon:k.a,onClick:a}):e.push({label:Object(o.b)("words.new"),icon:h.a,disabled:s,overlay_items:l},{label:Object(o.b)("phrases.close_cash_account"),icon:k.a,onClick:t}),e}),[s,t,a,i,l]);Object(C.a)(r)},S=a(2977),I=a(27),z=a(732),A=a(2921),M=a(579),V=a(53),H=a.n(V),F=a(22);const R=e=>{let{grouped_movements:t}=e;const a=Object(I.a)((e=>e.is_mobile)),c=[{dataIndex:"name",align:"justify",width:"70%",render:(e,t)=>{const c=t.movement?H()(t.movement.due):null;return Object(F.jsxs)("span",{children:[Object(F.jsxs)("span",{children:[c&&Object(F.jsxs)("small",{children:["(",c.format("L"),") - "]}),e]})," ",Object(F.jsx)("br",{}),a?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("small",{children:t.total_in?`${Object(o.b)("words.entries")}: ${Object(M.d)(t.total_in)}`:""})," ",Object(F.jsx)("br",{}),Object(F.jsx)("small",{children:t.total_out?`${Object(o.b)("words.cash_outflow")}: ${Object(M.d)(t.total_out)}`:""})]}):Object(F.jsxs)("small",{children:[t.total_in?`${Object(o.b)("words.entries")}: ${Object(M.d)(t.total_in)}`:"",t.total_in&&t.total_out?" | ":"",t.total_out?`${Object(o.b)("words.cash_outflow")}: ${Object(M.d)(t.total_out)}`:""]})]})}},{dataIndex:"total",align:"right",width:"30%",render:(e,t)=>{const a=0!==e&&t.show_color?e>0?"#36AB18":"#ff6b68":"";return Object(F.jsx)("span",{style:{color:a},children:Object(M.d)(e)})}}];return Object(F.jsx)(E,{dataSource:t,columns:c,rowKey:e=>e.key||e.id,pagination:!1,showHeader:!1,indentSize:a?0:15,className:"detailed-view"})};R.displayName="DetailedView";var N=R;const E=Object(O.d)(A.a).withConfig({componentId:"wb__sc-9tqyil-0"})(["margin-bottom:16px;.ant-table-tbody > tr > td{padding:8px;}"]);var q=e=>{let{grouped_movements:t,last_cash_accounting:a}=e;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(z.a,{left:Object(o.b)("finance.cash_account.initial_balance"),value:null===a||void 0===a?void 0:a.balance_start_cents,black:!0}),t.map((e=>Object(F.jsx)("div",{children:Object(F.jsx)(z.a,{left:e.name,value:e.total,black:!0})},e.key)))]})};const L=e=>{let{last_cash_accounting:t,movements:a,view:c,loading:n}=e;const s=Object(I.a)((e=>e.current_user.permissions)),l=(null===t||void 0===t?void 0:t.balance_start_cents)||0,i=a.filter(_.b),r=Object(_.e)(i,{account_id:"",show_total_in_out:!0,prefix:0},s.can_access_bill_pay),d=r.reduce(((e,t)=>e+t.total),0),u=d+l;return Object(F.jsxs)(P,{loading:n,title:Object(o.b)("finance.cash_account.cash_reconciliation"),children:["resume"===c?Object(F.jsx)(q,{grouped_movements:r,last_cash_accounting:t}):Object(F.jsx)(N,{grouped_movements:r}),Object(F.jsx)(z.a,{left:Object(o.b)("finance.cash_account.initial_balance"),value:l,black:!0}),Object(F.jsx)(z.a,{left:Object(o.b)("words.movement",{count:2}),value:d,black:!0}),Object(F.jsx)(z.a,{left:Object(o.b)("finance.cash_account.cash_balance"),value:u})]})};L.displayName="CashConferenceCard";var D=L;const P=Object(O.d)(S.a).withConfig({componentId:"wb__sc-1xuhch8-0"})([".ant-card-body{padding:16px;}"]);var T=e=>{let{grouped_movements:t}=e;return Object(F.jsx)(F.Fragment,{children:0===t.length?Object(F.jsx)(z.a,{left:Object(o.b)("finance.cash_account.no_other_payments"),value:0,black:!0}):t.map((e=>Object(F.jsx)("div",{children:Object(F.jsx)(z.a,{left:e.name,value:e.total,black:!0})},e.key)))})};const B=e=>{let{view:t,movements:a,loading:c}=e;const n=Object(I.a)((e=>e.current_user.permissions)),s=a.filter((e=>!e.is_accounted&&(!e.account_used_to_pay.cash||"3"!==e.status))),l=Object(_.d)(s,n.can_access_bill_pay),i=Object(_.e)(s,{account_id:"",show_total_in_out:!0,prefix:0},n.can_access_bill_pay),r=s.filter((e=>"3"===e.status)).reduce(((e,t)=>e+t.value_cents),0),d=s.filter((e=>"3"!==e.status)).reduce(((e,t)=>e+t.value_cents),0);return Object(F.jsxs)(Y,{loading:c,title:Object(o.b)("finance.cash_account.other_payments"),children:["resume"===t?Object(F.jsx)(T,{grouped_movements:i}):Object(F.jsx)(N,{grouped_movements:l}),Object(F.jsx)(z.a,{left:r>=0?Object(o.b)("finance.cash_account.total_received"):Object(o.b)("finance.cash_account.total_paid"),value:r}),Object(F.jsx)(z.a,{left:d>=0?Object(o.b)("finance.cash_account.total_to_receive"):Object(o.b)("finance.cash_account.total_to_pay"),value:d})]})};B.displayName="OtherPaymentsCard";var K=B;const Y=Object(O.d)(S.a).withConfig({componentId:"wb__sc-1lvkj5d-0"})([".ant-card-body{padding:16px;}"]);var U=a(593),J=a(597),G=a(116);const Q=()=>{var e;const[t,a]=Object(c.useState)("resume"),[s,b]=Object(c.useState)(),[O,w]=Object(c.useState)([]),[k,C]=Object(c.useState)([]),[S,z]=Object(c.useState)(!1),A=Object(I.a)((e=>e.current_user.permissions)),M=Object(n.o)();Object(U.a)({feature_keys:["has_cash_accounting"]});const V=Object(c.useRef)(null),R=Object(c.useRef)(null),N=Object(c.useRef)(null),E=Object(c.useRef)(null),q=Object(c.useCallback)((e=>{const t=null===e||void 0===e?void 0:e.close_cash_accounting,{is_cash_accounting_closed:a,accounted_movements:c,movements:n}=Object(_.f)(t);a&&M("/finance/cash-accounting/closed"),b(t),w(n),C(c),z(a)}),[M]),[L,{loading:P,refetch:T}]=Object(y.a)(q);Object(c.useEffect)((()=>{L()}),[L]);const B=()=>{G.b.warning(Object(o.b)("phrases.no_permission_to_do_this"))},Y=Object(c.useCallback)((()=>{var e;A.can_create_bill_rec?null===(e=V.current)||void 0===e||e.open():B()}),[A.can_create_bill_rec]),Q=Object(c.useCallback)((()=>{var e;A.can_create_bill_pay?null===(e=R.current)||void 0===e||e.open():B()}),[A.can_create_bill_pay]),W=Object(c.useMemo)((()=>[{key:"rec",style:{color:"#51c431"},icon:Object(F.jsx)(h.a,{}),onClick:()=>Y(),label:Object(o.b)("finance.cash_account.supplies"),"data-js":"sidebar-mobile-item"},{key:"pay",style:{color:"#c73d3d"},icon:Object(F.jsx)(m.a,{}),onClick:()=>Q(),label:Object(o.b)("finance.cash_account.cash_withdrawal"),"data-js":"sidebar-mobile-item"}]),[Q,Y]),ee=Object(c.useCallback)((()=>{var e;null===(e=E.current)||void 0===e||e.open()}),[]),te=Object(c.useCallback)((()=>{var e;A.can_access_cash_accounting?null===(e=N.current)||void 0===e||e.open():B()}),[A.can_access_cash_accounting]);$({handleCloseCashAccounting:te,handleOpenCashAccounting:ee,closed:S,new_button_menu:W});const ae=Object(c.useMemo)((()=>[{key:"resume",label:Object(o.b)("finance.cash_account.summary"),disabled:P},{key:"detailed",label:Object(o.b)("finance.cash_account.detailed"),disabled:P}]),[P]);return Object(F.jsxs)(j.b,{children:[Object(F.jsxs)(J.b,{title:Object(o.b)("finance.cash_account.open"),children:[Object(F.jsx)(i.a,{disabled:P,onClick:()=>M("/finance/cash-accounting/closed"),children:Object(o.b)("words.history")}),Object(F.jsx)(r.a,{disabled:P,menu:{items:W},trigger:["click"],placement:"bottomRight",children:Object(F.jsx)(i.a,{icon:Object(F.jsx)(h.a,{}),children:Object(o.b)("words.new")})}),Object(F.jsx)(i.a,{type:"primary",disabled:P,onClick:te,children:Object(o.b)("phrases.close_cash_account")})]}),Object(F.jsx)(l.g,{style:{display:"block"},children:Object(F.jsx)(Z,{onTabClick:a,tabPosition:"top",activeKey:t,items:ae})}),Object(F.jsx)(j.c,{has_permission:A.can_access_cash_accounting,$pageFull:!0,style:{height:"fit-content",marginBottom:80},children:Object(F.jsxs)(X,{$column:!0,children:[Object(F.jsx)(d.a,{loading:P,active:!0,title:!1,paragraph:{rows:1,width:280},children:Object(F.jsx)(l.h,{$bottom:10,$size:18,$semibold:!0,children:Object(o.b)("finance.cash_account.opened_at",{date:H()(null===s||void 0===s||null===(e=s.last_cash_accounting)||void 0===e?void 0:e.date_open,p.H).format("L, HH:mm[h]"),interpolation:{escapeValue:!1}})})}),Object(F.jsxs)(l.g,{gutter:[8,8],$wrap:!0,children:[Object(F.jsx)(u.a,{xs:24,md:12,children:Object(F.jsx)(D,{view:t,last_cash_accounting:null===s||void 0===s?void 0:s.last_cash_accounting,movements:O,loading:P})}),Object(F.jsx)(u.a,{xs:24,md:12,children:Object(F.jsx)(K,{view:t,movements:O,loading:P})})]})]})}),Object(F.jsx)(v.a,{ref:V,afterSave:T}),Object(F.jsx)(g.a,{ref:R,afterSave:T}),Object(F.jsx)(x.a,{ref:N,afterSave:T,cash_accounting:s,movements:O,accounted_movements:k}),Object(F.jsx)(f.a,{ref:E,afterSave:T})]})};Q.displayName="OpenedCashAccounting";var W=Q;const X=Object(O.d)(l.g).withConfig({componentId:"wb__sc-1qil6x9-0"})(["width:100%;margin:0 auto;padding:15px 0;",""],(e=>e.theme.is_mobile&&Object(O.c)(["padding:15px;"]))),Z=Object(O.d)(b.a).withConfig({componentId:"wb__sc-1qil6x9-1"})([".ant-tabs-tab{font-size:16rem;}.ant-tabs-nav{margin-bottom:0 !important;","}.ant-tabs-content-holder{background-color:#FFFFFF;}"],(e=>e.theme.is_mobile&&Object(O.c)(["padding:15px;"])));var ee=a(627),te=a(2854),ae=a(615),ce=a(612),ne=a(598),se=a(37),oe=a(1850),le=a(76);const ie=se.e`
  mutation DestroyCashAccounting($data: DestroyCashAccountingInput!) {
    destroyCashAccounting(input: $data) {
      success errors
    }
  }
`;var re=()=>{const[e,{loading:t}]=Object(oe.a)(ie);return{destroyCashAccounting:Object(c.useCallback)((async(t,a)=>{try{var c;const n=await e({variables:{data:{id:t}}}),{success:s,errors:l}=(null===(c=n.data)||void 0===c?void 0:c.destroyCashAccounting)||{};return s?(a(),G.b.success(Object(o.b)("phrases.deleted_successfully",{prefix:Object(o.b)("finance.cash_account.history")})),{success:!0}):(null===l||void 0===l||l.forEach((e=>G.b.error(e))),{success:!1})}catch(n){return le.a.captureException(n),console.error(n),G.b.error(Object(o.b)("phrases.generic_delete_error_message")),{success:!1}}}),[e]),loading:t}},de=a(583);const ue=e=>{const t=Object(ne.b)((e=>e.refetch)),a=Object(ne.b)((e=>e.permissions)),{item:n}=e,{destroyCashAccounting:s}=re(),i=Object(c.useCallback)((()=>{t()}),[t]),r=Object(c.useCallback)((e=>{e&&(null!==a&&void 0!==a&&a.can_access?G.c.confirm({centered:!0,className:"webook-modal",title:Object(o.b)("words.attention"),content:Object(o.b)("phrases.confirm_delete",{model:Object(o.b)("finance.cash_account.history").toLocaleLowerCase()}),okText:Object(o.b)("phrases.yes_delete"),okType:"danger",cancelText:Object(o.b)("verbs.cancel"),onOk:()=>s(e.id,i)}):G.b.warning(Object(o.b)("phrases.no_permission_to_do_this")))}),[i,s,null===a||void 0===a?void 0:a.can_access]),d=Object(c.useMemo)((()=>({content:Object(F.jsx)(ce.a,{icon:te.a,label:Object(o.b)("verbs.delete"),direction:"left",color:"red"}),action:()=>n&&r(n)})),[n,r]);return Object(F.jsx)(ae.SwipeableListItem,{swipeLeft:d,children:Object(F.jsxs)(_e,{children:[Object(F.jsxs)(l.g,{justify:"space-between",children:[Object(F.jsx)(de.b,{width:10,$block:!0,children:H()(null===n||void 0===n?void 0:n.date_open,p.H).format("LL")}),Object(F.jsx)(de.b,{width:15,$block:!0,children:H()(null===n||void 0===n?void 0:n.date_close,p.H).format("LL")})]}),Object(F.jsxs)(l.g,{justify:"space-between",$top:10,children:[Object(F.jsx)(de.b,{width:10,$block:!0,children:Object(M.d)(null===n||void 0===n?void 0:n.balance_start_cents)}),Object(F.jsx)(de.b,{width:7,$block:!0,children:Object(M.d)(null===n||void 0===n?void 0:n.balance_checked_cents)})]}),Object(F.jsxs)(l.g,{justify:"space-between",$top:10,children:[Object(F.jsx)(de.b,{width:10,$block:!0,children:null===n||void 0===n?void 0:n.user.name}),Object(F.jsx)(de.b,{width:10,$block:!0,children:null===n||void 0===n?void 0:n.close_user.name})]})]})})};ue.displayName="CashAccountingItemMobile";var be=Object(c.memo)(ue);const _e=O.d.div.withConfig({componentId:"wb__sc-1cgb90w-0"})(["width:100%;"]);var je=a(2937),he=a(2824),me=a(614);var pe=()=>Object(c.useMemo)((()=>[{label:Object(o.b)("words.number"),name:"code",render:e=>Object(F.jsx)(je.a.Item,{name:"code",noStyle:!0,children:Object(F.jsx)(he.a,{placeholder:Object(o.b)("input.enter_the_number"),maxLength:9,onChange:t=>e.setFieldsValue({code:t.target.value})})})},{label:Object(o.b)("finance.cash_account.opening_date"),name:"date_open",rangepicker:{start_date_name:"start_date_open",end_date_name:"end_date_open"}},{label:Object(o.b)("finance.cash_account.closing_date"),name:"date_close",rangepicker:{start_date_name:"start_date_close",end_date_name:"end_date_close"}},{label:Object(o.b)("finance.cash_account.responsible_opening"),name:"user_id",render:e=>Object(F.jsx)(je.a.Item,{name:"user_id",noStyle:!0,children:Object(F.jsx)(me.a,{onChange:t=>e.setFieldsValue({user_id:t}),style:{width:"100%"},allowClear:!0,getPopupContainer:()=>document.body})})},{label:Object(o.b)("finance.cash_account.responsible_closing"),name:"close_user_id",render:e=>Object(F.jsx)(je.a.Item,{name:"close_user_id",noStyle:!0,children:Object(F.jsx)(me.a,{onChange:t=>e.setFieldsValue({close_user_id:t}),style:{width:"100%"},allowClear:!0,getPopupContainer:()=>document.body})})}]),[]),Oe=a(852),fe=a(1438),ve=a(616),ge=a(787),ye=a(600);var xe=e=>{let{handleDestroyCashAccountings:t}=e;const a=Object(I.a)((e=>e.current_user.permissions)),n=Object(c.useCallback)((e=>{a.can_access_cash_accounting?G.c.confirm({centered:!0,className:"webook-modal",title:Object(o.b)("words.attention"),maskClosable:!0,content:Object(o.b)("phrases.confirm_delete",{model:Object(o.b)("finance.cash_account.history").toLocaleLowerCase()}),okText:Object(o.b)("phrases.yes_delete"),okType:"danger",cancelText:Object(o.b)("verbs.cancel"),onOk:()=>t(e)}):G.b.warning(Object(o.b)("phrases.no_permission_to_do_this"))}),[t,a.can_access_cash_accounting]),s=Object(c.useCallback)((e=>{if(!a.can_access_reports_financial)return void G.b.warning(Object(o.b)("phrases.no_permission_to_do_this"));const t=`/report-views/financial/cash-accounting?id=${e}`;Object(ye.a)(t)}),[a.can_access_reports_financial]);return Object(c.useMemo)((()=>[{title:Object(o.b)("words.number"),dataIndex:"code",key:"code",width:100,default_visible:!0,ellipsis:!0,render:e=>`#${e}`},{title:Object(o.b)("finance.cash_account.user_opened"),dataIndex:"user",key:"user",default_visible:!0,ellipsis:!0,render:e=>e.name},{title:Object(o.b)("finance.cash_account.user_closed"),dataIndex:"close_user",key:"close_user",default_visible:!0,ellipsis:!0,render:e=>e.name},{title:Object(o.b)("finance.cash_account.opening_date"),dataIndex:"date_open",key:"date_open",default_visible:!0,ellipsis:!0,render:e=>H()(e,p.H).format("L")},{title:Object(o.b)("finance.cash_account.closing_date"),dataIndex:"date_close",key:"date_close",default_visible:!0,ellipsis:!0,render:e=>H()(e,p.H).format("L")},{title:Object(o.b)("finance.cash_account.initial_balance"),dataIndex:"balance_start_cents",key:"balance_start_cents",align:"right",default_visible:!0,ellipsis:!0,render:e=>Object(M.d)(e)},{title:Object(o.b)("finance.cash_account.verified_balance"),dataIndex:"balance_checked_cents",key:"balance_checked_cents",align:"right",default_visible:!0,ellipsis:!0,render:e=>Object(M.d)(e)},{default_visible:!0,key:"actions",always_visible:!0,align:"center",width:100,render:(e,t)=>Object(F.jsxs)(ve.a,{width:84,children:[Object(F.jsx)(Oe.a,{title:Object(o.b)("verbs.view"),placement:"bottom",children:Object(F.jsx)("button",{className:"link",onClick:()=>s(t.id),children:Object(F.jsx)(ge.a,{})})}),Object(F.jsx)(fe.a,{type:"vertical"}),Object(F.jsx)("button",{className:"link color-red",onClick:()=>n(t.id),children:Object(F.jsx)(te.a,{})})]})}]),[n,s])},we=a(582),ke=a(232);const Ce=Object(c.lazy)((()=>Object(ke.a)((()=>a.e(177).then(a.bind(null,2914)))))),$e=Object(c.lazy)((()=>Object(ke.a)((()=>a.e(7).then(a.bind(null,969)))))),Se=()=>{const e=Object(ne.b)((e=>e.title));return Object(F.jsx)(J.b,{title:e,children:Object(F.jsx)(we.a,{Desktop:Ce,Mobile:$e})})};Se.displayName="DefaultHeader";var Ie=Se;var ze=e=>{let{closed:t,refetch:a}=e;Object(U.a)({feature_keys:["has_cash_accounting"]});const l=Object(I.a)((e=>e.current_user.permissions)),i=Object(n.o)(),r=Object(c.useRef)(null),d=Object(c.useRef)(null);Object(c.useEffect)((()=>{a()}),[]);const{destroyCashAccounting:u}=re(),b=Object(c.useCallback)((()=>{var e;null===(e=r.current)||void 0===e||e.afterDestroyRecord(1)}),[]),_=Object(c.useCallback)((e=>{u(e,b)}),[b,u]),j=xe({handleDestroyCashAccountings:_}),h=pe(),m=Object(c.useCallback)((()=>{var e;l.can_access_cash_accounting?null===(e=d.current)||void 0===e||e.open():G.b.warning(Object(o.b)("phrases.no_permission_to_do_this"))}),[l.can_access_cash_accounting]),p=Object(c.useCallback)((()=>!0),[]),O=Object(c.useCallback)((e=>{var t;return null===e||void 0===e||null===(t=e.finance_cash_accountings)||void 0===t?void 0:t.all}),[]),v=Object(c.useCallback)((e=>{var t;return(null===e||void 0===e||null===(t=e.finance_cash_accountings)||void 0===t?void 0:t.total_count)||0}),[]),g=Object(c.useMemo)((()=>[{label:t?Object(o.b)("phrases.open_cash_account"):Object(o.b)("finance.cash_account.view"),icon:k.a,onClick:()=>{l.can_access_cash_accounting?t?m():i("/finance/cash-accounting/opened"):G.b.warning(Object(o.b)("phrases.no_permission_to_do_this"))}}]),[t,i,m,l.can_access_cash_accounting]);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ee.a,{ref:r,title:Object(o.b)("finance.cash_account.history"),permissions_key:"cash_accounting",search_placeholder:Object(o.b)("input.search_by_name"),filters:h,columns:j,Header:Ie,query:s.a,MobileItem:be,getData:O,getTotalCount:v,validateRow:p,extra_actions:g,item_selectable:!1}),Object(F.jsx)(f.a,{ref:d,afterSave:a})]})};const Ae=()=>{var e;const{data:t,refetch:a}=Object(s.b)(),c=null===t||void 0===t?void 0:t.last_cash_accounting,o=null===(e=null===c||void 0===c?void 0:c.closed)||void 0===e||e;return Object(F.jsxs)(n.d,{children:[Object(F.jsx)(n.b,{path:"/",element:o?Object(F.jsx)(ze,{closed:o,refetch:a}):Object(F.jsx)(n.a,{to:"/finance/cash-accounting/opened"})}),Object(F.jsx)(n.b,{path:"/closed",element:Object(F.jsx)(ze,{closed:o,refetch:a})}),Object(F.jsx)(n.b,{path:"/opened",element:Object(F.jsx)(W,{})}),Object(F.jsx)(n.b,{path:"*",element:Object(F.jsx)(n.a,{to:"/finance/cash-accounting"})})]})};Ae.displayName="CashAccountings";t.default=Object(c.memo)(Ae)},609:function(e,t,a){"use strict";var c=a(0),n=a(50),s=a(159),o=a(53),l=a.n(o),i=a(19),r=a(22);const d=e=>{let{handleChangeRange:t}=e;return Object(r.jsx)(u,{children:b.map((e=>{let{label:a,value:c}=e;return Object(r.jsx)(s.a,{type:"primary",onClick:()=>t(c),children:a},a)}))})};d.displayName="ExtraRangeComponent",t.a=Object(c.memo)(d);const u=i.d.div.withConfig({componentId:"wb__sc-hoi2yi-0"})(["display:flex;flex-wrap:wrap;justify-content:space-between;padding-top:8px;.ant-btn{cursor:pointer;width:49%;text-align:center;margin-bottom:8px;margin-right:0;}"]),b=[{label:Object(n.b)("words.today"),value:[l()(),l()()]},{label:Object(n.b)("date.last_week"),value:[l()().startOf("week").subtract(1,"week"),l()().endOf("week").subtract(1,"week")]},{label:Object(n.b)("date.last_month"),value:[l()().subtract(1,"month").startOf("month"),l()().subtract(1,"month").endOf("month")]},{label:Object(n.b)("date.current_month"),value:[l()().startOf("month"),l()().endOf("month")]},{label:Object(n.b)("date.six_months_ago"),value:[l()().subtract(6,"month"),l()()]},{label:Object(n.b)("date.one_year_ago"),value:[l()().subtract(12,"month"),l()()]}]},610:function(e,t,a){"use strict";a.d(t,"d",(function(){return _})),a.d(t,"b",(function(){return j})),a.d(t,"c",(function(){return h})),a.d(t,"a",(function(){return m}));var c=a(19),n=a(0),s=a(2934),o=a(609),l=a(22);const i=(e,t)=>{let{onRangeChange:a,...c}=e;const[i,r]=Object(n.useState)(!1),u=Object(n.useCallback)((e=>{a(e)}),[a]);return Object(l.jsx)(s.a,{ref:t,showNow:!1,renderExtraFooter:()=>Object(l.jsx)(d,{children:Object(l.jsx)(o.a,{handleChangeRange:u})}),...c,open:i,onOpenChange:r})};i.displayName="SimpleRangePicker";var r=Object(n.memo)(Object(n.forwardRef)(i));const d=c.d.div.withConfig({componentId:"wb__sc-13lwjt0-0"})(["width:265px;"]),u={true:!0,false:!1,all:null,none:null},b=["start_date","end_date","birthday_start_date","birthday_end_date","start_date_open","start_date_close","end_date_open","end_date_close"],_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},a={};return Object.entries(e).forEach((e=>{let[a,c]=e;c in u&&(t[a]=u[c])})),Object.entries(e).forEach((e=>{let[t,c]=e;b.includes(t)&&(a[t]=null===c||void 0===c?void 0:c.format("YYYY-MM-DD"))})),{...e,...t,...a}},j=c.d.div.withConfig({componentId:"wb__sc-gq8qm5-0"})(["display:flex;flex-direction:column;background-color:",";border-radius:16px;box-shadow:0 0 10px 5px #f3f3f3;padding:15px;border:1px solid rgba(0 0 0 / 3%);transition:box-shadow .1s;margin-bottom:5px;.ant-checkbox-wrapper + .ant-checkbox-wrapper{overflow:hidden;margin-left:0;width:100%;:not(:first-child){overflow:hidden;white-space:nowrap;text-overflow:ellipsis;word-break:keep-all;}}.ant-radio-wrapper{margin-right:0;}.ant-checkbox-group-item{margin-right:0;}.ant-calendar-picker-clear{background:transparent;color:",";}.ant-calendar-picker-input{border-top:none;border-left:none;border-right:none;border-radius:0;margin-top:5px;background:transparent;"," &:focus{box-shadow:none;}}.anticon-calendar{color:rgba(0,0,0,.2);}",""],(e=>e.theme.colors.white),(e=>e.theme.dark&&e.theme.dark_white),(e=>e.theme.dark&&`\n      border-color: ${e.theme.dark_secondary};\n      color: ${e.theme.dark_white};\n    `),(e=>e.tags&&Object(c.c)(["display:flex;flex-wrap:wrap;.ant-tag{margin:0 4px 4px 0;cursor:pointer;}"]))),h=Object(c.d)(r).withConfig({componentId:"wb__sc-gq8qm5-1"})(["width:100%;border-top:none;border-left:none;border-right:none;border-radius:0 !important;margin-top:5px;background:transparent;&.ant-picker-focused{box-shadow:none;}"]),m=c.d.div.withConfig({componentId:"wb__sc-gq8qm5-2"})(["min-width:0;width:0;z-index:210;text-overflow:ellipsis;white-space:nowrap;position:sticky;top:calc(","px + 10px);overflow:hidden;max-height:calc(100vh - 60px);align-self:flex-start;transition:width .2s;",""],(e=>e.theme.menu_top_height),(e=>!!e.$visible&&Object(c.c)(["min-width:230px;width:230px;padding-right:7px;overflow-y:auto;overflow-x:hidden;"])))},627:function(e,t,a){"use strict";var c=a(0),n=a(50),s=a(2937),o=a(137),l=a(578),i=a(116),r=a(585),d=a(28),u=a(598);const b={show_filters:!1,page:1,results:20,sort_field:"name",sort_order:"ascend",filters_value:{},visible_columns:[]};var _=(e,t)=>{if(t.type.includes("set_")&&"payload"in t){const a=t.type.split("set_")[1];return{...e,[a]:t.payload}}return e},j=a(53),h=a.n(j),m=a(635),p=a(22);const O={ascend:"ASC",descend:"DESC"},f=e=>e?h()(e):null;var v=a(405),g=a(610),y=a(27),x=a(582),w=a(1814),k=a(148);var C=e=>{const{total_count:t,records:a,results:s,select_all_query:o,validateRow:l=(e=>!0),rowSelector:r=(e=>e.map((e=>e.id)))}=e,[d,u]=Object(c.useState)([]),[b,_]=Object(c.useState)(!1),[j,h]=Object(c.useState)(!1),[m,O]=Object(c.useState)(!1),f=Object(k.a)(),v=Object(c.useCallback)((()=>{_(!1),u([]),O(!1)}),[]),g=Object(c.useCallback)((()=>{const e=i.b.loading(`${Object(n.b)("verbs.selecting")}...`,0);h(!0);const{query:t,variables:a,resolve:c}=o;f.query({query:t,variables:a,fetchPolicy:"network-only"}).then(c((e=>{_(!0),u(r(e))}))).catch((e=>console.error(e))).then((()=>{e(),h(!1)}))}),[f,r,o]),y=Object(c.useCallback)(((e,t)=>{u(r(t))}),[]),x=Object(c.useMemo)((()=>a.filter(l)),[a,l]);return Object(c.useMemo)((()=>({setSelectedRows:u,selected_all:b,selected_rows:d,validated_records:x,total_count:t,resetSelected:v,records:a,results:s,selectAll:g,onChange:y,is_select_mode:m,setIsSelectMode:O,is_selecting_all:j,setSelectedAll:_,setIsSelectingAll:h,getCheckboxProps:e=>({disabled:!l(e)}),selectedRowKeys:d.map((e=>(null===e||void 0===e?void 0:e.id)||e)),columnTitle:Object(p.jsx)(w.a,{className:"table-select-all",indeterminate:!b&&!!d.length&&d.length!==t,checked:b||d.length===t&&t>0,onChange:()=>{if(d.length<x.length)return u(r(x));v()}})})),[b,d,t,v,a,s,g,y,l,x,m,O,j])},$=a(597),S=a(232);const I=Object(c.lazy)((()=>Object(S.a)((()=>a.e(12).then(a.bind(null,968)))))),z=Object(c.lazy)((()=>Object(S.a)((()=>a.e(7).then(a.bind(null,969)))))),A=()=>{const e=Object(u.b)((e=>e.onSearch)),t=Object(u.b)((e=>e.title));return Object(p.jsx)($.b,{title:t,onSearch:e,children:Object(p.jsx)(x.a,{Desktop:I,Mobile:z})})};A.displayName="DefaultHeader";var M=A,V=a(76);const H=Object(c.lazy)((()=>Object(S.a)((()=>a.e(94).then(a.bind(null,2909)))))),F=Object(c.lazy)((()=>Object(S.a)((()=>a.e(67).then(a.bind(null,3082)))))),R=e=>!(null===e||void 0===e||!e.active),N=e=>null===e||void 0===e?void 0:e.id,E=(e,t)=>{var a,j;const{columns:h,filters:w,extra_actions:k,query:$,getTotalCount:S,getData:I,select_all_query:z,validateRow:A=R,rowSelectorKey:E=N,Header:q,expandedRowKeys:L,title:D,storage_key:P=D,has_feature:T=!0,use_storage:B=!0,addon_id:K,has_joyride:Y=!0,show_create_button:U=!0,item_selectable:J=!0,parseFilters:G=g.d,rowClassName:Q,mobileSwipeLeft:W}=e,X=Object(y.a)((e=>e.current_user.permissions)),Z=Object(y.a)((e=>e.is_mobile)),ee=`MagicTableStorage: ${P}`,[te]=s.a.useForm(),ae=(null===(a=h.find((e=>e.sorter)))||void 0===a?void 0:a.key)||h[0].key,ce=(null===(j=h.find((e=>e.defaultSortOrder)))||void 0===j?void 0:j.defaultSortOrder)||h[0].defaultSortOrder||"ascend",ne=Object(c.useMemo)((()=>(e=>{const{default_sort_order:t,default_sort_field:a,filters:c,local_storage_key:n,visible_columns:s,use_storage:o}=e,l=Object(d.c)(n);if(l&&o){const e=null===l||void 0===l?void 0:l.filters_value;return null!==e&&void 0!==e&&e.start_date||null!==e&&void 0!==e&&e.end_date||null!==e&&void 0!==e&&e.birthday_start_date||null!==e&&void 0!==e&&e.birthday_end_date||null!==e&&void 0!==e&&e.start_date_open||null!==e&&void 0!==e&&e.start_date_close||null!==e&&void 0!==e&&e.end_date_open||null!==e&&void 0!==e&&e.end_date_close?{...l,filters_value:{...l.filters_value,start_date:f(l.filters_value.start_date),end_date:f(l.filters_value.end_date),birthday_start_date:f(l.filters_value.birthday_start_date),birthday_end_date:f(l.filters_value.birthday_end_date),start_date_open:f(l.filters_value.start_date_open),start_date_close:f(l.filters_value.start_date_close),end_date_open:f(l.filters_value.end_date_open),end_date_close:f(l.filters_value.end_date_close)}}:l}const i=null===c||void 0===c?void 0:c.reduce(((e,t)=>t.default_value?t.rangepicker?{...e,[t.rangepicker.start_date_name]:t.default_value[0],[t.rangepicker.end_date_name]:t.default_value[1]}:{...e,[t.name]:t.default_value}:e),{});return{...b,sort_field:a,sort_order:O[t],filters_value:i,visible_columns:s}})({local_storage_key:ee,filters:w,default_sort_field:ae,default_sort_order:ce,visible_columns:h.filter((e=>e.default_visible)).map((e=>e.key)),use_storage:B})),[h,ae,ce,w,ee,B]),[se,oe]=Object(c.useReducer)(_,ne);Object(l.a)((()=>{Object(d.d)(ee,{...se,page:1})}),[se]);const[le,ie]=Object(c.useState)(""),[re,de]=Object(c.useState)([]),[ue,be]=Object(c.useState)(0),_e=Object(c.useRef)(!1),je=(e=>{const{columns:t,visible_columns:a=[],dispatch:c}=e,n=t.filter((e=>a.includes(e.key)||e.always_visible)),s=n.findIndex((e=>"actions"===e.key));return s&&(n[s]={...n[s],title:Object(p.jsx)(m.a,{columns:t,visible_columns:a,dispatch:c})}),n})({dispatch:oe,columns:h,visible_columns:se.visible_columns}),he={...Object(c.useMemo)((()=>h.filter((e=>e.include_key_on_query)).reduce(((e,t)=>{var a;return e[t.key]=null===(a=se.visible_columns)||void 0===a?void 0:a.includes(t.key),e}),{})),[h,se.visible_columns]),...G(se.filters_value),is_mobile:Z,search_query:le,sort_field:se.sort_field,sort_order:se.sort_order,page:se.page,results:se.results},{loading:me,refetch:pe}=Object(v.f)($,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:he,skip:!T,onError:e=>{console.log(e),V.a.captureException(e),i.b.error(Object(n.b)("phrases.loading_error"))},onCompleted:e=>{be(S(e)),1!==se.page&&_e.current?de((t=>[...t,...I(e)||[]])):de(I(e)||[])}}),Oe=Object(c.useCallback)((()=>{if(1===se.page)return pe();oe({type:"set_page",payload:1})}),[se.page,pe]),fe=Object(c.useCallback)((()=>{_e.current=!0,oe({type:"set_page",payload:se.page+1})}),[se.page]),ve=Object(c.useCallback)(((e,t,a)=>{a.order&&(oe({type:"set_sort_field",payload:a.field}),oe({type:"set_sort_order",payload:"ascend"===a.order?"ASC":"DESC"})),e.current&&oe({type:"set_page",payload:e.current}),e.pageSize&&oe({type:"set_results",payload:e.pageSize})}),[]),ge=C({total_count:ue,results:se.results,records:re,select_all_query:{query:z,variables:he,resolve:e=>t=>{let{data:a}=t;return e(I(a)||[])}},validateRow:A,rowSelector:Object(c.useCallback)((e=>e.filter(A).map(E)),[E,A])}),ye=Object(c.useMemo)((()=>L?L(re):void 0),[re,L]),xe=Object(c.useCallback)((e=>{pe(),ge.resetSelected();const t=Math.ceil((ue-e)/se.results);se.page>t&&oe({type:"set_page",payload:t})}),[se.page,pe,se.results,ge,ue]),we=Object(c.useCallback)((e=>{oe({type:"set_page",payload:1}),ie(e)}),[ie]),ke=Object(c.useCallback)((e=>{oe({type:"set_filters_value",payload:e}),oe({type:"set_page",payload:1})}),[]),Ce=Object(c.useMemo)((()=>T?e.permissions?e.permissions:e.permissions_key?{can_create:X[`can_create_${e.permissions_key}`],can_edit:X[`can_edit_${e.permissions_key}`],can_access:X[`can_access_${e.permissions_key}`]}:void 0:{can_create:!1,can_edit:!1,can_access:!1}),[T,e.permissions,e.permissions_key,X]),$e=Object(c.useCallback)((()=>{if(ge.resetSelected(),Z)return 1===se.page?void pe():void oe({type:"set_page",payload:1});pe()}),[Z,pe,ge,se.page]);Object(c.useImperativeHandle)(t,(()=>({afterDestroyRecord:xe,refetch:$e})));const Se=Object(c.useMemo)((()=>({onSearch:we,row_selection:ge,onFiltersChange:ke,data_source:re,form:te,total_count:ue,loading:me,new_columns:je,onChange:ve,expanded_row_keys:ye,refetch:Oe,handleFetchMore:fe,...e,has_feature:T,addon_id:K,has_joyride:Y,show_create_button:U,item_selectable:J,validateRow:A,rowSelectorKey:E,permissions:Ce,...se,dispatch:oe,rowClassName:Q,extra_actions:k})),[we,ge,ke,re,te,ue,me,je,ve,ye,Oe,fe,e,T,Y,U,A,E,Ce,se,Q,k,J,K]),Ie=Object(c.useMemo)((()=>null===w||void 0===w?void 0:w.reduce(((e,t)=>t.default_value?t.rangepicker?{...e,[t.rangepicker.start_date_name]:t.default_value[0],[t.rangepicker.end_date_name]:t.default_value[1]}:{...e,[t.name]:t.default_value}:e),{})),[w]);return Object(p.jsx)(u.a.Provider,{value:Se,children:Object(p.jsxs)(r.b,{children:[q?Object(p.jsx)(q,{}):Object(p.jsx)(M,{}),Object(p.jsx)(s.a,{form:te,component:!1,layout:"vertical",onChange:Object(o.debounce)(ke,1e3),initialValues:{...Ie,...se.filters_value},children:Object(p.jsx)(x.a,{Desktop:H,Mobile:F,mobileSwipeLeft:W})})]})})};E.displayName="MagicTable";t.a=Object(c.memo)(Object(c.forwardRef)(E))},635:function(e,t,a){"use strict";var c=a(0),n=a(50),s=a(1809),o=a(852),l=a(1814),i=a(3052),r=a(19),d=a(22);const u=e=>{let{columns:t,visible_columns:a,dispatch:l,setVisibleColumns:r}=e;const[u,_]=Object(c.useState)(!1),j=Object(c.useCallback)((()=>{const e=t.filter((e=>e.default_visible)).map((e=>e.key));null===l||void 0===l||l({type:"set_visible_columns",payload:e}),null===r||void 0===r||r(e)}),[t,l,r]),h=Object(c.useCallback)((e=>{if(a.includes(e)){const t=a.filter((t=>t!==e));return null===l||void 0===l||l({type:"set_visible_columns",payload:t}),void(null===r||void 0===r||r(t))}const t=[...a,e];null===l||void 0===l||l({type:"set_visible_columns",payload:t}),null===r||void 0===r||r(t)}),[l,r,a]),m=Object(c.useMemo)((()=>{const e=t.reduce(((e,t)=>{if(!t.title||t.always_visible)return e;const c={key:t.key,disabled:t.always_visible,label:Object(d.jsx)(b,{onClick:()=>h(t.key),checked:a.includes(t.key),children:t.title})};return[...e,c]}),[]);return[{key:"default_title",type:"group",label:Object(d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(d.jsx)("span",{children:Object(n.b)("words.column",{count:2})}),Object(d.jsx)("button",{className:"link",onClick:j,children:Object(n.b)("words.default")})]}),children:e}]}),[t,j,h,a]);return Object(d.jsx)(s.a,{menu:{items:m},trigger:["click"],open:u,onOpenChange:_,className:"no-print table-configuration",children:Object(d.jsx)(o.a,{title:Object(n.b)("phrases.column_settings"),placement:"left",children:Object(d.jsx)("div",{className:"link no-print",style:{fontSize:"15px"},children:Object(d.jsx)(i.a,{})})})})};u.displayName="ColumnsSettings",t.a=u;const b=Object(r.d)(l.a).withConfig({componentId:"wb__sc-1oenz8-0"})(["width:100%;"])},638:function(e,t,a){"use strict";var c=a(0),n=a(62),s=a(27);t.a=function(e){let{disabled:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=Object(s.a)((e=>e.is_mobile)),o=Object(n.a)();Object(c.useEffect)((()=>{if(a&&!t)return o({type:"set_mobile_menu_actions",payload:e.filter(Boolean)}),()=>{o({type:"set_mobile_menu_actions",payload:[]})}}),[t,a,e,o])}},716:function(e,t,a){"use strict";var c=a(13),n=a(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-32 736H663.9V602.2h104l15.6-120.7H663.9v-77.1c0-35 9.7-58.8 59.8-58.8h63.9v-108c-11.1-1.5-49-4.8-93.2-4.8-92.2 0-155.3 56.3-155.3 159.6v89H434.9v120.7h104.3V848H176V176h672v672z"}}]},name:"facebook",theme:"outlined"},o=a(71),l=function(e,t){return n.createElement(o.a,Object(c.a)({},e,{ref:t,icon:s}))},i=n.forwardRef(l);t.a=i},717:function(e,t,a){"use strict";var c=a(13),n=a(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 306.9c-113.5 0-205.1 91.6-205.1 205.1S398.5 717.1 512 717.1 717.1 625.5 717.1 512 625.5 306.9 512 306.9zm0 338.4c-73.4 0-133.3-59.9-133.3-133.3S438.6 378.7 512 378.7 645.3 438.6 645.3 512 585.4 645.3 512 645.3zm213.5-394.6c-26.5 0-47.9 21.4-47.9 47.9s21.4 47.9 47.9 47.9 47.9-21.3 47.9-47.9a47.84 47.84 0 00-47.9-47.9zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zm-88 235.8c-7.3 18.2-16.1 31.8-30.2 45.8-14.1 14.1-27.6 22.9-45.8 30.2C695.2 844.7 570.3 840 512 840c-58.3 0-183.3 4.7-235.9-16.1-18.2-7.3-31.8-16.1-45.8-30.2-14.1-14.1-22.9-27.6-30.2-45.8C179.3 695.2 184 570.3 184 512c0-58.3-4.7-183.3 16.1-235.9 7.3-18.2 16.1-31.8 30.2-45.8s27.6-22.9 45.8-30.2C328.7 179.3 453.7 184 512 184s183.3-4.7 235.9 16.1c18.2 7.3 31.8 16.1 45.8 30.2 14.1 14.1 22.9 27.6 30.2 45.8C844.7 328.7 840 453.7 840 512c0 58.3 4.7 183.2-16.2 235.8z"}}]},name:"instagram",theme:"outlined"},o=a(71),l=function(e,t){return n.createElement(o.a,Object(c.a)({},e,{ref:t,icon:s}))},i=n.forwardRef(l);t.a=i},726:function(e,t,a){"use strict";a.d(t,"g",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"f",(function(){return _}));var c=a(50),n=a(579);const s=(e,t)=>e+t.value_cents,o=e=>e.is_accounted||e.account_used_to_pay.cash&&"3"===e.status,l=e=>!e.is_accounted&&e.account_used_to_pay.cash&&"3"===e.status,i=e=>!e.is_accounted,r=(e,t,a,n)=>{var o;const{rec_movements:r,pay_movements:d,last_cash_accounting:b}=a,_=b.balance_start_cents,j=u(t.filter(i),!0),h=[...r.filter(l),...n.filter((e=>e.value_cents>0))].reduce(s,0),m=[...d.filter(l),...n.filter((e=>e.value_cents<0)).map((e=>({...e,value_cents:-e.value_cents})))].reduce(s,0),p=[];j.forEach((e=>{e.children.forEach((e=>{p.push({payment_id:e.id,receive_cents:e.total_rec,pay_cents:e.total_pay,balance_cents:e.total_rec+e.total_pay,balance_checked_cents:e.total_rec+e.total_pay,is_cash_account:e.is_cash,cash_account_and_paid:e.is_cash,cash_accounting_payment_categories_attributes:e.children.map((e=>({chart_id:e.id,description:`${e.total>=0?Object(c.b)("words.cash_income"):Object(c.b)("words.cash_outflow")} ${e.name}`,balance_cents:e.total,balance_checked_cents:e.total,bill_rec_ids:e.children.filter((e=>"rec"===e.bill_type)).map((e=>e.id)),bill_pay_ids:e.children.filter((e=>"pay"===e.bill_type)).map((e=>e.id))})))})}))}));const O=(null===(o=e.transfers)||void 0===o?void 0:o.filter((e=>e.account_id)))||[];return{cash_accounting_id:b.id,date_close:e.date_close,receive_cents:h,payment_cents:m,balance_cents:h+_-m,balance_checked_cents:h+_-m,bill_rec_ids:r.map((e=>e.id)),bill_pay_ids:d.map((e=>e.id)),transfers:O,cash_accounting_payments_attributes:p}},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{account_id:"",show_total_in_out:!0,prefix:0},a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=Object(n.l)(e,(e=>e.payment_used_to_pay.id));return Object.keys(o).map(((e,l)=>{const i=Object(n.l)(o[e],(e=>{var t;return null===(t=e.chart)||void 0===t?void 0:t.id})),r=Object.keys(i).map((c=>{var n;return{id:c,key:(t.account_id?`Acc${t.account_id}`:"")+`Pay${e}_Cha${c}_i${l}_prefix${t.prefix}`,name:null===(n=i[c][0].chart)||void 0===n?void 0:n.name,total:i[c].reduce(s,0),children:b(i[c],a),show_color:!0}})),d=t.show_total_in_out?{total_in:o[e].filter((e=>e.value_cents>0)).reduce(s,0),total_out:o[e].filter((e=>e.value_cents<0)).reduce(s,0)}:{},u=o[e][0].payment_used_to_pay.processing_days,_=o[e][0].payment_used_to_pay.name;return{id:e,key:t.account_id?`Acc${t.account_id}_Pay${e}_i${l}`:`Pay${e}_y${l}_prefix${t.prefix}`,name:`${_}${u>0?` (${Object(c.b)("finance.registrations.payment.available_in_days",{count:u})}`:""}`,is_cash:o[e][0].payment_used_to_pay.is_cash,total:o[e].reduce(s,0),total_rec:o[e].filter((e=>e.value_cents>0)).reduce(s,0),total_pay:o[e].filter((e=>e.value_cents<0)).reduce(s,0),children:r,...d}}))},u=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=Object(n.l)(e,(e=>e.account_used_to_pay.id));return Object.keys(a).map((e=>({id:e,key:`Acc${e}`,name:a[e][0].account_used_to_pay.name,total:a[e].reduce(s,0),total_in:a[e].filter((e=>e.value_cents>0)).reduce(s,0),total_out:a[e].filter((e=>e.value_cents<0)).reduce(s,0),children:d(a[e],{account_id:e,show_total_in_out:!1,prefix:0},t)})))},b=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=t?e:e.filter((e=>"rec"===e.bill_type));return a.map((e=>({id:e.id,name:e.historical||("rec"===e.bill_type?Object(c.b)("words.receipt"):Object(c.b)("words.expense")),bill_type:e.bill_type,movement:e,total:e.value_cents})))},_=e=>{var t;const a=null===e||void 0===e?void 0:e.last_cash_accounting,n=(null===a||void 0===a?void 0:a.balance_start_cents)||0,s=null===(t=null===a||void 0===a?void 0:a.closed)||void 0===t||t,o=function(){return[...arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],...arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]].map((e=>({...e,historical:`(${"chargeback"===e.type?Object(c.b)("words.reversal"):Object(c.b)("words.payment")}) - ${e.historical||""}`,value_cents:e.difference_cents,is_accounted:!0}))).filter((e=>0!==e.value_cents))}(null===e||void 0===e?void 0:e.accounted_rec_movements,null===e||void 0===e?void 0:e.accounted_pay_movements);return{last_account_balance:n,is_cash_accounting_closed:s,accounted_movements:o,movements:[...(null===e||void 0===e?void 0:e.rec_movements)||[],...((null===e||void 0===e?void 0:e.pay_movements)||[]).map((e=>({...e,value_cents:-e.value_cents}))),...o||[]]}}},787:function(e,t,a){"use strict";var c=a(13),n=a(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"},o=a(71),l=function(e,t){return n.createElement(o.a,Object(c.a)({},e,{ref:t,icon:s}))},i=n.forwardRef(l);t.a=i},897:function(e,t,a){"use strict";var c=a(13),n=a(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},o=a(71),l=function(e,t){return n.createElement(o.a,Object(c.a)({},e,{ref:t,icon:s}))},i=n.forwardRef(l);t.a=i}}]);
//# sourceMappingURL=51.2efff670.chunk.js.map