(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[21],{1190:function(e,t,i){"use strict";var n=i(0),s=i(845),c=i(659);t.a=()=>{const e=Object(c.b)((e=>e.commission_items)),t=Object(c.b)((e=>e.selected_commission_items)),i=Object(c.b)((e=>e.advances)),a=Object(c.b)((e=>e.selected_advances)),o=Object(c.b)((e=>e.bonifications)),l=Object(c.b)((e=>e.selected_bonifications)),r=Object(n.useMemo)((()=>Object(s.d)(e,t)),[e,t]),d=Object(n.useMemo)((()=>Object(s.b)(i,a)),[i,a]),b=Object(n.useMemo)((()=>Object(s.c)(o,l)),[o,l]),u=Object(n.useMemo)((()=>Object(s.e)(r.available_value,d,b)),[r,d,b]);return Object(n.useMemo)((()=>({commission_items_total:r,advances_total:d,bonifications_total:b,total_net_value:u})),[d,b,r,u])}},1207:function(e,t,i){"use strict";var n=i(0),s=i.n(n),c=i(7),a=i.n(c),o=i(821),l=i(12),r=i(193);var d=function(e){let t=null;const i=i=>()=>{t=null,e.apply(void 0,Object(l.a)(i))},n=function(){if(null===t){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];t=Object(r.a)(i(n))}};return n.cancel=()=>{r.a.cancel(t),t=null},n},b=i(46),u=i(310);var m=Object(u.b)("Affix",(e=>{const{componentCls:t}=e;return{[t]:{position:"fixed",zIndex:e.zIndexPopup}}}),(e=>({zIndexPopup:e.zIndexBase+10})));function j(e){return e!==window?e.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function _(e,t,i){if(void 0!==i&&Math.round(t.top)>Math.round(e.top)-i)return i+t.top}function h(e,t,i){if(void 0!==i&&Math.round(t.bottom)<Math.round(e.bottom)+i){return i+(window.innerHeight-t.bottom)}}var f=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i};const v=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"];function O(){return"undefined"!==typeof window?window:null}const p=s.a.forwardRef(((e,t)=>{var i;const{style:n,offsetTop:c,offsetBottom:l,prefixCls:r,className:u,rootClassName:p,children:y,target:x,onChange:g,onTestUpdatePosition:w}=e,k=f(e,["style","offsetTop","offsetBottom","prefixCls","className","rootClassName","children","target","onChange","onTestUpdatePosition"]),{getPrefixCls:C,getTargetContainer:$}=s.a.useContext(b.a),z=C("affix",r),[M,I]=s.a.useState(!1),[S,E]=s.a.useState(),[H,P]=s.a.useState(),N=s.a.useRef(0),R=s.a.useRef(null),V=s.a.useRef(null),F=s.a.useRef(null),L=s.a.useRef(null),B=s.a.useRef(null),T=null!==(i=null!==x&&void 0!==x?x:$)&&void 0!==i?i:O,Y=void 0===l&&void 0===c?0:c,A=()=>{N.current=1,(()=>{if(1!==N.current||!L.current||!F.current||!T)return;const e=T();if(e){const t={status:0},i=j(F.current);if(0===i.top&&0===i.left&&0===i.width&&0===i.height)return;const n=j(e),s=_(i,n,Y),c=h(i,n,l);void 0!==s?(t.affixStyle={position:"fixed",top:s,width:i.width,height:i.height},t.placeholderStyle={width:i.width,height:i.height}):void 0!==c&&(t.affixStyle={position:"fixed",bottom:c,width:i.width,height:i.height},t.placeholderStyle={width:i.width,height:i.height}),t.lastAffix=!!t.affixStyle,M!==t.lastAffix&&(null===g||void 0===g||g(t.lastAffix)),N.current=t.status,E(t.affixStyle),P(t.placeholderStyle),I(t.lastAffix)}})()},J=d((()=>{A()})),D=d((()=>{if(T&&S){const e=T();if(e&&F.current){const t=j(e),i=j(F.current),n=_(i,t,Y),s=h(i,t,l);if(void 0!==n&&S.top===n||void 0!==s&&S.bottom===s)return}}A()})),q=()=>{const e=null===T||void 0===T?void 0:T();e&&(v.forEach((t=>{var i;V.current&&(null===(i=R.current)||void 0===i||i.removeEventListener(t,V.current)),null===e||void 0===e||e.addEventListener(t,D)})),R.current=e,V.current=D)},U=()=>{const e=null===T||void 0===T?void 0:T();v.forEach((t=>{var i;null===e||void 0===e||e.removeEventListener(t,D),V.current&&(null===(i=R.current)||void 0===i||i.removeEventListener(t,V.current))})),J.cancel(),D.cancel()};s.a.useImperativeHandle(t,(()=>({updatePosition:J}))),s.a.useEffect((()=>(B.current=setTimeout(q),()=>{B.current&&(clearTimeout(B.current),B.current=null),U()})),[]),s.a.useEffect((()=>(q(),()=>U())),[x,S,M,c,l]),s.a.useEffect((()=>{J()}),[x,c,l]);const[G,K,Q]=m(z),W=a()(p,K,z,Q),X=a()({[W]:S});return G(s.a.createElement(o.default,{onResize:J},s.a.createElement("div",Object.assign({style:n,className:u,ref:F},k),S&&s.a.createElement("div",{style:H,"aria-hidden":"true"}),s.a.createElement("div",{className:X,ref:L,style:S},s.a.createElement(o.default,{onResize:J},y)))))}));t.a=p},1408:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(0),s=i(50),c=i(250),a=i(579),o=i(1190),l=i(712),r=i(19),d=i(22);const b=()=>{const{commission_items_total:e,advances_total:t,bonifications_total:i,total_net_value:n}=Object(o.a)();return Object(d.jsxs)(c.g,{$top:10,$bottom:20,$gap:8,$wrap:!0,children:[Object(d.jsxs)(u,{children:[Object(d.jsx)(c.h,{$size:20,$semibold:!0,children:Object(s.b)("words.commission",{count:2})}),Object(d.jsx)(c.h,{$size:18,$semibold:!0,children:Object(a.d)(e.available_value,{cents:!1})})]}),Object(d.jsxs)(u,{children:[Object(d.jsx)(c.h,{$size:20,$semibold:!0,children:Object(s.b)("words.advance",{count:2})}),Object(d.jsx)(c.h,{$size:18,$semibold:!0,children:Object(a.d)(t,{cents:!1})})]}),Object(d.jsxs)(u,{children:[Object(d.jsx)(c.h,{$size:20,$semibold:!0,children:Object(s.b)("words.bonification_other")}),Object(d.jsx)(c.h,{$size:18,$semibold:!0,children:Object(a.d)(i,{cents:!1})})]}),Object(d.jsxs)(u,{children:[Object(d.jsx)(c.h,{$size:20,$semibold:!0,children:Object(s.b)("words.blocked")}),Object(d.jsx)(c.h,{$size:18,$semibold:!0,children:Object(a.d)(e.blocked_value,{cents:!1})})]}),Object(d.jsxs)(u,{children:[Object(d.jsx)(c.h,{$size:20,$semibold:!0,children:Object(s.b)("words.net")}),Object(d.jsx)(l.a,{$size:18,$bold:!0,value:n,children:Object(a.d)(n,{cents:!1})})]})]})};b.displayName="TotalInfo",t.b=Object(n.memo)(b);const u=r.d.div.withConfig({componentId:"wb__sc-74ka76-0"})(["flex:1;min-width:162px;padding:10px;background-color:rgba(255,255,255,.8);border-radius:5px;box-shadow:0 0 7px 4px #f3f3f3;display:flex;flex-direction:column;align-items:center;justify-content:space-between;margin-bottom:8px;"])},1789:function(e,t,i){"use strict";i(0);var n=i(50),s=i(845),c=i(852),a=i(22);t.a=e=>{let{mode:t}=e;switch(t){case s.a.default:return Object(a.jsx)(c.a,{title:Object(n.b)("finance.commissions.normal_commission"),children:Object(n.b)("words.normal")});case s.a.with_assistant:return Object(a.jsx)(c.a,{title:Object(n.b)("finance.commissions.with_assistant"),children:Object(n.b)("finance.commissions.with_assistant")});case s.a.as_assistant:return Object(a.jsx)(c.a,{title:Object(n.b)("finance.commissions.as_assistant"),children:Object(n.b)("words.assistant")});default:return null}}},1816:function(e,t,i){"use strict";var n=i(0),s=i(50),c=i(2937),a=i(137),o=i(447),l=i(250),r=i(116),d=i(579),b=i(645),u=i(1190),m=i(27),j=i(37),_=i(1850),h=i(657),f=i(76);const v=j.e`
  mutation FinaceCommissionPaymentModal ($data: CreateCommissionBatchPaymentInput!) {
    createCommissionsBatchPayment (input: $data) {
      success
      errors
    }
  }
`;var O=e=>{const[t,{loading:i}]=Object(_.a)(v);return[async i=>{try{const{data:n}=await t({variables:{data:i}}),{success:s,errors:c}=(null===n||void 0===n?void 0:n.createCommissionsBatchPayment)||{};return null===c||void 0===c||c.forEach((t=>{"Caixa n\xe3o est\xe1 aberto"!==t?r.b.error(t):Object(h.a)(e)})),{success:s}}catch(n){return f.a.captureException(n),r.b.error(Object(s.b)("finance.commissions.payment_error_message")),console.error(n),{success:!1}}},{loading:i}]},p=i(1438),y=i(582),x=i(232),g=i(22);const w=Object(n.lazy)((()=>Object(x.a)((()=>i.e(207).then(i.bind(null,2917)))))),k=Object(n.lazy)((()=>Object(x.a)((()=>i.e(208).then(i.bind(null,2918)))))),C=e=>{let{payments_attributes:t,handleEditPayment:i,removePayment:n}=e;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(p.a,{orientation:"left",children:Object(s.b)("words.payment",{count:2})}),Object(g.jsxs)(l.g,{$column:!0,$bottom:10,children:[0===t.length&&Object(g.jsx)(l.h,{$size:18,children:Object(s.b)("phrases.no_payment_added")}),t.map((e=>Object(g.jsx)(y.a,{Desktop:w,Mobile:k,payment:e,removePayment:n,handleEditPayment:i},e.id)))]})]})};var $=Object(n.memo)(C),z=i(2883),M=i(2934),I=i(1809),S=i(2824),E=i(159),H=i(959),P=i(584),N=i(19),R=i(53),V=i.n(R),F=i(3038),L=i(3058);const B=e=>{let{handlePaymentSelect:t}=e;const[i,a]=Object(n.useState)(""),o=Object(m.a)((e=>Object(d.A)(e.finance_payments))),r=Object(n.useMemo)((()=>o.filter((e=>e.active))),[o]),b=Object(n.useMemo)((()=>r.find((e=>e.is_cash))),[r]),u=Object(n.useMemo)((()=>r.filter((e=>e.is_card))),[r]),j=Object(n.useMemo)((()=>r.filter((e=>![...u,b].find((t=>(null===t||void 0===t?void 0:t.id)===e.id))))),[r,u,b]),_=Object(n.useMemo)((()=>u.map((e=>({key:e.id,onClick:()=>t(e),label:Object(g.jsx)(H.a,{payment_name:e.name,payment_favorite:e.favorite})})))),[u,t]),h=Object(n.useMemo)((()=>j.filter((e=>e.name.toLowerCase().includes(i.toLowerCase())))),[j,i]),f=Object(n.useMemo)((()=>h.map((e=>({key:e.id,onClick:()=>{t(e),a("")},label:Object(g.jsx)(H.a,{payment_name:e.name,payment_favorite:e.favorite})})))),[t,h]);return Object(g.jsxs)(l.g,{justify:"center",$column:!0,children:[Object(g.jsxs)(l.g,{gutter:[8,0],$isFlex:!0,$wrap:!0,children:[Object(g.jsx)(z.a,{span:12,children:Object(g.jsx)(c.a.Item,{name:"value_cents",label:Object(s.b)("words.value"),children:Object(g.jsx)(P.a,{min:0,size:"large"})})}),Object(g.jsx)(z.a,{span:12,children:Object(g.jsx)(c.a.Item,{name:"date",label:Object(s.b)("words.due"),initialValue:V()(),children:Object(g.jsx)(M.a,{style:{width:"100%"},size:"large",allowClear:!1,format:"L"})})})]}),Object(g.jsxs)(l.g,{$gap:15,children:[Object(g.jsx)(Y,{block:!0,icon:Object(g.jsx)(F.a,{}),size:"large",disabled:!b,onClick:()=>b&&t(b),children:(null===b||void 0===b?void 0:b.name)||Object(s.b)("words.cash")}),Object(g.jsx)(I.a,{menu:{items:_},trigger:["click"],placement:"bottomRight",disabled:0===u.length,dropdownRender:e=>Object(g.jsx)(l.c,{children:e}),children:Object(g.jsx)(Y,{block:!0,icon:Object(g.jsx)(L.a,{}),size:"large",disabled:0===u.length,children:Object(s.b)("words.card")})})]}),Object(g.jsx)(l.g,{$top:15,$bottom:20,children:Object(g.jsx)(I.a,{menu:{items:f},trigger:["click"],placement:"bottom",disabled:0===j.length,dropdownRender:e=>Object(g.jsxs)(l.c,{children:[Object(g.jsx)("div",{style:{padding:"8px 12px",backgroundColor:"#FFFFFF"},children:Object(g.jsx)(S.a,{placeholder:Object(s.b)("whatsapp_booster.type_to_search"),value:i,autoFocus:!0,allowClear:!0,onChange:e=>a(e.target.value),style:{width:"100%"}})}),0===h.length?Object(g.jsx)(l.h,{$paddings:12,$alignCenter:!0,$color:"gray_1",children:Object(s.b)("input.not_found",{model:Object(s.b)("words.item").toLowerCase()})}):e]}),children:Object(g.jsx)(Y,{block:!0,size:"large",disabled:0===j.length,children:Object(s.b)("words.other",{count:2})})})})]})};B.displayName="PaymentForm";var T=Object(n.memo)(B);const Y=Object(N.d)(E.a).withConfig({componentId:"wb__sc-1djfon6-0"})(["height:60px;font-weight:500;"]);var A=i(1408),J=i(581);const D=(e,t)=>{let{afterSave:i,...a}=e;const{selected_commission_items:j,selected_advances:_,selected_bonifications:h,start_date_filter:f,end_date_filter:v}=a,[p,y]=Object(n.useState)(!1),[x,w]=Object(n.useState)([]),{total_net_value:k}=Object(u.a)(),C=Object(d.o)(k,100),z=Object(m.a)((e=>e.current_user.permissions)),[M]=c.a.useForm(),{setFieldsValue:I,submit:S,resetFields:E,getFieldsValue:H}=M,P=Object(n.useCallback)((()=>{y(!0),I({value_cents:C})}),[I,C]),N=Object(n.useCallback)((()=>{y(!1)}),[]);Object(n.useImperativeHandle)(t,(()=>({open:P,close:N})));const R=Object(n.useRef)(null),V=Object(n.useCallback)((()=>{var e;z.can_access_cash_accounting?null===(e=R.current)||void 0===e||e.open():r.b.warning(Object(s.b)("phrases.no_permission_to_do_this"))}),[z.can_access_cash_accounting]),[F,{loading:L}]=O(V),B=Object(n.useCallback)((async()=>{const e=x.map((e=>({value_cents:e.value_cents,payment_id:e.finance_payment.id,account_id:e.finance_account_id,date:e.date.format("YYYY-MM-DD")}))),{success:t}=await F({finance_commission_items_ids:j,advances_ids:_,bonification_ids:h,start_date_filter:f,end_date_filter:v,salaries_attributes:e});t&&(r.b.success(Object(s.b)("finance.commissions.payment_successfully")),N(),E(),null===i||void 0===i||i())}),[i,N,F,E,_,j,h,f,v,x]),Y=Object(n.useCallback)((e=>{const{value_cents:t,date:i}=H();t<=0?r.b.warning(Object(s.b)("phrases.enter_value")):w((n=>{const s=[...n,{id:Object(o.a)(),value_cents:t,date:i.clone(),finance_payment:e,finance_account_id:e.account_id}],c=s.reduce(((e,t)=>e+t.value_cents),0),a=Math.max(0,C-c);return I({value_cents:a,date:i}),s}))}),[H,I,C]),D=Object(n.useCallback)((e=>{e||(E(),w([]))}),[E]),q=Object(n.useCallback)((e=>{w((t=>{const i=[...t].filter((t=>t.id!==e)),n=i.reduce(((e,t)=>e+t.value_cents),0),s=Math.max(0,C-n);return I({value_cents:s}),i}))}),[I,C]),U=Object(n.useCallback)((e=>{w((t=>{const i=[...t],n=i.findIndex((t=>t.id===e.id));return-1===n||(i[n]=e),i}))}),[]),G=x.reduce(((e,t)=>e+t.value_cents),0),K=C===G;return Object(g.jsxs)(l.a,{title:Object(s.b)("finance.commissions.payment_commission_other"),open:p,destroyOnClose:!0,onClose:N,width:500,height:"100%",closable:!0,push:!1,afterOpenChange:D,footer:Object(g.jsx)(J.a,{is_large:!0,loading:L,disabled:L||!K,close:N,submit:S,save_text:Object(s.b)("verbs.pay")}),children:[Object(g.jsx)(A.b,{}),Object(g.jsx)(c.a,{form:M,layout:"vertical",onFinish:B,children:Object(g.jsx)(T,{handlePaymentSelect:Y})}),Object(g.jsx)($,{payments_attributes:x,removePayment:q,handleEditPayment:U}),Object(g.jsx)(b.a,{ref:R})]})};D.displayName="PaymentModal";t.a=Object(n.memo)(Object(n.forwardRef)(D),a.isEqual)},1818:function(e,t,i){"use strict";i.d(t,"b",(function(){return P}));var n=i(0),s=i(50),c=i(552),a=i(852),o=i(2813),l=i(250),r=i(845),d=i(3048),b=i(13),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},m=i(71),j=function(e,t){return n.createElement(m.a,Object(b.a)({},e,{ref:t,icon:u}))};var _=n.forwardRef(j),h=i(1831),f=i(3056),v=i(854),O=i(3071),p=i(579),y=i(635),x=i(27),g=i(659),w=i(1789),k=i(2848),C=i(2849),$=i(22);const z=e=>{let{record_key:t}=e;const i=Object(g.b)((e=>e.expanded_row_keys)),n=Object(g.b)((e=>e.dispatch));return i.some((e=>e===t))?Object($.jsx)(l.h,{$color:"primary",$left:4,children:Object($.jsx)(k.a,{onClick:()=>n({type:"remove_expanded_row_key",payload:t})})}):Object($.jsx)(l.h,{$color:"primary",$left:4,children:Object($.jsx)(C.a,{onClick:()=>n({type:"add_expanded_row_key",payload:t})})})};z.displayName="ExpandRowIcon";var M=Object(n.memo)(z),I=i(712),S=i(53),E=i.n(S);const{useBreakpoint:H}=c.a;t.a=e=>{const t=Object(x.a)((e=>e.current_user.permissions)),i=H().xxl,c=Object(g.b)((e=>{var t;return null===(t=e.employee)||void 0===t?void 0:t.employee_fee_config})),b="i"!==(null===c||void 0===c?void 0:c.product_consumed_price_by),u=`${Object(x.a)((e=>e.current_user.salon_id))} | Comiss\xf5es`,m=Object(n.useMemo)((()=>{const n=[{title:Object(s.b)("words.date"),key:"inventory_sale_date",dataIndex:"inventory_sale_date",default_visible:!0,always_visible:!0,width:100,render:(e,t)=>{var i;return E()(null===t||void 0===t||null===(i=t.inventory_sale)||void 0===i?void 0:i.date).format("L")}},{title:Object(s.b)("words.item"),key:"full_informations",dataIndex:"full_informations",default_visible:!0,always_visible:!0,ellipsis:!0,render:(i,n)=>{var s;const c=n.inventory_sale_item||(null===(s=n.item_sale_assistant)||void 0===s?void 0:s.inventory_sale_item),a=n.inventory_sale,o=a.client.name,r=null===c||void 0===c?void 0:c.inventory_product.description;return Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(l.g,{children:[Object($.jsx)(l.h,{$textEllipsis:!0,children:o}),"\xa0 (",Object($.jsxs)(l.h,{$color:t.can_edit_sale?"primary":void 0,$cursor:t.can_edit_sale?"pointer":"default",onClick:()=>t.can_edit_sale&&e(a.id),children:["#",null===a||void 0===a?void 0:a.code]}),")"]}),Object($.jsxs)(l.g,{children:[Object($.jsx)(l.h,{$bold:!0,$textEllipsis:!0,children:r}),Object($.jsxs)("div",{children:["\xa0(",null===c||void 0===c?void 0:c.quantity,"\xd7)",P({sale_item:c,commission:n})]})]})]})}},{title:Object(s.b)("words.value"),key:"sale_item_gross_value",dataIndex:"sale_item_gross_value",default_visible:!0,align:"right",width:105,render:e=>Object(p.d)(e,{cents:!1})}];return null!==c&&void 0!==c&&c.considers_additional_cost&&n.push({title:Object(s.b)("phrases.additional_cost"),dataIndex:"additional_cost_price",key:"additional_cost_price",default_visible:!0,align:"right",ellipsis:!i,width:i?140:105,render:(e,t)=>t.employee_commission_mode===r.a.as_assistant?"-":e?Object(p.d)(e,{cents:!1}):"-"}),"company"!==(null===c||void 0===c?void 0:c.discount_payer)&&n.push({title:Object(s.b)("words.discount"),key:"inventory_sale_item",dataIndex:"inventory_sale_item",default_visible:!0,align:"right",width:105,render:(e,t)=>{const i=null===e||void 0===e?void 0:e.commission_sale_item_discount;return t.employee_commission_mode===r.a.as_assistant?"-":i?Object(p.d)(i,{cents:!1}):"-"}}),"company"!==(null===c||void 0===c?void 0:c.fee_payer)&&n.push({title:Object($.jsxs)(a.a,{title:Object(s.b)("finance.commissions.accumulated_fee_tooltip"),trigger:["hover","click"],children:[Object(s.b)("finance.commissions.accumulated_fee"),"\xa0",Object($.jsx)(d.a,{})]}),key:"accumulated_rate",dataIndex:"accumulated_rate",default_visible:!0,align:"right",width:130,render:(e,t)=>t.employee_commission_mode===r.a.as_assistant?"-":e?`${Object(p.d)(t.proportional_tax_rate,{cents:!1})}\n            (${Object(p.u)(100*e,{precision:2})})`:"-"}),n.push({title:Object(s.b)("words.commission"),key:"considered_commission_percentage",dataIndex:"considered_commission_percentage",default_visible:!0,align:"right",width:100,render:(e,t)=>Object($.jsxs)($.Fragment,{children:[Object(p.u)(e,{precision:2}),Object($.jsx)("br",{}),Object($.jsx)(w.a,{mode:t.employee_commission_mode})]})},{title:Object(s.b)("finance.commissions.assistant_discount"),dataIndex:"discounted_for_assistants_sum",key:"discounted_for_assistants_sum",default_visible:!0,align:"right",ellipsis:!i,width:i?145:105,render:(e,t)=>t.employee_commission_mode===r.a.as_assistant?"-":e?Object(p.s)(e,{precision:2}):"-"}),b&&n.push({title:Object(s.b)("words.consumed_product",{count:2}),dataIndex:"discounted_for_products_sum",key:"discounted_for_products_sum",default_visible:!0,align:"right",ellipsis:!i,width:i?140:110,render:(e,t)=>((t.inventory_sale_item||{}).inventory_sale_composes||[]).length>0?Object($.jsxs)("div",{children:[Object(p.d)(e,{cents:!1}),Object($.jsx)("span",{className:"no-print",children:Object($.jsx)(M,{record_key:t.id})})]}):"-"}),"available_date"===(null===c||void 0===c?void 0:c.filter_date_by)&&n.push({title:Object(s.b)("words.total"),key:"total_value",dataIndex:"total_value",default_visible:!0,align:"right",width:105,render:e=>Object(p.d)(e,{cents:!1})},{title:Object(s.b)("words.blocked"),dataIndex:"blocked_value",key:"blocked_value",default_visible:!0,align:"right",width:105,render:e=>Object(p.d)(e,{cents:!1})}),n.push({title:Object(s.b)("words.available"),dataIndex:"available_value",key:"available_value",always_visible:!0,default_visible:!0,align:"right",width:105,render:e=>Object($.jsx)(I.a,{$semibold:!0,value:e,children:Object(p.d)(e,{cents:!1})})},{title:"",key:"actions",dataIndex:"actions",default_visible:!0,align:"center",width:35,always_visible:!0,className:"no-print",render:(e,t)=>t.first_payment_realized?Object($.jsx)(a.a,{placement:"left",title:Object(s.b)("finance.commissions.commission_already_has_payment_value",{value:Object(p.d)(t.paid_value,{cents:!1})}),children:Object($.jsx)(_,{})}):null}),n}),[null===c||void 0===c?void 0:c.considers_additional_cost,null===c||void 0===c?void 0:c.discount_payer,null===c||void 0===c?void 0:c.fee_payer,null===c||void 0===c?void 0:c.filter_date_by,i,e,t.can_edit_sale,b]),[j,h]=Object(o.a)(`${u}@visible_columns`,m.filter((e=>e.default_visible)).map((e=>e.key)));return Object(n.useMemo)((()=>{const e=m.filter((e=>(null===j||void 0===j?void 0:j.includes(e.key))||e.always_visible)),t=e.findIndex((e=>"actions"===e.key));return t&&(e[t]={...e[t],title:Object($.jsx)(y.a,{columns:m,visible_columns:j,setVisibleColumns:h})}),e}),[m,j,h])};const P=e=>{const{commission:t,sale_item:i}=e;return t?t.from_package_item?Object($.jsx)(h.a,{style:{marginLeft:4},title:Object(s.b)("words.package_item")}):t.from_offers_item?Object($.jsx)(f.a,{style:{marginLeft:4},title:Object(s.b)("finance.commissions.offer_item")}):t.from_subscription_item?Object($.jsx)(v.a,{style:{marginLeft:4},title:Object(s.b)("words.subscription_item")}):"-"===(null===i||void 0===i?void 0:i.kind_points)?Object($.jsx)(O.a,{style:{marginLeft:4},title:Object(s.b)("finance.commissions.item_redeemed_with_loyalty_points")}):void 0:null}},1831:function(e,t,i){"use strict";var n=i(13),s=i(0),c={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},a=i(71),o=function(e,t){return s.createElement(a.a,Object(n.a)({},e,{ref:t,icon:c}))},l=s.forwardRef(o);t.a=l},1841:function(e,t,i){"use strict";var n=i(0),s=i(50),c=i(159),a=i(250),o=i(579),l=i(116),r=i(37),d=i(2879),b=i(76);const u=r.e`
  query FetchService($id: ID!) {
    bonification (id: $id) {
      id
      value_cents

      origin {
        id
        period
        value_type
        value

        employee {
          id
          name
          avatar_url
        }

        goal_products {
          id
          inventory_product {
            id
            description
          }
        }
      }
    }
  }
`;var m=e=>Object(d.a)(u,{fetchPolicy:"network-only",onCompleted:t=>{e(t.bonification)},onError:e=>{b.a.captureException(e),console.log(e),l.b.error(Object(s.b)("phrases.generic_save_error_message"))}}),j=i(27),_=i(339),h=i(595),f=i(590),v=i(631),O=i(19),p=i(712),y=i(53),x=i.n(y),g=i(22);const w=(e,t)=>{const[i,l]=Object(n.useState)(!1),[r,d]=Object(n.useState)(),b=Object(j.a)((e=>e.is_mobile)),[u,{loading:O}]=m(d),y=Object(n.useCallback)((e=>{u({variables:{id:e}}),l(!0)}),[u]),w=Object(n.useCallback)((()=>{l(!1)}),[]);Object(n.useImperativeHandle)(t,(()=>({close:w,open:y})));const C=Object(n.useCallback)((e=>{e||d(void 0)}),[]);return Object(g.jsx)(k,{open:i,onClose:w,afterOpenChange:C,height:"100%",width:b?"100%":500,title:Object(s.b)("words.goal"),footer:Object(g.jsx)(c.a,{onClick:w,block:!0,size:"large",children:Object(g.jsx)(a.h,{$semibold:!0,children:Object(s.b)("verbs.close")})}),children:Object(g.jsxs)(_.a,{loading:O,children:[Object(g.jsxs)(f.a,{children:[Object(g.jsx)(h.a,{spaced:!0,children:Object(g.jsxs)(a.g,{$alignCenter:!0,style:{width:"100%",overflow:"hidden"},children:[Object(g.jsx)(v.a,{size:40,src:null===r||void 0===r?void 0:r.origin.employee.avatar_url}),Object(g.jsx)(a.h,{$left:5,$textEllipsis:!0,$size:16,$semibold:!0,children:null===r||void 0===r?void 0:r.origin.employee.name})]})}),Object(g.jsx)(h.a,{children:Object(g.jsx)(a.h,{$block:!0,children:x()(null===r||void 0===r?void 0:r.origin.period).format("MMMM/YYYY")})}),Object(g.jsxs)(h.a,{children:[Object(g.jsx)(a.h,{$semibold:!0,children:Object(s.b)("words.bonification")}),Object(g.jsx)(p.a,{$semibold:!0,value:null===r||void 0===r?void 0:r.value_cents,children:Object(o.d)(null===r||void 0===r?void 0:r.value_cents)})]})]}),Object(g.jsxs)(f.a,{children:[Object(g.jsx)(a.h,{$bold:!0,$size:20,$paddings:[25,25,13,25],children:Object(s.b)("words.item",{count:2})}),null===r||void 0===r?void 0:r.origin.goal_products.map((e=>Object(g.jsx)(h.a,{children:Object(g.jsx)(a.g,{justify:"space-between",children:Object(g.jsx)(a.h,{$textEllipsis:!0,children:e.inventory_product.description})})},e.id)))]})]})})};w.displayName="VisualizeBonificationDrawer";t.a=Object(n.forwardRef)(w);const k=Object(O.d)(a.a).withConfig({componentId:"wb__sc-nyw7gb-0"})([".ant-drawer-body{background:",";}"],(e=>e.theme.is_mobile?"#f8f8f8":"white"))},2813:function(e,t,i){"use strict";var n=i(0),s=i(365);t.a=function(e,t,i){if(!s.a)return[t,s.b,s.b];if(!e)throw new Error("useLocalStorage key may not be falsy");var c=i?i.raw?function(e){return e}:i.deserializer:JSON.parse,a=Object(n.useRef)((function(e){try{var n=i?i.raw?String:i.serializer:JSON.stringify,s=localStorage.getItem(e);return null!==s?c(s):(t&&localStorage.setItem(e,n(t)),t)}catch(o){return t}})),o=Object(n.useState)((function(){return a.current(e)})),l=o[0],r=o[1];Object(n.useLayoutEffect)((function(){return r(a.current(e))}),[e]);var d=Object(n.useCallback)((function(t){try{var n="function"===typeof t?t(l):t;if("undefined"===typeof n)return;var s=void 0;s=i?i.raw?"string"===typeof n?n:JSON.stringify(n):i.serializer?i.serializer(n):JSON.stringify(n):JSON.stringify(n),localStorage.setItem(e,s),r(c(s))}catch(o){}}),[e,r]),b=Object(n.useCallback)((function(){try{localStorage.removeItem(e),r(void 0)}catch(o){}}),[e,r]);return[l,d,b]}},635:function(e,t,i){"use strict";var n=i(0),s=i(50),c=i(1809),a=i(852),o=i(1814),l=i(3052),r=i(19),d=i(22);const b=e=>{let{columns:t,visible_columns:i,dispatch:o,setVisibleColumns:r}=e;const[b,m]=Object(n.useState)(!1),j=Object(n.useCallback)((()=>{const e=t.filter((e=>e.default_visible)).map((e=>e.key));null===o||void 0===o||o({type:"set_visible_columns",payload:e}),null===r||void 0===r||r(e)}),[t,o,r]),_=Object(n.useCallback)((e=>{if(i.includes(e)){const t=i.filter((t=>t!==e));return null===o||void 0===o||o({type:"set_visible_columns",payload:t}),void(null===r||void 0===r||r(t))}const t=[...i,e];null===o||void 0===o||o({type:"set_visible_columns",payload:t}),null===r||void 0===r||r(t)}),[o,r,i]),h=Object(n.useMemo)((()=>{const e=t.reduce(((e,t)=>{if(!t.title||t.always_visible)return e;const n={key:t.key,disabled:t.always_visible,label:Object(d.jsx)(u,{onClick:()=>_(t.key),checked:i.includes(t.key),children:t.title})};return[...e,n]}),[]);return[{key:"default_title",type:"group",label:Object(d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(d.jsx)("span",{children:Object(s.b)("words.column",{count:2})}),Object(d.jsx)("button",{className:"link",onClick:j,children:Object(s.b)("words.default")})]}),children:e}]}),[t,j,_,i]);return Object(d.jsx)(c.a,{menu:{items:h},trigger:["click"],open:b,onOpenChange:m,className:"no-print table-configuration",children:Object(d.jsx)(a.a,{title:Object(s.b)("phrases.column_settings"),placement:"left",children:Object(d.jsx)("div",{className:"link no-print",style:{fontSize:"15px"},children:Object(d.jsx)(l.a,{})})})})};b.displayName="ColumnsSettings",t.a=b;const u=Object(r.d)(o.a).withConfig({componentId:"wb__sc-1oenz8-0"})(["width:100%;"])},712:function(e,t,i){"use strict";var n=i(250),s=i(19);const c=Object(s.d)(n.h).withConfig({componentId:"wb__sc-12equ9e-0"})(["color:",";"],(e=>e.value?e.value>0?e.theme.colors.success:e.value<0?e.theme.colors.red:e.theme.colors.primary:e.theme.colors.primary));t.a=c},817:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(0),s=i(50),c=i(823),a=i(3045),o=i(3039),l=i(3052),r=i(27);const d=()=>{const e=Object(r.a)((e=>e.is_mobile)),t=Object(n.useMemo)((()=>[{label:Object(s.b)("words.summary"),path:"/finance/commissions/summary",icon:c.a},{label:Object(s.b)("finance.commissions.open_commissions"),path:"/finance/commissions",icon:a.a},{label:Object(s.b)("finance.commissions.paid_commissions"),path:"/finance/commissions/batch_payments",icon:o.a},{label:Object(s.b)("words.setting_other"),path:"/finance/commissions/settings",icon:l.a}]),[]),i=Object(n.useMemo)((()=>[{label:Object(s.b)("finance.commissions.detailed"),path:"/finance/commissions"},{label:Object(s.b)("finance.commissions.summary"),path:"/finance/commissions/bulk_commissions"},{label:Object(s.b)("finance.commissions.paid"),path:"/finance/commissions/batch_payments"},{label:Object(s.b)("words.setting_other"),path:"/finance/commissions/settings",icon:l.a}]),[]);return e?t:i}},823:function(e,t,i){"use strict";var n=i(13),s=i(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},a=i(71),o=function(e,t){return s.createElement(a.a,Object(n.a)({},e,{ref:t,icon:c}))},l=s.forwardRef(o);t.a=l},845:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"d",(function(){return c})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"e",(function(){return l}));var n=i(579);const s={default:1,with_assistant:2,as_assistant:3},c=(e,t)=>e.filter((e=>t.includes(e.id))).reduce(((e,t)=>({available_value:Object(n.B)(t.available_value,e.available_value),sale_item_gross_value:Object(n.B)(t.sale_item_gross_value,e.sale_item_gross_value),blocked_value:Object(n.B)(t.blocked_value,e.blocked_value)})),{available_value:0,sale_item_gross_value:0,blocked_value:0}),a=(e,t)=>e.filter((e=>t.includes(e.id))).reduce(((e,t)=>Object(n.B)(e,t.value_cents)),0)/100,o=(e,t)=>e.filter((e=>t.includes(e.id))).reduce(((e,t)=>Object(n.B)(e,t.value_cents)),0)/100,l=(e,t,i)=>parseFloat((Object(n.B)(e,i)-t).toFixed(2))},854:function(e,t,i){"use strict";var n=i(13),s=i(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z"}}]},name:"audit",theme:"outlined"},a=i(71),o=function(e,t){return s.createElement(a.a,Object(n.a)({},e,{ref:t,icon:c}))},l=s.forwardRef(o);t.a=l}}]);
//# sourceMappingURL=21.87773bbf.chunk.js.map