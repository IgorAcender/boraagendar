(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[48],{1042:function(e,t,a){"use strict";var n=a(0),r=a(159),o=a(2855),i=a(687),c=a(50),s=a(22);const l=e=>{let{show_filters:t,setShowFilters:a}=e;return Object(s.jsx)(r.a,{className:t?"ant-btn-gold":void 0,type:t?"primary":"default",onClick:()=>a((e=>!e)),icon:t?Object(s.jsx)(o.a,{}):Object(s.jsx)(i.a,{}),children:Object(c.b)("verbs.filter")})};l.displayName="FilterButton",t.a=Object(n.memo)(l)},1071:function(e,t,a){"use strict";a(0);var n=a(53),r=a.n(n),o=a(50),i=a(773),c=a(579),s=a(22);const l=e=>{let{payload:t,active:a}=e;if(!a)return null;const n=((t||[])[0]||{}).payload||{};return Object(s.jsxs)(i.b,{children:[Object(c.d)(n.y,{cents:!1})," ",Object(o.b)("words.in")," ",r()(n.x,"YYYY-MM-DD").format("L")]})};l.displayName="SoldPerDayTooltip",t.a=l},1087:function(e,t,a){"use strict";var n=a(0),r=a(50),o=a(852),i=a(607),c=a(3048),s=a(37),l=a(405),d=a(76);const b=s.e`
  query WebookWowSalonsComparison($start_date: String!, $end_date: String!, $salon_id: String) {
    salons_comparison: wow_salons_comparison(start_date: $start_date, end_date: $end_date, salon_id: $salon_id) {
      all {
        name percentage
      }
    }
  }
`;var j=e=>{var t;return Object(l.f)(b,{fetchPolicy:"network-only",variables:{salon_id:null===(t=e.current_salon)||void 0===t?void 0:t.id,start_date:e.start_date.format("YYYY-MM-DD"),end_date:e.end_date.format("YYYY-MM-DD")},onError:e=>{d.a.captureException(e),console.log(e)}})},p=a(339),h=a(586),_=a(250),u=a(19),x=a(2975),m=a(3053),g=a(579),O=a(22);const f=e=>({1:"\ud83e\udd47",2:"\ud83e\udd48",3:"\ud83e\udd49"}[e]||`#${e}`),w=e=>{let{comparison:t,rank:a}=e;const n=Object(u.f)(),i=Math.min(t.percentage,100);let c=n.colors.primary,s=n.colors.primary,l="#7c84fc";i<50?(c=n.colors.red,s="#ff4d4f",l="#ff7875"):i<75&&(c=n.colors.success,s="#52c41a",l="#73d13d");const d=t.name.split(" ")[0],b=(j=i)>=85?Object(r.b)("wow.agenda_status_full"):j>=70?Object(r.b)("wow.agenda_status_good"):j>=50?Object(r.b)("wow.agenda_status_moderate"):Object(r.b)("wow.agenda_status_low");var j;return Object(O.jsx)(o.a,{trigger:["hover","click"],title:Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:t.name}),Object(O.jsxs)("div",{children:[Object(g.u)(t.percentage,{precision:1,symbol_position:"right"})," ",Object(r.b)("wow.agenda_occupation")]}),Object(O.jsx)("div",{children:b})]}),children:Object(O.jsxs)(y,{rank:a,children:[Object(O.jsx)(k,{rank:a,color:c,children:f(a)}),Object(O.jsx)($,{children:Object(O.jsx)(x.a,{size:48,icon:Object(O.jsx)(m.a,{}),style:{backgroundColor:c}})}),Object(O.jsx)(_.h,{$block:!0,$fullWidth:!0,$alignCenter:!0,$color:"default_text",$textEllipsis:!0,style:{marginTop:8},children:d}),Object(O.jsxs)(C,{children:[Object(O.jsx)(S,{percentage:i,gradient_start:s,gradient_end:l}),Object(O.jsx)(Y,{})]}),Object(O.jsx)(z,{color:c,children:Object(g.u)(t.percentage,{precision:1,symbol_position:"right"})}),Object(O.jsx)(M,{$size:11,$color:"gray_1",$alignCenter:!0,children:b})]})})};w.displayName="CustomTab";var v=Object(n.memo)(w);const y=u.d.div.withConfig({componentId:"wb__sc-19u8gpc-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;padding:16px 12px;background:#fafafa;border-radius:12px;transition:all 0.3s ease;position:relative;"]),k=u.d.div.withConfig({componentId:"wb__sc-19u8gpc-1"})(["position:absolute;top:8px;right:8px;font-size:",";font-weight:bold;color:",";"],(e=>e.rank<=3?"18rem":"12rem"),(e=>e.rank<=3?"inherit":e.color)),$=u.d.div.withConfig({componentId:"wb__sc-19u8gpc-2"})(["margin-bottom:4px;"]),C=u.d.div.withConfig({componentId:"wb__sc-19u8gpc-3"})(["position:relative;width:24px;height:120px;margin:12px 0 8px 0;"]),Y=u.d.div.withConfig({componentId:"wb__sc-19u8gpc-4"})(["position:absolute;bottom:0;width:100%;height:100%;background:#f0f0f0;border-radius:12px;"]),S=u.d.div.withConfig({componentId:"wb__sc-19u8gpc-5"})(["position:absolute;bottom:0;width:100%;height:","%;background:linear-gradient(to top,",",",");border-radius:12px;transition:height 0.6s ease;box-shadow:0 2px 8px ","40;z-index:10;"],(e=>e.percentage),(e=>e.gradient_start),(e=>e.gradient_end),(e=>e.gradient_start)),z=Object(u.d)(_.h).withConfig({componentId:"wb__sc-19u8gpc-6"})(["font-size:18rem;font-weight:bold;color:",";margin-top:4px;"],(e=>e.color)),M=Object(u.d)(_.h).withConfig({componentId:"wb__sc-19u8gpc-7"})(["margin-top:4px;text-transform:uppercase;letter-spacing:0.5px;"]),I=e=>{var t;let{extra:a=D,filters:o}=e;const{data:c,loading:s,error:l}=j(o),d=Object(n.useMemo)((()=>{var e;return[...(null===c||void 0===c||null===(e=c.salons_comparison)||void 0===e?void 0:e.all)||[]].sort(((e,t)=>t.percentage-e.percentage))}),[null===c||void 0===c||null===(t=c.salons_comparison)||void 0===t?void 0:t.all]);return Object(O.jsxs)(i.a,{style:{height:"100%",minHeight:250},title:Object(r.b)("wow.salons_comparison"),extra:a,children:[Object(O.jsx)(p.a,{loading:s}),Object(O.jsx)(h.a,{visible:!!l,small:!0,showSupportMessage:!1}),Object(O.jsx)(L,{children:Object(O.jsx)(F,{children:d.map(((e,t)=>Object(O.jsx)(N,{children:Object(O.jsx)(v,{comparison:e,rank:t+1})},e.name)))})})]})};I.displayName="SalonsComparison";t.a=Object(n.memo)(I);const D=Object(O.jsx)(o.a,{title:Object(r.b)("wow.salons_comparison_tooltip"),trigger:["hover","click"],placement:"left",children:Object(O.jsx)(c.a,{})}),L=u.d.div.withConfig({componentId:"wb__sc-5hlhy9-0"})(["overflow-x:auto;overflow-y:hidden;padding-bottom:8px;@media (max-width:768px){padding-bottom:0;&::-webkit-scrollbar{display:none;}&::-webkit-scrollbar-track{display:none;}&::-webkit-scrollbar-thumb{display:none;}scrollbar-width:none;}"]),F=u.d.div.withConfig({componentId:"wb__sc-5hlhy9-1"})(["display:flex;gap:12px;width:max-content;"]),N=u.d.div.withConfig({componentId:"wb__sc-5hlhy9-2"})(["width:140px;flex-shrink:0;"])},1400:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(0);var n=a(50),r=a(1227),o=a(2853),i=a(19),c=a(22);const s=e=>Object(c.jsx)(r.a,{trigger:"hover",...e,content:Object(c.jsxs)(l,{children:[Object(c.jsx)("h4",{children:Object(n.b)("wow.average_ticket_tooltip.title")}),Object(c.jsx)("p",{children:Object(n.b)("wow.average_ticket_tooltip.description")}),Object(c.jsx)("div",{className:"formula",children:Object(n.b)("wow.average_ticket_tooltip.calc_description")}),Object(c.jsxs)("div",{className:"example",children:[Object(c.jsxs)("strong",{children:[Object(n.b)("words.example"),":"]}),Object(c.jsxs)("div",{className:"step",children:["\u2022 ",Object(n.b)("wow.average_ticket_tooltip.example_1")]}),Object(c.jsxs)("div",{className:"step",children:["\u2022 ",Object(n.b)("wow.average_ticket_tooltip.example_2")]}),Object(c.jsxs)("div",{className:"step",children:["\u2022 ",Object(n.b)("wow.average_ticket_tooltip.example_3")]}),Object(c.jsxs)("div",{className:"step",children:["\u2022 ",Object(n.b)("wow.average_ticket_tooltip.example_4")]}),Object(c.jsx)("br",{}),Object(c.jsxs)("strong",{children:[Object(n.b)("words.calculation"),":"]}),Object(c.jsxs)("div",{className:"step",children:["1. ",Object(n.b)("wow.average_ticket_tooltip.calc_example_1")]}),Object(c.jsxs)("div",{className:"step",children:["2. ",Object(n.b)("wow.average_ticket_tooltip.calc_example_2")]}),Object(c.jsxs)("div",{className:"step",children:["3. ",Object(n.b)("wow.average_ticket_tooltip.calc_example_3")]}),Object(c.jsxs)("div",{className:"step",children:["4. ",Object(c.jsx)("strong",{children:Object(n.b)("wow.average_ticket_tooltip.calc_example_4")})]}),Object(c.jsx)("br",{})]})]}),children:Object(c.jsx)(o.a,{style:{marginLeft:4}})});s.displayName="AverageTicketTooltip",t.b=s;const l=i.d.div.withConfig({componentId:"wb__sc-eflmub-0"})(["max-width:450px;h4{margin:0 0 8px 0;font-weight:600;font-size:16rem;}p{margin:0 0 12px 0;line-height:1.5;}.formula{background:#f5f5f5;padding:8px 12px;border-radius:4px;margin:8px 0;font-family:'Courier New',monospace;font-size:12rem;}.example{background:#e6f7ff;border-left:3px solid ",";padding:10px 12px;margin:12px 0;font-size:13rem;strong{color:",";}}.step{margin:6px 0;padding-left:12px;}"],(e=>e.theme.color_primary),(e=>e.theme.color_primary))},1455:function(e,t,a){"use strict";a.d(t,"a",(function(){return z}));var n=a(0),r=a(50),o=a(579),i=a(844),c=a(3048),s=a(2996),l=a(2777),d=a(1158),b=a(928),j=a(250),p=a(852),h=a(607),_=a(19),u=a(816),x=a(27),m=a(37),g=a(405),O=a(76);const f=m.e`
  query WebookWowSalesByCategory($start_date: String!, $end_date: String!, $salon_id: String) {
    sales_by_category: wow_sales_by_category(start_date: $start_date, end_date: $end_date, salon_id: $salon_id) {
      data { x y }
    }
  }
`;var w=e=>{var t;return Object(g.f)(f,{fetchPolicy:"network-only",variables:{salon_id:null===(t=e.current_salon)||void 0===t?void 0:t.id,start_date:e.start_date.format("YYYY-MM-DD"),end_date:e.end_date.format("YYYY-MM-DD")},onError:e=>{O.a.captureException(e),console.log(e)}})},v=a(339),y=a(586),k=a(22);const $=["#1890FF","#13C2C2","#2FC25B","#FFBB28","#AAAAAA","#8543E0"],C=e=>{let{filters:t}=e;const a=Object(_.f)(),n=Object(x.a)((e=>e.is_mobile)),{data:j,loading:m,refetch:g,error:O}=w(t),{data:f=[]}=(null===j||void 0===j?void 0:j.sales_by_category)||{},C=f.reduce(((e,t)=>t.y+e),0),z=!m&&0===C;return Object(k.jsxs)(h.a,{extra:Object(k.jsx)(p.a,{placement:"left",trigger:["hover","click"],title:Object(r.b)("wow.sales_by_category_tooltip"),children:Object(k.jsx)(c.a,{})}),style:{height:"100%"},title:Object(r.b)("wow.sales_by_category"),styles:{body:{display:"flex"}},children:[Object(k.jsx)(v.a,{loading:m}),Object(k.jsx)(y.a,{visible:!!O,small:!0,showSupportMessage:!1}),Object(k.jsxs)(Y,{style:{flexDirection:n?"column":void 0},children:[Object(k.jsx)(s.a,{width:200,height:n?200:260,children:Object(k.jsxs)(l.a,{data:z?i.b:f,innerRadius:"70%",outerRadius:"100%",startAngle:90,legendType:"plainline",endAngle:-270,paddingAngle:0,dataKey:"y",children:[(z?i.b:f).map(((e,t)=>Object(k.jsx)(d.a,{fill:$[t%$.length]},`sales-by-category-cell-${t}`))),Object(k.jsx)(b.a,{value:`${Object(r.b)("words.total")}: ${Object(o.d)(C,{cents:!1})}`,position:"center",fill:a.colors.default_text})]})}),!z&&Object(k.jsx)(S,{data:f,total_sum:C})]}),z&&Object(k.jsx)(u.a,{children:Object(k.jsx)(h.b,{title:Object(r.b)("wow.sales_by_category"),module:Object(r.b)("words.sale",{count:2}).toLocaleLowerCase(),actions:["sale","package"],afterSave:()=>g()})})]})};C.displayName="SalesByCategory";t.b=Object(n.memo)(C);const Y=_.d.div.withConfig({componentId:"wb__sc-1kpcwbf-0"})(["display:flex;width:100%;align-items:center;justify-content:center;"]),S=e=>{let{data:t=[],total_sum:a}=e;return Object(k.jsx)(z,{children:t.map(((e,t)=>Object(k.jsxs)("li",{children:[Object(k.jsx)("div",{className:"dot",style:{backgroundColor:$[t%$.length]}}),Object(k.jsx)(j.h,{title:e.x,children:e.x}),Object(k.jsxs)(j.h,{$semibold:!0,children:[Object(o.d)(e.y,{cents:!1}),"\xa0 (",Object(o.u)(Object(o.j)(a,e.y),{symbol_position:"right",precision:0}),")"]})]},e.x)))})};S.displayName="LegendStyled";const z=_.d.ul.withConfig({componentId:"wb__sc-1kpcwbf-1"})(["padding:0;margin:0 0 0 10px;flex:1;display:flex;flex-direction:column;list-style:none;overflow-y:auto;max-height:230px;width:100%;li{display:flex;align-items:center;gap:6px;padding:2px 0;flex-wrap:nowrap;}.dot{display:inline-block;min-width:10px;height:10px;border-radius:8px;flex-shrink:0;}li > span:nth-child(2){overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:0;}li > span:nth-child(3){white-space:nowrap;flex-shrink:0;}"])},2819:function(e,t,a){"use strict";a.r(t),a.d(t,"INITIAL_FILTERS",(function(){return ja}));var n=a(0),r=a(50),o=a(340),i=a(250),c=a(2851),s=a(3048),l=a(585),d=a(852),b=a(159),j=a(3003),p=a(783),h=a(2937),_=a(1256),u=a(808),x=a(731),m=a(27),g=a(581),O=a(22);const f=(e,t)=>{let{onSave:a}=e;const[o,i]=Object(n.useState)(!1),[c]=h.a.useForm(),s=Object(m.a)((e=>(e.current_user.user_organizations.map((e=>{let{organization:t}=e;return t})).map((e=>e.salons||[])).flat()||[]).filter((e=>e.active)).sort(((e,t)=>e.name.localeCompare(t.name))))),l=s.length>1,d=e=>{const{current_salon:t,...a}=e;c.setFieldsValue({...a,salon_id:(null===t||void 0===t?void 0:t.id)||""}),i(!0)},b=()=>{i(!1)};return Object(n.useImperativeHandle)(t,(()=>({open:d,close:b}))),Object(O.jsx)(u.a,{open:o,setVisible:i,title:Object(r.b)("words.filter",{count:2}),onClose:b,zIndex:998,closable:!0,destroyOnClose:!0,afterOpenChange:e=>!e&&c.resetFields(),footer:Object(O.jsx)(g.a,{loading:!1,submit:c.submit,close:b}),children:Object(O.jsxs)(h.a,{form:c,layout:"vertical",onFinish:e=>{const{salon_id:t,current_salon:n,...r}=e,o=s.find((e=>e.id===t)),i=l?{...r,current_salon:o}:r;a(i),b()},scrollToFirstError:!0,initialValues:ja,children:[l&&Object(O.jsx)(h.a.Item,{label:Object(r.b)("words.subsidiary"),name:"salon_id",children:Object(O.jsx)(_.a,{size:"large",style:{width:"100%"},children:[{id:"",name:Object(r.b)("wow.all_subsidiary")},...s].map((e=>Object(O.jsx)(_.a.Option,{value:e.id,children:e.name},e.name)))})}),Object(O.jsx)(h.a.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.start_date!==t.start_date,children:()=>Object(O.jsx)(x.a,{form:c,filter:{label:Object(r.b)("words.period"),name:"dates",rangepicker:{start_date_name:"start_date",end_date_name:"end_date"}},is_mobile:!0})}),Object(O.jsx)(p.a,{form:c,closable:!0})]})})};f.displayName="WowFiltersDrawerMobile";var w=Object(n.memo)(Object(n.forwardRef)(f)),v=a(19),y=a(2901),k=a(1777),$=a(2837),C=a(1048),Y=a(773),S=a(579),z=a(543),M=a(2883),I=a(607),D=a(816),L=a(37),F=a(405),N=a(76);const E=L.e`
  query WebookWowEmployeesAttending($start_date: String!, $end_date: String!, $salon_id: String) {
    employees_attending: wow_employees_attending(start_date: $start_date, end_date: $end_date, salon_id: $salon_id) {
      previous_total_services_count
      total_services_count
      total_services_comparison_percentage

      ranking_data {
        id
        average_ticket_comparison_percentage
        count_comparison_percentage
        current_average_ticket
        current_services_count
        name
        previous_average_ticket
        previous_services_count
        rank
        salon_name
      }

      sales_per_day {
        date count
      }
    }
  }
`;var R=e=>{var t;return Object(F.f)(E,{fetchPolicy:"network-only",variables:{salon_id:null===(t=e.current_salon)||void 0===t?void 0:t.id,start_date:e.start_date.format("YYYY-MM-DD"),end_date:e.end_date.format("YYYY-MM-DD")},onError:e=>{N.a.captureException(e),console.log(e)}})},A=a(1801),W=a(2921),q=a(578),P=a(592),K=a(547),T=a(2856),B=a(2857);const H=e=>{let{rate:t,children:a,...n}=e;return Object(O.jsxs)("div",{style:{display:"flex",alignItems:"center"},...n,children:[a,t?Object(O.jsx)(i.d,{$mLeft:5,$size:22,as:t>0?T.a:B.a,$color:t>0?"green_1":"red"}):null]})};H.displayName="Trend";var V=Object(n.memo)(H);const J=e=>({1:"gold",2:"silver",3:"bronze"}[e]||"");var U=e=>{const t=Object(v.f)();return Object(n.useMemo)((()=>[{title:Object(r.b)("words.employee"),dataIndex:"name",ellipsis:!0,key:"name",render:(a,n)=>{const o=J(n.rank);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(i.h,{style:{backgroundColor:t.colors[o],width:26,height:26,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",marginRight:4},children:n.rank}),a.includes(`(${Object(r.b)("wow.without_employee")})`)?Object(r.b)("wow.without_employee"):a?a.split(" ")[0]:"",e&&!!n.salon_name&&Object(O.jsx)(K.a,{style:{marginLeft:8,fontSize:10},children:n.salon_name})]})}},{title:Object(r.b)("words.service_other"),dataIndex:"current_services_count",width:150,key:"current_services_count",render:(e,t)=>Object(O.jsxs)(i.h,{style:{display:"flex"},children:[e,"\xa0",Object(O.jsx)(d.a,{title:Object(r.b)("wow.previous_period_total",{number:t.previous_services_count}),children:Object(O.jsx)(V,{rate:t.count_comparison_percentage,children:null!==t.count_comparison_percentage&&`| ${Object(S.u)(t.count_comparison_percentage,{symbol_position:"right",precision:1})}`})})]})},{dataIndex:"current_average_ticket",key:"current_average_ticket",title:Object(r.b)("wow.average_attending_value"),width:220,align:"right",render:(e,t)=>Object(O.jsxs)(i.h,{style:{display:"flex",justifyContent:"flex-end"},children:[Object(S.d)(t.current_average_ticket,{cents:!1}),"\xa0",Object(O.jsx)(d.a,{title:Object(r.b)("wow.previous_period_total",{number:Object(S.d)(t.previous_average_ticket,{cents:!1})}),children:Object(O.jsx)(V,{rate:t.average_ticket_comparison_percentage,children:null!==t.average_ticket_comparison_percentage&&`| ${Object(S.u)(t.average_ticket_comparison_percentage,{symbol_position:"right",precision:1})}`})})]})}]),[e,t.colors])},G=a(117);const Q=e=>{let{item:t,is_multiempresas:a}=e;const{average_ticket_comparison_percentage:n,count_comparison_percentage:o,current_average_ticket:c,current_services_count:s,name:l,previous_average_ticket:b,previous_services_count:j,rank:p,salon_name:h}=t,_=l.includes(`(${Object(r.b)("wow.without_employee")})`)?Object(r.b)("wow.without_employee"):l?l.split(" ")[0]:"",u=J(p);return Object(O.jsxs)(i.g,{$paddings:10,$column:!0,children:[Object(O.jsxs)(i.g,{$alignCenter:!0,children:[Object(O.jsx)(i.h,{style:{backgroundColor:G.a[u],width:26,height:26,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",marginRight:4},children:p}),Object(O.jsxs)(i.h,{$textEllipsis:!0,children:[_,a&&!!h&&Object(O.jsx)(K.a,{style:{marginLeft:8,fontSize:10},children:h})]})]}),Object(O.jsxs)(i.h,{$mTop:8,style:{display:"flex"},children:[Object(r.b)("words.service_other"),": ",s,"\xa0",Object(O.jsx)(d.a,{trigger:"click",title:Object(r.b)("wow.previous_period_total",{number:j}),children:Object(O.jsx)(V,{rate:o,children:null!==o&&`| ${Object(S.u)(o,{symbol_position:"right",precision:0})}`})})]}),Object(O.jsxs)(i.h,{$mTop:8,children:[Object(r.b)("wow.average_attending_value"),":"]}),Object(O.jsxs)(i.h,{style:{display:"flex"},children:[Object(S.d)(c,{cents:!1}),"\xa0",Object(O.jsx)(d.a,{title:Object(r.b)("wow.previous_period_total",{number:Object(S.d)(b,{cents:!1})}),children:Object(O.jsx)(V,{rate:n,children:null!==n&&`| ${Object(S.u)(n,{symbol_position:"right"})}`})})]})]})};Q.displayName="MobileItem";var X=Q,Z=a(2869),ee=a(1223);const te=e=>{let{top_three:t,is_multiempresas:a}=e;return 0===t.length?null:Object(O.jsx)(re,{children:t.map((e=>{const n=J(e.rank),o=e.name.includes(`(${Object(r.b)("wow.without_employee")})`)?Object(r.b)("wow.without_employee"):e.name?e.name.split(" ")[0]:"";return Object(O.jsxs)(oe,{position:e.rank,color:G.a[n],total_places:t.length,children:[Object(O.jsx)(ce,{color:G.a[n],children:1===e.rank?Object(O.jsx)(Z.a,{}):Object(O.jsx)(ee.a,{})}),Object(O.jsx)(i.h,{$textEllipsis:!0,$semibold:!0,children:o}),a&&e.salon_name&&Object(O.jsx)(K.a,{style:{marginBottom:4,fontSize:10},children:e.salon_name}),Object(O.jsxs)(i.h,{$semibold:!0,$alignCenter:!0,$color:n,children:[e.current_services_count," ",Object(r.b)("words.service_other").toLowerCase()]}),Object(O.jsx)(d.a,{title:Object(r.b)("wow.average_attending_value"),children:Object(O.jsx)(i.h,{$alignCenter:!0,children:Object(S.d)(e.current_average_ticket,{cents:!1})})}),Object(O.jsxs)(ie,{height:ne(e.rank),color:G.a[n],children:[e.rank,"\xba"]})]},e.id)}))})};te.displayName="Podium";var ae=Object(n.memo)(te);const ne=e=>({1:80,2:60,3:40}[e]||40),re=v.d.div.withConfig({componentId:"wb__sc-ieaa18-0"})(["display:flex;align-items:flex-end;justify-content:center;gap:8px;padding:10px 0;"]),oe=v.d.div.withConfig({componentId:"wb__sc-ieaa18-1"})(["display:flex;flex-direction:column;align-items:center;position:relative;order:",";"],(e=>1===e.position?2:2===e.position?1:3)),ie=v.d.div.withConfig({componentId:"wb__sc-ieaa18-2"})(["width:100px;height:","px;background:linear-gradient(135deg,","22 0%,","44 100%);border:2px solid ",";border-radius:8px 8px 0 0;display:flex;align-items:center;justify-content:center;font-size:24rem;font-weight:bold;color:",";box-shadow:0 4px 12px ","33;"],(e=>e.height),(e=>e.color),(e=>e.color),(e=>e.color),(e=>e.color),(e=>e.color)),ce=v.d.div.withConfig({componentId:"wb__sc-ieaa18-3"})(["width:48px;height:48px;background:",";border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(0,0,0,0.15);svg{font-size:24rem;}"],(e=>e.color));var se=e=>{let{loading:t,ranking_data:a}=e;const[r,o]=Object(n.useState)(1),i=Object(m.a)((e=>e.is_mobile));Object(q.a)((()=>{a.length&&o(1)}),[a]);const c=Object(m.a)((e=>e.current_user.user_organizations.map((e=>{let{organization:t}=e;return t})).map((e=>e.salons||[])).flat().filter((e=>e.active)))).length>1,s=U(c),l=a.length>=3,d=l?a.slice(0,3):[],b=l?a.slice(3):a;return i?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(ae,{top_three:d,is_multiempresas:c}),b.length>0&&Object(O.jsxs)(O.Fragment,{children:[b.slice(3*(r-1),3*r).map(((e,t)=>Object(O.jsx)(P.b,{style:{margin:"0 0 10px 0"},children:Object(O.jsx)(X,{item:e,is_multiempresas:c})},t))),Object(O.jsx)(A.a,{hideOnSinglePage:!0,pageSize:3,onChange:e=>o(e),current:r,total:b.length,size:"small"})]})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:Object(O.jsx)(ae,{top_three:d,is_multiempresas:c})}),b.length>0&&Object(O.jsx)(W.a,{rowKey:"id",size:"small",columns:s,loading:t,dataSource:b,pagination:{pageSize:3,current:r,hideOnSinglePage:!0,onChange:e=>o(e)}})]})},le=a(339),de=a(586),be=a(53),je=a.n(be);const pe=e=>{let{filters:t}=e;const a=Object(m.a)((e=>e.is_mobile)),{data:n,loading:o,error:c,refetch:l}=R(t),{previous_total_services_count:b=0,total_services_count:j=0,total_services_comparison_percentage:p=0,sales_per_day:h=[],ranking_data:_=[]}=(null===n||void 0===n?void 0:n.employees_attending)||{},u=Object(v.f)();return Object(O.jsxs)(I.a,{style:{height:"100%"},title:Object(r.b)("wow.appointments_per_employee"),extra:Object(O.jsx)(d.a,{trigger:["hover","click"],placement:"left",title:Object(r.b)("wow.employees_attending_tooltip"),children:Object(O.jsx)(s.a,{})}),children:[Object(O.jsx)(le.a,{loading:o}),Object(O.jsx)(de.a,{visible:!!c,small:!0,showSupportMessage:!1}),Object(O.jsx)(z.a,{gutter:[8,8],style:{marginBottom:8},children:Object(O.jsxs)(M.a,{span:24,children:[Object(O.jsx)(d.a,{title:Object(r.b)("wow.previous_period_total",{number:b}),children:Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)(i.h,{$size:a?void 0:16,children:Object(r.b)("words.appointment",{count:2})}),Object(O.jsxs)(V,{rate:p,children:[Object(O.jsx)(i.h,{$size:a?16:18,$bold:!0,$mRight:20,children:j}),Object(O.jsx)(i.h,{$size:a?void 0:16,children:Object(S.u)(p,{symbol_position:"right",precision:2})})]})]})}),Object(O.jsx)(y.a,{width:"100%",height:55,children:Object(O.jsxs)(k.a,{data:h,children:[Object(O.jsx)($.a,{trigger:a?"click":"hover",content:e=>Object(O.jsx)(_e,{...e})}),Object(O.jsx)(C.a,{type:"monotone",dataKey:"count",stroke:u.colors.primary,fill:u.colors.primary})]})})]})}),Object(O.jsx)(se,{loading:o,ranking_data:0===j?ue:_}),0===(!o&&j)&&Object(O.jsx)(D.a,{children:Object(O.jsx)(I.b,{title:Object(r.b)("wow.appointments_per_employee"),module:Object(r.b)("words.appointment",{count:2}).toLocaleLowerCase(),actions:["sale"],afterSave:()=>l()})})]})};pe.displayName="EmployeesAttending";var he=Object(n.memo)(pe);const _e=e=>{let{payload:t,formatter:a=(e=>e)}=e;if(null!==t&&void 0!==t&&t.length){const{value:e,payload:{date:n}}=t[0];return Object(O.jsx)(Y.b,{children:Object(O.jsxs)(i.h,{children:[a(e),"\xa0em\xa0",je()(n,"YYYY-MM-DD").format("L")]})})}return null},ue=[{id:"fake-1",rank:1,name:"Maria Silva",salon_name:"",current_services_count:45,current_average_ticket:125,previous_services_count:38,previous_average_ticket:110,count_comparison_percentage:18.42,average_ticket_comparison_percentage:13.64},{id:"fake-2",rank:2,name:"Jo\xe3o Santos",salon_name:"",current_services_count:38,current_average_ticket:118,previous_services_count:35,previous_average_ticket:105,count_comparison_percentage:8.57,average_ticket_comparison_percentage:12.38},{id:"fake-3",rank:3,name:"Ana Costa",salon_name:"",current_services_count:32,current_average_ticket:102,previous_services_count:30,previous_average_ticket:98,count_comparison_percentage:6.67,average_ticket_comparison_percentage:4.08},{id:"fake-4",rank:4,name:"Carlos Mendes",salon_name:"",current_services_count:28,current_average_ticket:95,previous_services_count:32,previous_average_ticket:92,count_comparison_percentage:-12.5,average_ticket_comparison_percentage:3.26},{id:"fake-5",rank:5,name:"Julia Oliveira",salon_name:"",current_services_count:24,current_average_ticket:88,previous_services_count:22,previous_average_ticket:85,count_comparison_percentage:9.09,average_ticket_comparison_percentage:3.53}];var xe=a(1087),me=a(1829),ge=a(199),Oe=a(687),fe=a(20),we=a(638);var ve=e=>{let{handleOpenFilters:t,handleInvalidateCache:a,saving:o}=e;const i=Object(fe.o)(),s=Object(m.a)((e=>e.current_user.permissions)),l=Object(n.useMemo)((()=>[{label:Object(r.b)("words.schedule"),icon:me.a,onClick:()=>i("/calendar"),disabled:!s.can_access_calendar},{label:Object(r.b)("verbs.update"),icon:o?ge.a:c.a,onClick:()=>a(),disabled:o},{label:Object(r.b)("words.filter",{count:2}),icon:Oe.a,onClick:t}]),[a,t,i,s.can_access_calendar,o]);Object(we.a)(l)},ye=a(1455),ke=a(1402),$e=a(2902),Ce=a(877),Ye=a(878),Se=a(1006),ze=a(1158),Me=a(1400);var Ie=e=>{let{active:t,payload:a}=e;if(t&&a&&a.length){const e=a[0].payload;return Object(O.jsxs)(De,{children:[Object(O.jsx)(i.h,{$bold:!0,children:e.name}),Object(O.jsxs)("div",{children:[Object(O.jsxs)(i.h,{$size:12,$color:"gray_1",children:[Object(r.b)("wow.average_ticket"),":"]}),Object(O.jsx)(i.h,{$size:12,$bold:!0,style:{marginLeft:4},children:e.label})]}),Object(O.jsxs)("div",{children:[Object(O.jsxs)(i.h,{$size:12,$color:"gray_1",children:[Object(r.b)("wow.count_sales"),":"]}),Object(O.jsx)(i.h,{$size:12,$bold:!0,style:{marginLeft:4},children:e.count})]}),Object(O.jsxs)("div",{children:[Object(O.jsxs)(i.h,{$size:12,$color:"gray_1",children:[Object(r.b)("words.total"),":"]}),Object(O.jsx)(i.h,{$size:12,$bold:!0,style:{marginLeft:4},children:Object(S.d)(e.total)})]})]})}return null};const De=v.d.div.withConfig({componentId:"wb__sc-tg6rtp-0"})(["background:white;padding:12px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.15);"]),Le=L.e`
  query WebookWowAverageTicket($start_date: String!, $end_date: String!, $salon_id: String) {
    average_ticket: wow_average_ticket(start_date: $start_date, end_date: $end_date, salon_id: $salon_id) {
      current_average_ticket
      current_total_sales
      current_count_sales
      previous_average_ticket
      previous_total_sales
      previous_count_sales
      comparison_percentage
    }
  }
`;var Fe=e=>{var t;return Object(F.f)(Le,{fetchPolicy:"network-only",variables:{salon_id:null===(t=e.current_salon)||void 0===t?void 0:t.id,start_date:e.start_date.format("YYYY-MM-DD"),end_date:e.end_date.format("YYYY-MM-DD")},onError:e=>{N.a.captureException(e),console.log(e)}})};const Ne=e=>{let{filters:t}=e;const a=Object(m.a)((e=>e.is_mobile)),{data:n,loading:o,error:c,refetch:s}=Fe(t),{current_average_ticket:l=0,current_total_sales:d=0,current_count_sales:b=0,previous_average_ticket:j=0,previous_total_sales:p=0,previous_count_sales:h=0,comparison_percentage:_=0}=(null===n||void 0===n?void 0:n.average_ticket)||{},u=[{name:Object(r.b)("wow.previous_period_label"),value:j,label:Object(S.d)(j),count:h,total:p,color:"#D9D9D9"},{name:Object(r.b)("wow.current_period"),value:l,label:Object(S.d)(l),count:b,total:d,color:_>=0?"#52C41A":"#FF4D4F"}];return Object(O.jsxs)(I.a,{style:{height:"100%"},title:Object(r.b)("wow.average_ticket"),extra:Object(O.jsx)(Me.b,{}),children:[Object(O.jsx)(le.a,{loading:o}),Object(O.jsx)(de.a,{visible:!!c,small:!0,showSupportMessage:!1}),Object(O.jsxs)(z.a,{gutter:[16,16],children:[Object(O.jsx)(M.a,{span:24,children:Object(O.jsxs)(Ae,{children:[Object(O.jsxs)(i.h,{$size:16,children:[Object(r.b)("wow.average_ticket")," - ",Object(r.b)("wow.current_period")]}),Object(O.jsx)(i.h,{$size:24,$bold:!0,children:Object(S.d)(l)}),Object(O.jsxs)(V,{rate:_,children:[Object(O.jsxs)(i.h,{style:{lineHeight:1},children:[Object(r.b)("wow.previous_period"),":"]}),Object(O.jsx)(i.h,{$mLeft:5,$bold:!0,children:Object(S.u)(_,{symbol_position:"right",precision:0})})]})]})}),Object(O.jsx)(M.a,{span:24,children:Object(O.jsxs)(We,{children:[Object(O.jsx)(i.h,{$size:16,$alignCenter:!0,$block:!0,style:{marginBottom:16},children:Object(r.b)("wow.period_comparison")}),Object(O.jsx)(y.a,{width:"100%",height:a?220:290,children:Object(O.jsxs)(ke.a,{data:0===b?Re:u,children:[Object(O.jsx)($e.a,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),Object(O.jsx)(Ce.a,{dataKey:"name",tick:{fontSize:12},angle:0,textAnchor:"middle",height:40}),Object(O.jsx)(Ye.a,{tick:{fontSize:12},tickFormatter:e=>Object(S.d)(e,{precision:0})}),Object(O.jsx)($.a,{content:Object(O.jsx)(Ie,{}),cursor:{fill:"rgba(0, 0, 0, 0.05)"}}),Object(O.jsx)(Se.a,{dataKey:"value",radius:[8,8,0,0],barSize:a?60:80,children:u.map(((e,t)=>Object(O.jsx)(ze.a,{fill:e.color},`cell-${t}`)))})]})})]})})]}),0===(!o&&b)&&Object(O.jsx)(D.a,{children:Object(O.jsx)(I.b,{title:Object(r.b)("wow.average_ticket"),module:Object(r.b)("words.sale",{count:2}).toLocaleLowerCase(),actions:["sale"],afterSave:()=>s()})})]})};Ne.displayName="AverageTicket";var Ee=Object(n.memo)(Ne);const Re=[{name:Object(r.b)("wow.previous_period_label"),value:Math.floor(1e3*Math.random())},{name:Object(r.b)("wow.current_period"),value:Math.floor(1e3*Math.random())}],Ae=v.d.div.withConfig({componentId:"wb__sc-jvnz8w-0"})(["border:1px solid #f0f0f0;border-radius:8px;padding:24px;display:flex;flex-direction:column;align-items:center;justify-content:center;"]),We=v.d.div.withConfig({componentId:"wb__sc-jvnz8w-1"})(["border-radius:8px;padding:20px;border:1px solid #f0f0f0;"]);var qe=a(942);const Pe=L.e`
  query WebookWowSchedulesPerDay($start_date: String!, $end_date: String!, $salon_id: String) {
    schedules_per_day: wow_schedules_per_day(start_date: $start_date, end_date: $end_date, salon_id: $salon_id) {
      total
      schedules {
        x y
      }
      period_difference
    }
  }
`;var Ke=e=>{var t;return Object(F.f)(Pe,{fetchPolicy:"network-only",variables:{salon_id:null===(t=e.current_salon)||void 0===t?void 0:t.id,start_date:e.start_date.format("YYYY-MM-DD"),end_date:e.end_date.format("YYYY-MM-DD")},onError:e=>{N.a.captureException(e),console.log(e)}})},Te=a(3050),Be=a(3051),He=a(843);const Ve=e=>{let{filters:t}=e;const a=Object(m.a)((e=>e.is_mobile)),{data:n,loading:c,refetch:l}=Ke(t),{total:b=0,period_difference:j=0,schedules:p=[]}=(null===n||void 0===n?void 0:n.schedules_per_day)||{},h=Object(v.f)();if(!c&&0===b)return Object(O.jsx)(I.b,{as:me.a,module:Object(r.b)("words.scheduling_other").toLocaleLowerCase(),actions:["calendar"],afterSave:()=>l(),style:{height:"100%"}});const _=j>=0;return Object(O.jsx)(He.a,{loading:c,title:Object(r.b)("words.scheduling_other"),total:`${b}`,avatar:Object(O.jsx)(me.a,{}),action:Object(O.jsx)(d.a,{title:Object(O.jsx)(o.a,{i18nKey:"wow.tooltip_comparison",components:[Object(O.jsx)("br",{})],values:{model:Object(r.b)("words.scheduling_other").toLocaleLowerCase()}}),trigger:["hover","click"],placement:"left",children:Object(O.jsx)(s.a,{})}),footer:Object(O.jsxs)(qe.a,{icon:_?Object(O.jsx)(Te.a,{}):Object(O.jsx)(Be.a,{}),color:_?"success":"error",children:[Object(O.jsx)(i.h,{$semibold:!0,children:Object(S.u)(j,{symbol_position:"right",precision:0})}),Object(O.jsx)(i.h,{$semibold:!0,style:{marginLeft:4},children:Object(r.b)("wow.growth_rate")})]}),children:Object(O.jsx)(y.a,{width:"100%",height:70,children:Object(O.jsxs)(k.a,{data:p,children:[Object(O.jsx)("defs",{children:Object(O.jsxs)("linearGradient",{id:"colorSchedules",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(O.jsx)("stop",{offset:"5%",stopColor:h.colors.primary,stopOpacity:.4}),Object(O.jsx)("stop",{offset:"95%",stopColor:h.colors.primary,stopOpacity:0})]})}),Object(O.jsx)($.a,{trigger:a?"click":"hover",content:e=>Object(O.jsx)(Y.a,{...e})}),Object(O.jsx)(C.a,{type:"monotone",dataKey:"y",stroke:h.colors.primary,strokeWidth:2.5,fill:"url(#colorSchedules)",animationDuration:800})]})})})};Ve.displayName="SchedulesPerDay";var Je=Object(n.memo)(Ve),Ue=a(2831),Ge=a(844),Qe=a(2996),Xe=a(2777),Ze=a(928),et=a(538);const tt=e=>{let{data:t}=e;const a=Object(v.f)(),o=Object(m.a)((e=>e.is_mobile)),c=Object(n.useMemo)((()=>t.map((e=>{const{label:t,color:a}=(n=e.title,{confirmed:{label:Object(r.b)("words.confirmed"),color:G.a.calendar_confirmed},unconfirmed:{label:Object(r.b)("words.unconfirmed"),color:G.a.calendar_unconfirmed},disconfirm:{label:Object(r.b)("words.canceled"),color:G.a.calendar_disconfirm},waiting:{label:Object(r.b)("verbs.waiting"),color:G.a.calendar_waiting}}[n]||{label:n,color:"#AAAAAA"});var n;return{name:t,value:e.total,fill:a}}))),[t]),s=Object(n.useMemo)((()=>t.reduce(((e,t)=>e+t.total),0)),[t]);return Object(O.jsxs)(nt,{children:[Object(O.jsx)(i.h,{$semibold:!0,$size:16,children:Object(r.b)("wow.schedules_by_status")}),Object(O.jsxs)(rt,{children:[Object(O.jsx)(y.a,{width:"100%",height:o?200:160,children:Object(O.jsxs)(Qe.a,{children:[Object(O.jsxs)(Xe.a,{data:c,innerRadius:"70%",outerRadius:"100%",startAngle:90,endAngle:-270,paddingAngle:0,dataKey:"value",children:[c.map(((e,t)=>Object(O.jsx)(ze.a,{fill:e.fill},`cell-${t}`))),Object(O.jsx)(Ze.a,{value:`${Object(r.b)("words.total")}: ${s}`,position:"center",fill:a.colors.default_text})]}),Object(O.jsx)($.a,{content:Object(O.jsx)(at,{total:s})})]})}),Object(O.jsx)(ot,{children:c.map((e=>Object(O.jsxs)(it,{children:[Object(O.jsxs)(et.a,{children:[Object(O.jsx)(ct,{$color:e.fill}),Object(O.jsx)(st,{title:e.name,children:e.name})]}),Object(O.jsxs)(lt,{children:[e.value,"\xa0 (",Object(S.u)(Object(S.j)(s,e.value),{symbol_position:"right",precision:0}),")"]})]},e.name)))})]})]})};tt.displayName="SchedulesStatus";const at=e=>{let{active:t,payload:a,total:n}=e;if(!t||null===a||void 0===a||!a.length)return null;const r=a[0].payload,o=Object(S.j)(n,r.value);return Object(O.jsxs)(dt,{children:[Object(O.jsx)(bt,{$color:r.fill}),Object(O.jsxs)("span",{children:[r.name,": ",r.value]}),Object(O.jsxs)("span",{children:["(",Object(S.u)(o,{symbol_position:"right",precision:0}),")"]})]})};at.displayName="CustomTooltip";const nt=v.d.div.withConfig({componentId:"wb__sc-10z875i-0"})(["width:100%;height:100%;display:flex;flex-direction:column;"]),rt=v.d.div.withConfig({componentId:"wb__sc-10z875i-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;flex:1;"]),ot=v.d.div.withConfig({componentId:"wb__sc-10z875i-2"})(["display:flex;flex-direction:column;gap:8px;width:100%;"]),it=v.d.div.withConfig({componentId:"wb__sc-10z875i-3"})(["display:flex;align-items:center;justify-content:space-between;gap:8px;"]),ct=v.d.div.withConfig({componentId:"wb__sc-10z875i-4"})(["width:12px;height:12px;border-radius:50%;background-color:",";flex-shrink:0;"],(e=>{let{$color:t}=e;return t})),st=Object(v.d)(i.h).withConfig({componentId:"wb__sc-10z875i-5"})(["flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:120px;"]),lt=Object(v.d)(i.h).withConfig({componentId:"wb__sc-10z875i-6"})(["font-weight:600;white-space:nowrap;"]),dt=v.d.div.withConfig({componentId:"wb__sc-10z875i-7"})(["background-color:#FFFFFF;border:1px solid #E8E8E8;border-radius:12px;padding:8px 12px;display:flex;align-items:center;gap:8px;box-shadow:0 2px 8px rgba(0,0,0,0.15);"]),bt=v.d.div.withConfig({componentId:"wb__sc-10z875i-8"})(["width:10px;height:10px;border-radius:50%;background-color:",";"],(e=>{let{$color:t}=e;return t}));var jt=tt;const pt=e=>{let{payload:t,active:a}=e;if(!a)return null;const n=((t||[])[0]||{}).payload||{};return Object(O.jsxs)(Y.b,{children:[Object(O.jsx)(i.h,{children:Object(r.b)("wow.schedules_created",{count:n.y})}),Object(O.jsx)(i.h,{children:je()(n.x,"YYYY-MM-DD").format("L")})]})};pt.displayName="SchedulesChartTooltip";var ht=pt;const _t=e=>{let{data:t}=e;const a=Object(v.f)(),n=Object(m.a)((e=>e.is_mobile));return Object(O.jsx)(y.a,{width:"100%",height:320,children:Object(O.jsxs)(ke.a,{data:t,margin:{top:20,right:10,left:-10,bottom:5},children:[Object(O.jsx)($e.a,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),Object(O.jsx)(Ce.a,{dataKey:"x",tickFormatter:e=>je()(e,"YYYY-MM-DD").format(n?"DD/MM":"DD/MM/YY"),tick:{fontSize:12},tickLine:!1,axisLine:{stroke:"#d9d9d9"}}),!n&&Object(O.jsx)(Ye.a,{allowDecimals:!1,tick:{fontSize:12},tickLine:!1,axisLine:{stroke:"#d9d9d9"}}),Object(O.jsx)($.a,{content:e=>Object(O.jsx)(ht,{...e}),cursor:{fill:"rgba(0, 0, 0, 0.05)"}}),Object(O.jsx)(Se.a,{dataKey:"y",fill:a.colors.primary,radius:[8,8,0,0],maxBarSize:60})]})})};_t.displayName="SchedulesChart";var ut=_t;const xt=e=>{const{title:t,data:a,formatter:n=(e=>Object(S.d)(e,{cents:!1}))}=e;return Object(O.jsxs)(mt,{children:[Object(O.jsx)(i.h,{$size:20,children:t}),Object(O.jsx)(Ot,{children:a.map(((e,t)=>Object(O.jsxs)("li",{children:[Object(O.jsx)("span",{className:"ranking-item-number "+(t<3?"active":""),children:t+1}),Object(O.jsx)("span",{className:"ranking-item-title",title:e.title,children:e.title}),Object(O.jsx)("span",{className:"ranking-item-value",children:n(e.total)})]},e.title)))})]})};xt.displayName="RankingList";const mt=v.d.div.withConfig({componentId:"wb__sc-10x8h32-0"})(["flex:1;"]);var gt=xt;const Ot=v.d.ul.withConfig({componentId:"wb__sc-10x8h32-1"})(['padding:0;margin:0;list-style:none;max-height:300px;overflow-y:auto;overflow-x:hidden;li{display:flex;align-items:center;padding:8px 12px 8px 0;transition:background-color 0.2s ease;&::before,&::after{display:table;content:" ";}&::after{height:0;clear:both;font-size:0;visibility:hidden;}span{font-size:13rem;color:rgba(0,0,0,.65);line-height:20px;}.ranking-item-number{display:inline-flex;align-items:center;justify-content:center;min-width:24px;height:24px;margin-top:0;margin-right:12px;font-size:12rem;font-weight:600;line-height:24px;text-align:center;background-color:#f5f5f5;border-radius:50%;&.active{color:#fff;background-color:',";box-shadow:0 2px 4px rgba(0,0,0,0.1);}}.ranking-item-title{flex:1;margin-right:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:500;}.ranking-item-value{font-weight:600;color:rgba(0,0,0,.85);}}"],(e=>e.theme.colors.primary)),ft=e=>{const{schedules_data:t,schedules_ranking_data:a,schedules_by_status:n,has_salon_id:o,loading:c,refetch:s}=e,l=t.reduce(((e,t)=>e+t.y),0);return Object(O.jsxs)(wt,{children:[Object(O.jsxs)(vt,{children:[Object(O.jsx)(i.h,{$size:16,$semibold:!0,children:Object(r.b)("wow.visit_trend")}),Object(O.jsx)(ut,{data:0===l?Ge.c:t})]}),!c&&0!==l&&Object(O.jsx)(yt,{children:o?Object(O.jsx)(jt,{data:n}):Object(O.jsx)(gt,{title:Object(r.b)("wow.schedules_ranking"),data:a,formatter:e=>e})}),!c&&0===l&&Object(O.jsx)(D.a,{children:Object(O.jsx)(I.b,{title:Object(r.b)("wow.visit_trend"),module:Object(r.b)("words.scheduling",{count:2}).toLocaleLowerCase(),actions:["calendar"],afterSave:()=>s()})})]})};ft.displayName="ScheduleTab";const wt=v.d.div.withConfig({componentId:"wb__sc-1va5j7u-0"})(["display:flex;flex-wrap:wrap;gap:16px;"]),vt=v.d.div.withConfig({componentId:"wb__sc-1va5j7u-1"})(["flex:1 1 550px;position:relative;"]),yt=v.d.div.withConfig({componentId:"wb__sc-1va5j7u-2"})(["flex:1 1 250px;overflow:hidden;"]);var kt=Object(n.memo)(ft);const $t=L.e`
  query WebookWowRankings($start_date: String!, $end_date: String!, $salon_id: String) {
    rankings: wow_rankings(start_date: $start_date, end_date: $end_date, salon_id: $salon_id) {
      sales_data { x y }
      schedules_data { x y }

      ranking_data { title total }
      schedules_ranking_data { title total }
      schedules_by_status { title total }
    }
  }
`;var Ct=e=>{var t;return Object(F.f)($t,{fetchPolicy:"network-only",variables:{salon_id:null===(t=e.current_salon)||void 0===t?void 0:t.id,start_date:e.start_date.format("YYYY-MM-DD"),end_date:e.end_date.format("YYYY-MM-DD")},onError:e=>{N.a.captureException(e),console.log(e)}})},Yt=a(1071);const St=e=>{let{data:t}=e;const a=Object(v.f)(),n=Object(m.a)((e=>e.is_mobile));return Object(O.jsx)(y.a,{width:"100%",height:320,children:Object(O.jsxs)(ke.a,{data:t,margin:{top:20,right:10,left:-10,bottom:5},children:[Object(O.jsx)($e.a,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),Object(O.jsx)(Ce.a,{dataKey:"x",tickFormatter:e=>je()(e,"YYYY-MM-DD").format(n?"DD/MM":"DD/MM/YY"),tick:{fontSize:12},tickLine:!1,axisLine:{stroke:"#d9d9d9"}}),!n&&Object(O.jsx)(Ye.a,{tick:{fontSize:12},tickLine:!1,axisLine:{stroke:"#d9d9d9"}}),Object(O.jsx)($.a,{content:e=>Object(O.jsx)(Yt.a,{...e}),cursor:{fill:"rgba(0, 0, 0, 0.05)"}}),Object(O.jsx)(Se.a,{dataKey:"y",fill:a.colors.primary,radius:[8,8,0,0],maxBarSize:60})]})})};St.displayName="SoldPerDayChart";var zt=St;const Mt=e=>{let{sales_data:t,ranking_data:a,has_salon_id:n,loading:o,refetch:c}=e;const s=t.reduce(((e,t)=>e+t.y),0);return Object(O.jsxs)(It,{children:[Object(O.jsxs)(Dt,{children:[Object(O.jsx)(i.h,{$semibold:!0,$size:16,children:Object(r.b)("wow.sales_per_day")}),Object(O.jsx)(zt,{data:0===s?Ge.a:t})]}),!n&&Object(O.jsx)(Lt,{children:Object(O.jsx)(gt,{title:Object(r.b)("wow.sales_ranking"),data:a})}),!o&&0===s&&Object(O.jsx)(D.a,{children:Object(O.jsx)(I.b,{title:Object(r.b)("wow.sales_per_day"),module:Object(r.b)("words.sale",{count:2}).toLocaleLowerCase(),actions:["sale","package"],afterSave:()=>c()})})]})};Mt.displayName="SalesTab";const It=v.d.div.withConfig({componentId:"wb__sc-1dqcn37-0"})(["display:flex;flex-wrap:wrap;gap:16px;"]),Dt=v.d.div.withConfig({componentId:"wb__sc-1dqcn37-1"})(["flex:1 1 550px;position:relative;"]),Lt=v.d.div.withConfig({componentId:"wb__sc-1dqcn37-2"})(["flex:1 1 250px;overflow:hidden;"]);var Ft=Object(n.memo)(Mt);const Nt=e=>{var t;let{filters:a}=e;const[o,i]=Object(n.useState)("schedules"),{data:c,loading:s,refetch:l,error:d}=Ct(a),{sales_data:b=[],schedules_data:j=[],schedules_ranking_data:p=[],ranking_data:h=[],schedules_by_status:_=[]}=(null===c||void 0===c?void 0:c.rankings)||{},u=!(null===(t=a.current_salon)||void 0===t||!t.id),x=Object(n.useMemo)((()=>[{key:"schedules",label:Object(r.b)("words.scheduling_other"),children:Object(O.jsx)(kt,{schedules_data:j,schedules_ranking_data:p,schedules_by_status:_,has_salon_id:u,loading:s,refetch:l})},{key:"sales",label:Object(r.b)("words.sale_other"),children:Object(O.jsx)(Ft,{sales_data:b,ranking_data:h,has_salon_id:u,loading:s,refetch:l})}]),[u,s,h,l,b,_,j,p]);return Object(O.jsxs)(I.a,{children:[Object(O.jsx)(le.a,{loading:s}),Object(O.jsx)(de.a,{visible:!!d,small:!0,showSupportMessage:!1}),Object(O.jsx)(Rt,{activeKey:o,onChange:i,size:"large",items:x})]})};Nt.displayName="RankingsCharts";var Et=Object(n.memo)(Nt);const Rt=Object(v.d)(Ue.a).withConfig({componentId:"wb__sc-msqiy0-0"})([".ant-tabs-tab{padding:0 0 16rem 0 !important;}"]),At=L.e`
  query WebookWowHeatMap($start_date: String!, $end_date: String!, $salon_id: String) {
    heat_map: wow_heat_map(start_date: $start_date, end_date: $end_date, salon_id: $salon_id) {
      calendars
    }
  }
`;var Wt=e=>{var t;return Object(F.f)(At,{fetchPolicy:"network-only",variables:{salon_id:null===(t=e.current_salon)||void 0===t?void 0:t.id,start_date:e.start_date.format("YYYY-MM-DD"),end_date:e.end_date.format("YYYY-MM-DD")},onError:e=>{N.a.captureException(e),console.log(e)}})},qt=a(2780),Pt=a.n(qt);const Kt=[0,1,2,3,4,5,6],Tt=e=>{let{filters:t}=e;const a=Object(m.a)((e=>e.current_user.salon)),o=Object(m.a)((e=>e.is_mobile)),i=a.calendar_end_hour-a.calendar_start_hour,{data:{heat_map:c}={},loading:l,refetch:b}=Wt(t),j=JSON.parse((null===c||void 0===c?void 0:c.calendars)||"[]"),p=Object(n.useMemo)((()=>[1,2,3,4,5,6,0].map((e=>je()().day(e).format(o?"ddd":"dddd")))),[o]),h=Object(n.useMemo)((()=>new Array(i).fill(0).map(((e,t)=>je()(`0${a.calendar_start_hour}:00`,"HH:mm").add(t,"hour").format("HH:mm")))),[i,a.calendar_start_hour]),_=Object(n.useMemo)((()=>h.map((e=>Kt.map((t=>{const a=je()(e,"HH:mm").format("H");return j[`[${t}, ${a}]`]||0}))))),[j,h]),u=Object(n.useMemo)((()=>h.map((()=>Kt.map((()=>Math.floor(10*Math.random())))))),[h]),x=!l&&0===Object.keys(j).length;return Object(O.jsxs)(I.a,{style:{height:"100%",marginBottom:10},title:Object(r.b)("wow.heat_map"),extra:Object(O.jsx)(d.a,{trigger:["hover","click"],placement:"left",title:Object(r.b)("wow.heat_map_tooltip"),children:Object(O.jsx)(s.a,{})}),children:[Object(O.jsx)(le.a,{loading:l}),Object(O.jsx)(Pt.a,{xLabels:p,yLabels:h.map((e=>je()(e,"HH:mm").format("H[h]"))),xLabelsLocation:"bottom",data:x?u:_,height:35,cellStyle:(e,t,a,n)=>({background:`rgba(80, 90, 251, ${1-(n-t)/(n-a)})`}),cellRender:e=>e,title:e=>e}),x&&Object(O.jsx)(D.a,{children:Object(O.jsx)(I.b,{title:Object(r.b)("wow.heat_map"),module:Object(r.b)("words.scheduling",{count:2}).toLocaleLowerCase(),actions:["calendar"],afterSave:()=>b()})})]})};Tt.displayName="HeatMapChart";var Bt=Object(n.memo)(Tt),Ht=a(2853),Vt=a(610);const Jt=e=>{let{show_filters:t,filters:a,tooltip_title:n,handleChangeFilters:o}=e;const{start_date:c,end_date:s,current_salon:l}=a,b=Object(m.a)((e=>(e.current_user.user_organizations.map((e=>{let{organization:t}=e;return t})).map((e=>e.salons||[])).flat()||[]).filter((e=>e.active)).sort(((e,t)=>e.name.localeCompare(t.name))))),j=b.length>1;return Object(O.jsxs)(Vt.a,{$visible:t,children:[Object(O.jsxs)(Vt.b,{children:[Object(O.jsxs)(i.g,{$alignCenter:!0,justify:"space-between",$bottom:15,children:[Object(O.jsx)(i.h,{$size:14,$semibold:!0,children:Object(r.b)("words.period")}),Object(O.jsx)(d.a,{title:n,children:Object(O.jsx)(Ht.a,{})})]}),Object(O.jsxs)(i.g,{$column:!0,children:[Object(O.jsx)(i.h,{$size:14,children:Object(r.b)("date.start_date")}),Object(O.jsx)(Vt.c,{allowClear:!1,onRangeChange:e=>o({start_date:e[0],end_date:e[1]}),value:c,onChange:e=>o({start_date:e}),format:"LL"}),Object(O.jsx)(i.h,{$size:14,children:Object(r.b)("date.end_date")}),Object(O.jsx)(Vt.c,{allowClear:!1,onRangeChange:e=>o({start_date:e[0],end_date:e[1]}),value:s,onChange:e=>o({end_date:e}),format:"LL"})]})]}),j&&Object(O.jsxs)(Vt.b,{children:[Object(O.jsx)(i.g,{$alignCenter:!0,$bottom:15,children:Object(O.jsx)(i.h,{$size:14,$semibold:!0,children:Object(r.b)("words.subsidiary",{count:2})})}),Object(O.jsx)(_.a,{style:{width:"100%"},value:(null===l||void 0===l?void 0:l.id)||"",onSelect:e=>{const t=b.find((t=>t.id===e));o({current_salon:t})},children:[{id:"",name:Object(r.b)("wow.all_subsidiary"),active:!0},...b].map((e=>Object(O.jsx)(_.a.Option,{value:e.id,children:e.name},e.name)))})]})]})};Jt.displayName="WowFiltersDesktop";var Ut=Object(n.memo)(Jt);const Gt=L.e`
  query WebookWowCacheCreatedAt {
    cache_created_at: wow_cache_created_at {
      created_at
    }
  }
`;var Qt=()=>Object(F.f)(Gt,{fetchPolicy:"network-only",onError:e=>{N.a.captureException(e),console.log(e)}}),Xt=a(2910),Zt=a(2874),ea=a(927);const ta=L.e`
  query WebookWowCalendarsFunnel($start_date: String!, $end_date: String!, $salon_id: String) {
    calendars_funnel: wow_calendars_funnel(start_date: $start_date, end_date: $end_date, salon_id: $salon_id) {
      all_calendars
      confirmed_calendars
      invoiced_calendars
    }
  }
`;var aa=e=>{var t;return Object(F.f)(ta,{fetchPolicy:"network-only",variables:{salon_id:null===(t=e.current_salon)||void 0===t?void 0:t.id,start_date:e.start_date.format("YYYY-MM-DD"),end_date:e.end_date.format("YYYY-MM-DD")},onError:e=>{N.a.captureException(e),console.log(e)}})};const na=e=>{let{filters:t}=e;const{data:{calendars_funnel:a}={},loading:o,refetch:i,error:c}=aa(t),l=Object(v.f)(),{all_calendars:b=0,confirmed_calendars:j=0,invoiced_calendars:p=0}=a||{},h=Object(n.useMemo)((()=>[{value:b||10,name:Object(r.b)("words.all"),fill:"rgb(80, 90, 251)"},{value:j||8,name:Object(r.b)("words.confirmed",{count:2}),fill:"rgba(80, 90, 251, .7)"},{value:p||2,name:Object(r.b)("words.billed",{count:2}),fill:"rgba(80, 90, 251, .3)"}]),[b,j,p]),_=!o&&0===b;return Object(O.jsxs)(I.a,{style:{height:"100%"},title:Object(r.b)("wow.schedules_funnel"),extra:Object(O.jsx)(d.a,{trigger:["hover","click"],placement:"left",title:Object(r.b)("wow.funnel_tooltip"),children:Object(O.jsx)(s.a,{})}),children:[Object(O.jsx)(le.a,{loading:o}),Object(O.jsx)(de.a,{visible:!!c,small:!0,showSupportMessage:!1}),Object(O.jsx)(y.a,{width:"100%",height:280,children:Object(O.jsx)(Xt.a,{children:Object(O.jsx)(Zt.a,{dataKey:"value",data:h,isAnimationActive:!0,animateNewValues:!0,width:"100%",children:Object(O.jsx)(ea.a,{position:"center",fill:l.colors.shark_black,stroke:"none",dataKey:"name",formatter:e=>{const t=h.find((t=>t.name===e)).value;return`${e}: ${t} (${Object(S.u)(Object(S.j)(b,t),{symbol_position:"right",precision:0})})`}})})})}),_&&Object(O.jsx)(D.a,{children:Object(O.jsx)(I.b,{title:Object(r.b)("wow.schedules_funnel"),module:Object(r.b)("words.scheduling",{count:2}).toLocaleLowerCase(),actions:["calendar"],afterSave:i})})]})};na.displayName="FunnelRechart";var ra=Object(n.memo)(na),oa=a(1850),ia=a(116);const ca=L.e`
  mutation WebookWowInvalidateCache {
    wowInvalidateCache(input: {}) {
      success errors
    }
  }
`;var sa=()=>{const[e,{loading:t}]=Object(oa.a)(ca);return[async()=>{try{const{data:t}=await e(),{success:a=!0,errors:n}=(null===t||void 0===t?void 0:t.wowInvalidateCache)||{};return a||null===n||void 0===n||n.map((e=>ia.b.info(e))),{success:a}}catch(t){return N.a.captureException(t),ia.b.error(Object(r.b)("phrases.generic_update_error_message")),console.error(t),{success:!1}}},t]},la=a(1042),da=a(597),ba=a(605);const ja={start_date:je()().subtract(14,"days"),end_date:je()(),current_salon:{id:"",name:Object(r.b)("wow.all_subsidiary"),active:!0}},pa=()=>{var e;const[t,a]=Object(n.useState)(!1),[j,p]=Object(n.useState)(void 0),h=Object(n.useRef)(null),_=Object(m.a)((e=>e.is_mobile)),u=Object(m.a)((e=>e.current_user.salon)),x=Object(m.a)((e=>e.current_user.user_organizations.map((e=>{let{organization:t}=e;return t})).map((e=>e.salons||[])).flat().filter((e=>e.active)))),g=Object(m.a)((e=>e.employees.find((t=>String(t.id)===String(e.current_user.employee_id))))),f=x.length>1,[v,y]=Object(n.useState)((()=>f?ja:{...ja,current_salon:{id:u.id,name:u.name,active:!0}})),{data:{cache_created_at:k}={},loading:$,refetch:C}=Qt(),[S,z]=sa(),M=Object(n.useCallback)((async()=>{const{success:e}=await S();e&&(C(),p(null===k||void 0===k?void 0:k.created_at))}),[null===k||void 0===k?void 0:k.created_at]),I=Object(n.useCallback)((e=>{y((t=>({...t,...e})))}),[]),D=f?(null===(e=v.current_salon)||void 0===e?void 0:e.name)||Object(r.b)("wow.all_subsidiary"):Object(r.b)("greetings.hey",{name:(null===g||void 0===g?void 0:g.first_name)||Object(r.b)("words.user")});ve(Object(n.useMemo)((()=>({handleOpenFilters:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.open(v)},handleInvalidateCache:M,saving:z})),[M,v,z]));const L=Object(n.useCallback)((()=>{var e;_?null===(e=h.current)||void 0===e||e.open(v):a((e=>!e))}),[v,_]),F=Object(n.useMemo)((()=>{const e=v.end_date.diff(v.start_date,"days"),t=je()(v.start_date).subtract(1,"days"),a=je()(t).subtract(e,"days");return 0===e?Object(O.jsx)("span",{children:Object(O.jsx)(o.a,{i18nKey:"wow.daily_comparison",values:{prev_date:a.format("LL"),filter_date:v.start_date.format("LL")},components:[Object(O.jsx)("br",{})],shouldUnescape:!0})}):Object(O.jsx)("span",{children:Object(O.jsx)(o.a,{i18nKey:"wow.range_comparison",values:{prev_start_date:a.format("LL"),prev_end_date:t.format("LL"),filter_start_date:v.start_date.format("LL"),filter_end_date:v.end_date.format("LL")},components:[Object(O.jsx)("br",{})],shouldUnescape:!0})})}),[v.end_date,v.start_date]);return Object(O.jsxs)(l.b,{children:[Object(O.jsxs)(da.b,{title:D,loading:$,children:[Object(O.jsx)(la.a,{show_filters:t,setShowFilters:a}),Object(O.jsx)(d.a,{title:Object(r.b)("wow.last_update",{date:je()(null===k||void 0===k?void 0:k.created_at).fromNow()}),children:Object(O.jsx)(b.a,{onClick:M,loading:$||z,icon:Object(O.jsx)(c.a,{}),type:"primary",children:Object(r.b)("verbs.update")})})]}),Object(O.jsxs)(ha,{$pageFull:!0,children:[Object(O.jsx)(Ut,{show_filters:t,filters:v,tooltip_title:F,handleChangeFilters:I}),Object(O.jsxs)(_a,{style:{overflow:t?"hidden":void 0},children:[Object(O.jsxs)(ba.c,{children:[Object(O.jsx)(b.a,{type:"text",onClick:()=>L(),children:Object(O.jsx)(i.f,{start_date:v.start_date,end_date:v.end_date})}),Object(O.jsx)(d.a,{title:F,trigger:["hover","click"],placement:"bottomLeft",children:Object(O.jsx)(s.a,{style:{marginLeft:8,marginBottom:2}})})]}),Object(O.jsxs)(ua,{children:[Object(O.jsxs)(xa,{children:[Object(O.jsx)(ma,{children:Object(O.jsx)(qe.b,{filters:v})}),Object(O.jsx)(ma,{children:Object(O.jsx)(Je,{filters:v})}),Object(O.jsx)(ma,{children:Object(O.jsx)(Y.c,{filters:v})})]}),Object(O.jsx)(fa,{children:Object(O.jsx)(Et,{filters:v})}),Object(O.jsxs)(ga,{children:[Object(O.jsx)(Oa,{children:Object(O.jsx)(Ee,{filters:v})}),Object(O.jsx)(Oa,{children:Object(O.jsx)(he,{filters:v})})]}),Object(O.jsxs)(ga,{children:[Object(O.jsx)(Oa,{children:Object(O.jsx)(ye.b,{filters:v})}),Object(O.jsx)(Oa,{children:Object(O.jsx)(ra,{filters:v})})]}),Object(O.jsx)(fa,{children:Object(O.jsx)(xe.a,{filters:v})}),Object(O.jsx)(fa,{children:Object(O.jsx)(Bt,{filters:v})})]})]}),Object(O.jsx)(w,{ref:h,onSave:I})]})]},j)};pa.displayName="Wow";t.default=pa;const ha=Object(v.d)(l.c).withConfig({componentId:"wb__sc-tzzvna-0"})(["display:flex;justify-content:center;padding:0 5px 30px;",""],(e=>e.theme.is_mobile&&Object(v.c)(["padding:0 15px ","px;"],(e=>e.theme.sidebar_mobile_bottom_margin)))),_a=Object(v.d)(j.a).withConfig({componentId:"wb__sc-tzzvna-1"})(["width:100%;"," background:unset !important;"],(e=>!e.theme.is_mobile&&Object(v.c)(["margin:0 -5px;padding:0 5px;"]))),ua=v.d.div.withConfig({componentId:"wb__sc-tzzvna-2"})(["display:flex;flex-direction:column;gap:15px;width:100%;"]),xa=v.d.div.withConfig({componentId:"wb__sc-tzzvna-3"})(["display:flex;flex-wrap:wrap;gap:15px;width:100%;"]),ma=v.d.div.withConfig({componentId:"wb__sc-tzzvna-4"})(["flex:1 1 300px;min-width:300px;position:relative;",""],(e=>e.theme.is_mobile&&Object(v.c)(["flex:1 1 100%;min-width:100%;"]))),ga=v.d.div.withConfig({componentId:"wb__sc-tzzvna-5"})(["display:flex;flex-wrap:wrap;gap:15px;width:100%;"]),Oa=v.d.div.withConfig({componentId:"wb__sc-tzzvna-6"})(["flex:1 1 450px;min-width:450px;position:relative;",""],(e=>e.theme.is_mobile&&Object(v.c)(["flex:1 1 100%;min-width:100%;"]))),fa=v.d.div.withConfig({componentId:"wb__sc-tzzvna-7"})(["width:100%;position:relative;"])},605:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return s}));var n=a(19),r=a(543);const o=n.d.div.withConfig({componentId:"wb__sc-w3bl1t-0"})(["padding:15px 25px 25px;background-color:#FFFFFF;box-shadow:0 3px 6px -4px rgba(0,0,0,0.12),0 6px 16px 0 rgba(0,0,0,0.08),0 9px 28px 8px rgba(0,0,0,0.05);"]),i=n.d.div.withConfig({componentId:"wb__sc-w3bl1t-1"})(["padding:0 0 25px;width:100%;height:100%;display:flex;flex-direction:row;"]),c=n.d.div.withConfig({componentId:"wb__sc-w3bl1t-2"})(["padding:0 0 25px 10px;width:100%;height:100%;min-height:400px;"]),s=Object(n.d)(r.a).withConfig({componentId:"wb__sc-w3bl1t-3"})(["display:flex;justify-content:center;align-items:center;padding:4px 0;margin-bottom:8px;border-radius:16px;box-shadow:0 4px 8px 5px #f3f3f3;border:1px solid #F1F2F9;transition:box-shadow .3s ease-in-out;background:#FFFFFF;"])},607:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(0),r=a(50),o=a(340),i=a(538),c=a(159),s=a(2977),l=a(1813),d=a(2843),b=a(250),j=a(679),p=a(647),h=a(613),_=a(19),u=a(27),x=a(22);const m=e=>{let{title:t,as:a,module:r,actions:s=[],afterSave:l,..._}=e;const m=Object(u.a)((e=>e.current_user.permissions)),w=Object(n.useRef)(null),v=Object(n.useRef)(null),y=Object(n.useRef)(null);return Object(x.jsxs)(g,{..._,children:[Object(x.jsx)(f,{image:t?Object(x.jsx)(b.h,{$alignCenter:!0,$size:18,$semibold:!0,children:t}):Object(x.jsx)(b.d,{$size:45,as:a,$color:"primary"}),description:Object(x.jsx)("p",{children:Object(x.jsx)(o.a,{i18nKey:"wow.without_module_create_now",values:{module:r},components:[Object(x.jsx)("br",{}),Object(x.jsx)("strong",{})]})}),children:Object(x.jsx)(i.a,{children:s.map((e=>Object(x.jsx)(c.a,{type:"primary",disabled:!m[`can_create_${e}`],icon:Object(x.jsx)(d.a,{}),onClick:()=>(e=>({sale:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.open()},package:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.open()},calendar:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.open()}}[e]))(e)(),children:O(e)},e)))})}),Object(x.jsx)(h.a,{ref:w,afterSave:l}),Object(x.jsx)(p.a,{ref:v,afterSave:l}),Object(x.jsx)(j.a,{ref:y,afterSave:l})]})};m.displayName="CardEmptyBox",t.b=m;const g=Object(_.d)(s.a).withConfig({componentId:"wb__sc-1ixw6he-0"})(["box-shadow:0 0 10px 2px #f3f3f3;border:1px solid #F1F2F9;overflow:hidden;border-radius:16px;transition:all .3s ease-in-out;.ant-card-head{padding:0 20px;.ant-card-head-title{padding:10px 0;}}.ant-card-body{padding:20px 20px 10px 20px;align-items:center;justify-content:center;}",""],(e=>e.theme.is_mobile&&Object(_.c)([".ant-card-head{padding:0 10px;.ant-card-head-title{padding:10px 0;}}.ant-card-body{padding:10px;align-items:center;justify-content:center;}"]))),O=e=>({calendar:Object(r.b)("words.scheduling"),sale:Object(r.b)("words.sale"),package:Object(r.b)("words.package"),purchase:Object(r.b)("words.purchase")}[e]),f=Object(_.d)(l.a).withConfig({componentId:"wb__sc-1ixw6he-1"})(["margin:0;.ant-empty-image{height:unset;display:flex;justify-content:center;}.ant-empty-footer{margin-top:0;}"])},609:function(e,t,a){"use strict";var n=a(0),r=a(50),o=a(159),i=a(53),c=a.n(i),s=a(19),l=a(22);const d=e=>{let{handleChangeRange:t}=e;return Object(l.jsx)(b,{children:j.map((e=>{let{label:a,value:n}=e;return Object(l.jsx)(o.a,{type:"primary",onClick:()=>t(n),children:a},a)}))})};d.displayName="ExtraRangeComponent",t.a=Object(n.memo)(d);const b=s.d.div.withConfig({componentId:"wb__sc-hoi2yi-0"})(["display:flex;flex-wrap:wrap;justify-content:space-between;padding-top:8px;.ant-btn{cursor:pointer;width:49%;text-align:center;margin-bottom:8px;margin-right:0;}"]),j=[{label:Object(r.b)("words.today"),value:[c()(),c()()]},{label:Object(r.b)("date.last_week"),value:[c()().startOf("week").subtract(1,"week"),c()().endOf("week").subtract(1,"week")]},{label:Object(r.b)("date.last_month"),value:[c()().subtract(1,"month").startOf("month"),c()().subtract(1,"month").endOf("month")]},{label:Object(r.b)("date.current_month"),value:[c()().startOf("month"),c()().endOf("month")]},{label:Object(r.b)("date.six_months_ago"),value:[c()().subtract(6,"month"),c()()]},{label:Object(r.b)("date.one_year_ago"),value:[c()().subtract(12,"month"),c()()]}]},610:function(e,t,a){"use strict";a.d(t,"d",(function(){return p})),a.d(t,"b",(function(){return h})),a.d(t,"c",(function(){return _})),a.d(t,"a",(function(){return u}));var n=a(19),r=a(0),o=a(2934),i=a(609),c=a(22);const s=(e,t)=>{let{onRangeChange:a,...n}=e;const[s,l]=Object(r.useState)(!1),b=Object(r.useCallback)((e=>{a(e)}),[a]);return Object(c.jsx)(o.a,{ref:t,showNow:!1,renderExtraFooter:()=>Object(c.jsx)(d,{children:Object(c.jsx)(i.a,{handleChangeRange:b})}),...n,open:s,onOpenChange:l})};s.displayName="SimpleRangePicker";var l=Object(r.memo)(Object(r.forwardRef)(s));const d=n.d.div.withConfig({componentId:"wb__sc-13lwjt0-0"})(["width:265px;"]),b={true:!0,false:!1,all:null,none:null},j=["start_date","end_date","birthday_start_date","birthday_end_date","start_date_open","start_date_close","end_date_open","end_date_close"],p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},a={};return Object.entries(e).forEach((e=>{let[a,n]=e;n in b&&(t[a]=b[n])})),Object.entries(e).forEach((e=>{let[t,n]=e;j.includes(t)&&(a[t]=null===n||void 0===n?void 0:n.format("YYYY-MM-DD"))})),{...e,...t,...a}},h=n.d.div.withConfig({componentId:"wb__sc-gq8qm5-0"})(["display:flex;flex-direction:column;background-color:",";border-radius:16px;box-shadow:0 0 10px 5px #f3f3f3;padding:15px;border:1px solid rgba(0 0 0 / 3%);transition:box-shadow .1s;margin-bottom:5px;.ant-checkbox-wrapper + .ant-checkbox-wrapper{overflow:hidden;margin-left:0;width:100%;:not(:first-child){overflow:hidden;white-space:nowrap;text-overflow:ellipsis;word-break:keep-all;}}.ant-radio-wrapper{margin-right:0;}.ant-checkbox-group-item{margin-right:0;}.ant-calendar-picker-clear{background:transparent;color:",";}.ant-calendar-picker-input{border-top:none;border-left:none;border-right:none;border-radius:0;margin-top:5px;background:transparent;"," &:focus{box-shadow:none;}}.anticon-calendar{color:rgba(0,0,0,.2);}",""],(e=>e.theme.colors.white),(e=>e.theme.dark&&e.theme.dark_white),(e=>e.theme.dark&&`\n      border-color: ${e.theme.dark_secondary};\n      color: ${e.theme.dark_white};\n    `),(e=>e.tags&&Object(n.c)(["display:flex;flex-wrap:wrap;.ant-tag{margin:0 4px 4px 0;cursor:pointer;}"]))),_=Object(n.d)(l).withConfig({componentId:"wb__sc-gq8qm5-1"})(["width:100%;border-top:none;border-left:none;border-right:none;border-radius:0 !important;margin-top:5px;background:transparent;&.ant-picker-focused{box-shadow:none;}"]),u=n.d.div.withConfig({componentId:"wb__sc-gq8qm5-2"})(["min-width:0;width:0;z-index:210;text-overflow:ellipsis;white-space:nowrap;position:sticky;top:calc(","px + 10px);overflow:hidden;max-height:calc(100vh - 60px);align-self:flex-start;transition:width .2s;",""],(e=>e.theme.menu_top_height),(e=>!!e.$visible&&Object(n.c)(["min-width:230px;width:230px;padding-right:7px;overflow-y:auto;overflow-x:hidden;"])))},638:function(e,t,a){"use strict";var n=a(0),r=a(62),o=a(27);t.a=function(e){let{disabled:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=Object(o.a)((e=>e.is_mobile)),i=Object(r.a)();Object(n.useEffect)((()=>{if(a&&!t)return i({type:"set_mobile_menu_actions",payload:e.filter(Boolean)}),()=>{i({type:"set_mobile_menu_actions",payload:[]})}}),[t,a,e,i])}},731:function(e,t,a){"use strict";var n=a(0),r=a(2937),o=a(2824),i=a(250),c=a(610),s=a(628),l=a(595),d=a(590),b=a(53),j=a.n(b),p=a(50),h=a(539),_=a(22);const u=e=>{let{is_mobile:t,filter:a,form:b}=e;const u=Object(n.useRef)(null),{setFieldsValue:x,getFieldValue:m}=b,{rangepicker:g,label:O}=a,{allowClear:f=!0}=g||{},w=g.start_date_name,v=g.end_date_name,y=m(w),k=m(v),$=function(){if(!(arguments.length<=0?void 0:arguments[0])||!(arguments.length<=1?void 0:arguments[1]))return;const e=j()(arguments.length<=0?void 0:arguments[0]),t=j()(arguments.length<=1?void 0:arguments[1]);e.isAfter(t)?x({[w]:t,[v]:e}):x({[w]:e,[v]:t})};return t?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(r.a.Item,{name:w,noStyle:!0,children:Object(_.jsx)(o.a,{type:"hidden"})}),Object(_.jsx)(r.a.Item,{name:v,noStyle:!0,children:Object(_.jsx)(o.a,{type:"hidden"})}),Object(_.jsxs)(d.a,{header:O,children:[Object(_.jsx)(l.a,{style:{padding:"0 15px"},withRightArrow:!0,onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.open()},children:Object(_.jsx)("div",{style:{display:"flex",alignItems:"center"},children:y&&k?Object(_.jsxs)(_.Fragment,{children:[y.format("LL"),"\xa0",Object(_.jsx)(h.a,{}),"\xa0",k.format("LL")]}):Object(p.b)("date.select_range")})}),Object(_.jsx)(s.a,{ref:u,defaultValue:y&&k?[y.toDate(),k.toDate()]:void 0,onConfirm:$,type:"range"})]})]}):Object(_.jsxs)(i.g,{$column:!0,children:[Object(_.jsx)(r.a.Item,{name:w,noStyle:!0,children:Object(_.jsx)(c.c,{onRangeChange:e=>{x({[w]:e[0],[v]:e[1]})},onChange:e=>x({[w]:e}),format:"LL",placeholder:Object(p.b)("date.start_date"),allowClear:f})}),Object(_.jsx)(r.a.Item,{name:v,noStyle:!0,children:Object(_.jsx)(c.c,{onRangeChange:e=>{x({[w]:e[0],[v]:e[1]})},onChange:e=>x({[v]:e}),format:"LL",placeholder:Object(p.b)("date.end_date"),allowClear:f})})]})};u.displayName="RangePickerFilter",t.a=u},773:function(e,t,a){"use strict";a.d(t,"a",(function(){return Y})),a.d(t,"b",(function(){return S}));var n=a(0),r=a(50),o=a(852),i=a(250),c=a(942),s=a(579),l=a(2901),d=a(1777),b=a(2837),j=a(1048),p=a(3037),h=a(3048),_=a(19),u=a(27),x=a(37),m=a(405),g=a(76);const O=x.e`
  query WebookWowSalesPerDay($start_date: String!, $end_date: String!, $salon_id: String) {
    sales_per_day: wow_sales_per_day(start_date: $start_date, end_date: $end_date, salon_id: $salon_id) {
      total
      inventory_sales {
        x y
      }
      conversion_rate
    }
  }
`;var f=e=>{var t;return Object(m.f)(O,{fetchPolicy:"network-only",variables:{salon_id:null===(t=e.current_salon)||void 0===t?void 0:t.id,start_date:e.start_date.format("YYYY-MM-DD"),end_date:e.end_date.format("YYYY-MM-DD")},onError:e=>{g.a.captureException(e),console.log(e)}})},w=a(607),v=a(843),y=a(53),k=a.n(y),$=a(22);const C=e=>{let{filters:t}=e;const a=Object(_.f)(),n=Object(u.a)((e=>e.is_mobile)),{data:x,loading:m,refetch:g}=f(t),{total:O=0,conversion_rate:y=0,inventory_sales:k=[]}=(null===x||void 0===x?void 0:x.sales_per_day)||{};return m||0!==O?Object($.jsx)(v.a,{loading:m,title:Object(r.b)("words.sale_other"),total:`${O}`,avatar:Object($.jsx)(p.a,{}),action:Object($.jsx)(o.a,{title:Object(r.b)("wow.sales_per_day_tooltip"),trigger:["hover","click"],placement:"left",children:Object($.jsx)(h.a,{})}),footer:Object($.jsxs)(c.a,{color:"purple",children:[Object($.jsx)(i.h,{$semibold:!0,children:Object(s.u)(y,{symbol_position:"right",precision:0})}),Object($.jsx)(i.h,{$semibold:!0,style:{marginLeft:4},children:Object(r.b)("wow.conversion_rate")})]}),children:Object($.jsx)(l.a,{width:"100%",height:70,children:Object($.jsxs)(d.a,{data:k,children:[Object($.jsx)("defs",{children:Object($.jsxs)("linearGradient",{id:"colorSales",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object($.jsx)("stop",{offset:"5%",stopColor:a.colors.purple,stopOpacity:.4}),Object($.jsx)("stop",{offset:"95%",stopColor:a.colors.purple,stopOpacity:0})]})}),Object($.jsx)(b.a,{trigger:n?"click":"hover",content:e=>Object($.jsx)(Y,{...e})}),Object($.jsx)(j.a,{type:"monotone",dataKey:"y",stroke:a.colors.purple,strokeWidth:2.5,fill:"url(#colorSales)",animationDuration:800})]})})}):Object($.jsx)(w.b,{as:p.a,module:Object(r.b)("words.sale_other").toLocaleLowerCase(),actions:["sale"],afterSave:()=>g(),style:{height:"100%"}})};C.displayName="SalesPerDay";t.c=Object(n.memo)(C);const Y=e=>{let{payload:t}=e;return null!==t&&void 0!==t&&t.length?Object($.jsx)(S,{children:Object($.jsxs)(i.h,{children:[k()(t[0].payload.x,"YYYY/MM/DD").format("L"),": ",t[0].value]})}):null},S=_.d.div.withConfig({componentId:"wb__sc-1xh5nt1-0"})(["background-color:#FFFFFF;padding:10px 20px;box-shadow:0 0 15px 0 rgba(0,0,0,.2);border-radius:8px;margin-right:10px;display:flex;align-items:center;flex-direction:column;"])},783:function(e,t,a){"use strict";var n=a(609),r=a(22);const o=e=>{let{form:t,closable:a=!1}=e;return Object(r.jsx)(n.a,{handleChangeRange:e=>{t.setFieldsValue({start_date:e[0],end_date:e[1]}),a&&t.submit()}})};o.displayName="RangeComponentMobile",t.a=o},808:function(e,t,a){"use strict";var n=a(0),r=a(250),o=a(19),i=a(22);const c=e=>{let{setVisible:t,children:a,...n}=e;return Object(i.jsx)(s,{onClose:()=>t(!1),width:"100%",height:"100%",placement:"bottom",...n,children:a})};c.displayName="FiltersDrawer",t.a=Object(n.memo)(c);const s=Object(o.d)(r.a).withConfig({componentId:"wb__sc-kgs7nw-0"})(["z-index:1051;.ant-drawer-header{background-color:#f8f8f8;}.ant-drawer-body{position:relative;background-color:#f8f8f8;padding:0 15px !important;}"])},816:function(e,t,a){"use strict";a(0);var n=a(19),r=a(22);const o=e=>{let{children:t}=e;return Object(r.jsx)(i,{children:t})};o.displayName="EmptyContainer",t.a=o;const i=n.d.div.withConfig({componentId:"wb__sc-pii2qx-0"})(["position:absolute;background-color:rgba(255,255,255,0.6);top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;"])},843:function(e,t,a){"use strict";a(0);var n=a(250),r=a(117),o=a(607),i=a(339),c=a(19),s=a(22);t.a=e=>{const{title:t,avatar:a,action:c,total:b,footer:j,children:p,loading:h,..._}=e;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(i.a,{loading:h}),Object(s.jsx)(o.a,{style:{height:"100%"},..._,children:Object(s.jsxs)(l,{children:[Object(s.jsxs)("div",{className:"header",children:[Object(s.jsxs)("div",{className:"header-top",children:[Object(s.jsxs)("div",{className:"header-left",children:[a&&Object(s.jsx)("div",{className:"icon-wrapper",style:{background:`${r.a.primary}15`,color:r.a.primary},children:a}),Object(s.jsx)(n.h,{$size:16,children:t})]}),Object(s.jsx)("div",{children:c})]}),d(b)]}),p&&Object(s.jsx)("div",{className:"chart-wrapper",children:p}),j&&Object(s.jsx)("div",{className:"card-footer",children:j})]})})]})};const l=c.d.div.withConfig({componentId:"wb__sc-19z7smt-0"})([".header{display:flex;flex-direction:column;gap:12px;}.header-top{display:flex;align-items:center;}.header-left{display:flex;align-items:center;gap:12px;flex:1;}.icon-wrapper{width:40px;height:40px;border-radius:12px;display:flex;justify-content:center;font-size:24px;}.total{font-size:28px;color:rgba(0,0,0,0.85);line-height:1.2;}.chart-wrapper{margin:8px -8px;}.card-footer{padding-top:8px;border-top:1px solid #f0f0f0;}"]),d=e=>{if(!e)return null;switch(typeof e){case"undefined":return null;case"function":return Object(s.jsx)("div",{className:"total",children:e()});default:return Object(s.jsx)("div",{className:"total",children:e})}}},844:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return l}));var n=a(53),r=a.n(n);const o=[0,1,2,3,4,5,6,7,8,9,11,12],i=(e,t)=>o.map(((a,n)=>({x:r()().subtract(n,"day").format("YYYY-MM-DD"),y:Math.random()*(e-t)+t}))).reverse(),c=i(1e3,200),s=i(100,10),l=[{x:"1",y:5},{x:"2",y:10},{x:"3",y:15}]},942:function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var n=a(0),r=a(50),o=a(852),i=a(2883),c=a(547),s=a(340),l=a(250),d=a(579),b=a(3036),j=a(3048),p=a(3050),h=a(3051),_=a(37),u=a(405),x=a(76);const m=_.e`
  query WebookWowTotalSales($start_date: String!, $end_date: String!, $salon_id: String) {
    total_sales: wow_total_sales(start_date: $start_date, end_date: $end_date, salon_id: $salon_id) {
      total
      daily_sales
      rate
    }
  }
`;var g=e=>{var t;return Object(u.f)(m,{fetchPolicy:"network-only",variables:{salon_id:null===(t=e.current_salon)||void 0===t?void 0:t.id,start_date:e.start_date.format("YYYY-MM-DD"),end_date:e.end_date.format("YYYY-MM-DD")},onError:e=>{x.a.captureException(e),console.log(e)}})},O=a(843),f=a(607),w=a(19),v=a(22);const y=e=>{let{filters:t}=e;const{data:a,loading:n,refetch:c}=g(t),{total:_=0,daily_sales:u=0,rate:x=0}=(null===a||void 0===a?void 0:a.total_sales)||{};if(!n&&0===_)return Object(v.jsx)(f.b,{as:b.a,module:Object(r.b)("wow.sale_other").toLocaleLowerCase(),actions:["sale","package"],afterSave:()=>c(),style:{height:"100%"}});const m=x>=0;return Object(v.jsx)(O.a,{loading:n,title:Object(r.b)("wow.total_sales"),total:Object(d.d)(_,{cents:!1}),avatar:Object(v.jsx)(b.a,{}),action:Object(v.jsx)(o.a,{title:Object(v.jsx)(s.a,{i18nKey:"wow.tooltip_comparison",components:[Object(v.jsx)("br",{})],values:{model:Object(r.b)("wow.sale_other").toLocaleLowerCase()}}),trigger:["hover","click"],placement:"left",children:Object(v.jsx)(j.a,{})}),footer:Object(v.jsxs)(k,{icon:m?Object(v.jsx)(p.a,{}):Object(v.jsx)(h.a,{}),color:m?"success":"error",children:[Object(v.jsx)(l.h,{$semibold:!0,children:Object(d.u)(x,{symbol_position:"right",precision:0})}),Object(v.jsx)(l.h,{$semibold:!0,style:{marginLeft:4},children:Object(r.b)("wow.previous_period")})]}),children:Object(v.jsxs)(l.g,{$column:!0,$paddings:8,children:[Object(v.jsx)(i.a,{children:Object(v.jsx)(l.h,{$color:"gray_1",children:Object(r.b)("wow.daily_sales")})}),Object(v.jsx)(i.a,{children:Object(v.jsx)(l.h,{$size:18,$semibold:!0,children:Object(d.d)(u,{cents:!1,precision:2})})})]})})};y.displayName="TotalSales";t.b=Object(n.memo)(y);const k=Object(w.d)(c.a).withConfig({componentId:"wb__sc-txu9is-0"})(["padding:6px 12px;border-radius:20px;.anticon{font-size:14rem;}"])}}]);
//# sourceMappingURL=48.cd523848.chunk.js.map