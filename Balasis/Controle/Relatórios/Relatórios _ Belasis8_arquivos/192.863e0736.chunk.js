(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[192],{2938:function(e,t,c){"use strict";c.r(t);var a=c(0),i=c(2883),n=c(250),s=c(1804),d=c(2937),r=c(2824),l=c(624),o=c(27),b=c(50),j=c(22);const u=()=>{const[e,t]=Object(a.useState)(!1),[c,i]=Object(a.useState)(),s=Object(o.a)((e=>e.current_user.permissions)),u=Object(l.b)((e=>e.dispatch)),p=Object(l.b)((e=>e.schedule_group.obs)),h=Object(l.b)((e=>e.schedule_group.id)),_=Object(l.b)((e=>{var t;return null===(t=e.schedule_group.inventory_sale)||void 0===t?void 0:t.finished}));Object(a.useEffect)((()=>{e||p&&(i(p),t(!0))}),[e,p]);const O=h?s.can_edit_calendar:s.can_create_calendar;return Object(j.jsx)(n.g,{$isFlex:!1,$column:!0,$mBottom:60,children:Object(j.jsx)(d.a,{layout:"vertical",children:Object(j.jsx)(d.a.Item,{label:Object(b.b)("words.observation",{count:2}),children:Object(j.jsx)(r.a.TextArea,{size:"large",value:c,disabled:_||!O,placeholder:Object(b.b)("input.text_area_placeholder"),onChange:e=>{const t=e.target.value;i(t),u({type:"change_observation",payload:t})}})})})})};u.displayName="ObservationInput";var p=Object(a.memo)(u),h=c(19),_=c(2934),O=c(919),g=c(763),m=c(621);const v=()=>{const e=Object(o.a)((e=>e.current_user.permissions)),t=Object(l.b)((e=>e.headerRef)),c=Object(l.b)((e=>e.schedule_group.date)),a=Object(l.b)((e=>e.schedule_group.status)),s=Object(l.b)((e=>{var t;return null===(t=e.schedule_group.client)||void 0===t?void 0:t.id})),r=Object(l.b)((e=>e.schedule_group.id)),u=Object(l.b)((e=>{var t;return null===(t=e.schedule_group.inventory_sale)||void 0===t?void 0:t.finished})),p=Object(l.b)((e=>{var t;return null===(t=e.schedule_group.schedule_color)||void 0===t?void 0:t.id})),h=Object(l.b)((e=>e.dispatch)),v=r?e.can_edit_calendar:e.can_create_calendar;return Object(j.jsx)(d.a,{layout:"vertical",children:Object(j.jsxs)(n.g,{gutter:8,children:[Object(j.jsx)(i.a,{span:10,ref:t,children:Object(j.jsx)(d.a.Item,{label:Object(b.b)("words.client"),children:Object(j.jsx)(m.a,{size:"large",value:s,disabled:u||!v,showCreateButton:!0,onChange:(e,t)=>{return c=t.item,void h({type:"change_client",payload:c});var c}})})}),Object(j.jsx)(i.a,{span:4,children:Object(j.jsx)(d.a.Item,{label:Object(b.b)("words.date"),children:Object(j.jsx)(_.a,{size:"large",value:c,allowClear:!1,format:"L",disabled:u||!v,onChange:e=>{e&&h({type:"change_date",payload:e})},style:{width:"100%"}})})}),Object(j.jsx)(i.a,{span:5,children:Object(j.jsx)(d.a.Item,{label:Object(b.b)("words.status"),children:Object(j.jsx)(O.a,{size:"large",value:a,disabled:u||!v,use_default_status:!0,onChange:e=>h({type:"change_status",payload:e})})})}),Object(j.jsx)(i.a,{span:5,style:{paddingRight:0},children:Object(j.jsx)(d.a.Item,{label:Object(b.b)("words.color"),children:Object(j.jsx)(g.b,{size:"large",allowClear:!0,disabled:u||!v,value:p,onChange:(e,t)=>{return c=null===t||void 0===t?void 0:t.item,void h({type:"change_schedule_color",payload:c});var c}})})})]})})};v.displayName="HeaderForm";var x=Object(a.memo)(v),y=c(543);const w=()=>Object(j.jsx)(d.a,{layout:"vertical",children:Object(j.jsxs)(y.a,{gutter:8,children:[Object(j.jsx)(i.a,{span:16,children:Object(j.jsxs)(y.a,{gutter:8,children:[Object(j.jsx)(i.a,{span:14,children:Object(j.jsx)(k,{label:Object(b.b)("words.description")})}),Object(j.jsx)(i.a,{span:10,children:Object(j.jsx)(k,{label:Object(b.b)("words.employee")})})]})}),Object(j.jsx)(i.a,{flex:"auto",children:Object(j.jsxs)(y.a,{gutter:8,children:[Object(j.jsx)(i.a,{span:12,children:Object(j.jsx)(k,{label:Object(b.b)("words.schedule_time")})}),Object(j.jsx)(i.a,{span:12,children:Object(j.jsx)(k,{label:Object(b.b)("words.duration")})})]})})]})});w.displayName="CalendarsHeader";var f=Object(a.memo)(w);const k=Object(h.d)(d.a.Item).withConfig({componentId:"wb__sc-1wcebpy-0"})([".ant-col.ant-form-item-control{display:none;}margin-bottom:0 !important;"]);var $=c(137),C=c(447),z=c(159),F=c(2854),I=c(698),S=c(614),N=c(652),D=c(622),L=c(788),G=c(53),H=c.n(G);const T=e=>{let{calendar:t,last_calendar:c}=e;const n=Object(o.a)((e=>e.current_user.permissions)),s=Object(o.a)((e=>e.current_user.salon.salon_configuration.filter_employees_by_service)),d=Object(l.b)((e=>{var t;return null===(t=e.schedule_group.inventory_sale)||void 0===t?void 0:t.finished})),r=Object(l.b)((e=>e.schedule_group.id)),b=Object(l.b)((e=>e.employee_hours)),u=Object(l.b)((e=>e.dispatch)),p=Object(l.b)((e=>e.loadings.time)),h=t.inventory_product,_=t.employee,O=Object(a.useMemo)((()=>{if(null===_||void 0===_||!_.id)return;const e=null===b||void 0===b?void 0:b[_.id];return e?e.map((e=>({value:e.hour,label:e.label}))):void 0}),[null===_||void 0===_?void 0:_.id,b]),g=e=>{const{inventory_product:t,employee:a,time:i,duration:n}=e;if(!t||!a||!i||!n||!c)return;const s=H()(e.time,"HH:mm").add(e.duration||0,"minute").format("HH:mm"),d={id:Object(C.a)(),time:s,employee:a,duration:15};u({type:"add_calendar",payload:d})},m=r?n.can_edit_calendar:n.can_create_calendar;return Object(j.jsxs)(R,{wrap:!1,gutter:8,children:[Object(j.jsx)(i.a,{span:16,children:Object(j.jsxs)(y.a,{gutter:8,children:[Object(j.jsx)(i.a,{span:14,children:Object(j.jsx)(D.a,{size:"large",style:{width:"100%"},is_service:!0,value:null===h||void 0===h?void 0:h.id,disabled:d||!m,onChange:(e,c)=>(e=>{const{employee:c,duration:a}=Object(I.d)(s,e,_,t.duration),i={...t,inventory_product:e,employee:c,duration:a,inventory_package_item_id:null};if(t.inventory_package_item_id){const e={package_item_id:t.inventory_package_item_id,quantity:1};u({type:"update_package_balance",payload:e})}u({type:"update_calendar",payload:i}),g(i)})(null===c||void 0===c?void 0:c.item)})}),Object(j.jsx)(i.a,{span:10,children:Object(j.jsx)(S.a,{size:"large",style:{width:"100%"},value:null===_||void 0===_?void 0:_.id,has_calendar:!0,service_selected_id:null===h||void 0===h?void 0:h.id,disabled:d||!m,onChange:(e,c)=>(e=>{var c;let a;if(e){const t=e.id;a=null===h||void 0===h?void 0:h.product_configurations.find((e=>e.employee_id===t))}const i=(null===(c=a)||void 0===c?void 0:c.duration)||(null===h||void 0===h?void 0:h.duration)||t.duration||void 0,n={...t,employee:e,duration:i};u({type:"update_calendar",payload:n}),g(n)})(null===c||void 0===c?void 0:c.item)})})]})}),Object(j.jsx)(i.a,{span:8,children:Object(j.jsxs)(y.a,{gutter:8,children:[Object(j.jsx)(i.a,{span:12,children:Object(j.jsx)(L.a,{size:"large",disabled:d||!m,value:t.time,style:{width:"100%"},loading:p,options:O,onChange:e=>{const c={...t,time:e};u({type:"update_calendar",payload:c}),g(c)}})}),Object(j.jsx)(i.a,{span:9,children:Object(j.jsx)(N.b,{size:"large",style:{width:"100%"},disabled:d||!m,value:t.duration||void 0,onChange:e=>{const c={...t,duration:e};u({type:"update_calendar",payload:c}),g(c)}})}),Object(j.jsx)(i.a,{span:3,children:Object(j.jsx)(z.a,{icon:Object(j.jsx)(F.a,{}),size:"large",danger:!0,type:"primary",onClick:()=>{u({type:"remove_calendar",payload:t.id})},disabled:c||d||!m})})]})})]})};T.displayName="Calendar";var q=Object(a.memo)(T,$.isEqual);const R=Object(h.d)(y.a).withConfig({componentId:"wb__sc-14mf845-0"})(["margin-bottom:10px;"]),A=()=>{const e=Object(l.b)((e=>e.schedule_group.calendars)),t=Object(a.useMemo)((()=>e.filter((e=>!e._destroy))),[e]);return Object(j.jsxs)(M,{children:[Object(j.jsx)(n.h,{$size:20,$bottom:25,$bold:!0,children:Object(b.b)("calendar.schedule_items")}),Object(j.jsx)(f,{}),t.map(((e,c)=>Object(j.jsx)(q,{calendar:e,last_calendar:t.length-1===c},e.id)))]})};A.displayName="Calendars";var E=Object(a.memo)(A);const M=h.d.div.withConfig({componentId:"wb__sc-liy7ra-0"})(["width:100%;position:relative;padding-top:30px;input:read-only:not(:disabled){color:rgba(0,0,0,0.55);background-color:#f5f5f5;cursor:not-allowed;}"]),B=e=>{let{title:t}=e;return Object(j.jsxs)(J,{$column:!0,children:[Object(j.jsx)(n.g,{$isFlex:!1,$alignCenter:!0,children:Object(j.jsx)(n.h,{$top:20,$bottom:20,$block:!0,$size:24,$bold:!0,children:t})}),Object(j.jsxs)(n.g,{$column:!0,children:[Object(j.jsx)(x,{}),Object(j.jsx)(E,{}),Object(j.jsx)(s.c,{})]}),Object(j.jsx)(p,{})]})};B.displayName="ScheduleGroupForm";var P=B;const J=Object(h.d)(n.g).withConfig({componentId:"wb__sc-1gzo8cs-0"})(["height:100%;overflow:auto;padding-left:15px;padding-right:15px;padding-bottom:25rem;"]);var K=c(339),V=c(586),W=c(872),Q=c(116),U=c(596),X=c(824),Y=c(694),Z=c(852),ee=c(579),te=c(604);const ce=()=>{const e=Object(l.b)((e=>e.dispatch)),t=Object(l.b)((e=>e.schedule_group.subscription_items)),c=Object(l.b)((e=>{var t;return null===(t=e.schedule_group.inventory_sale)||void 0===t?void 0:t.finished})),a=t.filter((e=>e.balance>0));return Object(j.jsxs)("div",{children:[Object(j.jsx)(n.g,{align:"middle",justify:"space-between",$paddings:[25,15,0,15],children:Object(j.jsx)(n.h,{$bold:!0,$size:20,children:t?"Assinaturas":Object(j.jsx)(te.a,{width:"5ch"})})}),Object(j.jsxs)(n.g,{$column:!0,$isFlex:!1,children:[a.map((a=>Object(j.jsx)(Z.a,{title:c?void 0:Object(b.b)("calendar.click_to_add_to_schedule"),placement:"right",children:Object(j.jsxs)(ie,{$disabled:c,onClick:()=>!c&&(c=>{if(t)return c.balance<=0?Q.b.warning("Assinatura sem saldo"):void e({type:"add_subscription_item",payload:{subscription_item_id:c.id,is_mobile:!1}})})(a),children:[Object(j.jsxs)(n.g,{justify:"space-between",children:[Object(j.jsx)(n.h,{$semibold:!0,$color:"primary",children:a.inventory_product.description}),Object(j.jsx)(n.h,{children:Object(ee.d)(a.value_cents)})]}),Object(j.jsx)(n.g,{justify:"space-between",children:Object(j.jsxs)(n.h,{$color:0===a.balance?"red":void 0,children:[Object(b.b)("words.balance"),": ",a.balance]})})]})},a.id))),(!a||0===a.length)&&Object(j.jsx)(n.h,{$paddings:[0,15],$color:"gray_1",children:a?"N\xe3o h\xe1 assinaturas dispon\xedveis":Object(j.jsx)(te.a,{width:"24ch"})})]})]})};ce.displayName="Subscriptions";var ae=Object(a.memo)(ce);const ie=h.d.div.withConfig({componentId:"wb__sc-1fwj81o-0"})(["padding:10px 15px;",""],(e=>!e.$disabled&&Object(h.c)(["cursor:pointer;&:hover{background-color:rgba(0,0,0,0.05);}"])));var ne=c(37),se=c(405),de=c(188),re=c(76);const le=ne.e`
  fragment ScheduleDrawerClientAttributes on Client {
    id
    email
    name
    nickname
    phone1
    is_new: new
    phone2
    birthday
    has_avatar
    avatar_url
    avatar_blurhash
    name_initials
    customer_tag_list
    open_sales_count
    fidelity_points
    late_payments_count
    balance_cents
    whatsapp_contact_id
    created_at
    active
    small_thumb_url
    large_thumb_url
    default_discount_percentage
    default_discount_type
    cashback_balance_cents

    address
    complement
    number
    district
    cep
    city_id
    state_id

    notes {
      id
      description
      updated_at
      user_id
    }

    packages(only_finished: true, only_available: true) {
      id
      code
      date
      sum_cents

      package_items {
        id
        quantity
        balance
        value_cents
        package_id
        inventory_product_id: product_id
      }
    }

    subscriptions(with_balance: true, only_available: true) {
      id

      customer_subscription_items {
        id
        quantity
        balance
        value_cents
        inventory_product_id
      }
    }
  }
`,oe=ne.e`
  query ScheduleGroupDrawerClient($id: ID) {
    client(id: $id, search_inactives: true) {
      ...ScheduleDrawerClientAttributes
    }
  }

  ${le}
`;var be=(e,t)=>{const c=Object(o.a)((e=>e.employees)),a=Object(l.b)((e=>e.dispatch)),i=Object(de.d)();return Object(se.f)(oe,{notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only",variables:{id:e},onCompleted:e=>{const n=Object($.cloneDeep)(e.client),s=n.notes.map((e=>({...e,employee:c.find((t=>t.user_id===e.user_id))}))),d={package_items:n.packages.flatMap((e=>e.package_items.map((t=>({...t,package_id:e.id,package_code:e.code,inventory_product:i(t.inventory_product_id)}))).filter((e=>e.inventory_product)))),subscription_items:n.subscriptions.flatMap((e=>e.customer_subscription_items.map((t=>({...t,subscription_id:e.id,inventory_product:i(t.inventory_product_id)}))).filter((e=>e.inventory_product))))};t(s),a({type:"after_load_client_data",payload:d})},onError:e=>{console.error(e),re.a.captureException(e)}})},je=c(796);const ue=()=>{const e=Object(o.a)((e=>e.current_user.permissions)),t=Object(l.b)((e=>e.dispatch)),c=Object(l.b)((e=>e.schedule_group.id)),a=Object(l.b)((e=>e.schedule_group.package_items)),i=Object(l.b)((e=>{var t;return null===(t=e.schedule_group.inventory_sale)||void 0===t?void 0:t.finished})),s=a.filter((e=>e.balance>0&&e.inventory_product.is_service)),d=c?e.can_edit_calendar:e.can_create_calendar;return Object(j.jsxs)("div",{children:[Object(j.jsx)(n.g,{align:"middle",justify:"space-between",$paddings:[25,15,0,15],children:Object(j.jsx)(n.h,{$bold:!0,$size:20,children:a?Object(b.b)("words.package",{count:2}):Object(j.jsx)(te.a,{width:"5ch"})})}),Object(j.jsxs)(n.g,{$column:!0,$isFlex:!1,children:[s.map((e=>Object(j.jsx)(Z.a,{title:i||!d?void 0:Object(b.b)("calendar.click_to_add_to_schedule"),placement:"right",children:Object(j.jsxs)(he,{$disabled:i||!d,onClick:()=>!i&&d&&(e=>{if(a)return e.balance<=0?Q.b.warning(Object(b.b)("phrases.package_item_without_balance")):void t({type:"add_package_item",payload:{package_item_id:e.id,is_mobile:!1}})})(e),children:[Object(j.jsxs)(n.g,{justify:"space-between",children:[Object(j.jsxs)(n.h,{$semibold:!0,$color:"primary",children:[e.inventory_product.description," (#",e.package_code,")"]}),Object(j.jsx)(n.h,{children:Object(ee.d)(e.value_cents)})]}),Object(j.jsx)(n.g,{justify:"space-between",children:Object(j.jsxs)(n.h,{$color:0===e.balance?"red":void 0,children:[Object(b.b)("words.balance"),": ",e.balance]})})]})},e.id))),(!s||0===s.length)&&Object(j.jsx)(n.h,{$paddings:[0,15],$color:"gray_1",children:s?Object(b.b)("phrases.no_packages_available"):Object(j.jsx)(te.a,{width:"24ch"})})]})]})};ue.displayName="Packages";var pe=Object(a.memo)(ue);const he=h.d.div.withConfig({componentId:"wb__sc-17xonlv-0"})(["padding:10px 15px;",""],(e=>!e.$disabled&&Object(h.c)(["cursor:pointer;&:hover{background-color:rgba(0,0,0,0.05);}"])));var _e=e=>{let{client_id:t}=e;const[c,i]=Object(a.useState)([]),[s,d]=Object(a.useState)(!1),r=Object(o.a)((e=>e.current_user.permissions)),u=Object(o.a)((e=>e.current_user.salon.name)),p=Object(o.a)((e=>e.current_user.salon.sms_message_configuration)),h=Object(l.b)((e=>e.schedule_group.id)),_=Object(l.b)((e=>e.schedule_group.date)),O=Object(l.b)((e=>e.schedule_group.calendars)).filter((e=>e.inventory_product&&!e._destroy)),g=Object(l.b)((e=>e.schedule_group.status)),m=Object(l.b)((e=>e.schedule_group.confirmation_link)),v=Object(a.useRef)(null),{data:{client:x}={},loading:y,refetch:w}=be(t,i),f=Object(a.useCallback)((e=>{let{currentTarget:{scrollTop:t}}=e;d(!(t<200))}),[]),k=Object(a.useCallback)((()=>{var e;r.can_edit_client?null===(e=v.current)||void 0===e||e.open({id:null===x||void 0===x?void 0:x.id}):Q.b.warning(Object(b.b)("phrases.no_permission_to_do_this"))}),[null===x||void 0===x?void 0:x.id,r.can_edit_client]),$=Object(a.useCallback)((()=>{var e;if(!x)return;if(!h)return void Q.b.warning(Object(b.b)("phrases.save_scheduling_before_whatsapp"));const t=p[`sms_message_calendar_${g||"confirmed"}`]||"";Object(W.b)({template:t,client:x,date:_,calendar_hour:null===(e=O[0])||void 0===e?void 0:e.time,calendars:O,salon_name:u,confirmation_link:m})}),[O,x,m,_,u,h,p,g]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Oe,{onScroll:f,children:Object(j.jsxs)(ge,{children:[Object(j.jsx)(Y.a,{loading:y,client:x,floating_header_visible:s,handleOpenClientDrawer:k,handleOpenWhatsapp:$}),Object(j.jsxs)(n.g,{$column:!0,$paddings:[10,0],children:[Object(j.jsx)(je.a,{client:x}),Object(j.jsx)(pe,{}),Object(j.jsx)(ae,{}),Object(j.jsx)(X.a,{client_id:null===x||void 0===x?void 0:x.id,notes:c,setNotes:i})]})]})}),Object(j.jsx)(U.a,{ref:v,onSave:w})]})};const Oe=h.d.div.withConfig({componentId:"wb__sc-1et98a1-0"})(["overflow-y:auto;height:100%;"]),ge=h.d.div.withConfig({componentId:"wb__sc-1et98a1-1"})(["width:100%;min-height:100%;padding-bottom:25px;display:flex;flex-direction:column;align-items:center;text-align:center;position:relative;box-sizing:border-box;"]);var me=c(2975),ve=c(671);const xe=()=>{const e=Object(l.b)((e=>e.dispatch));return Object(j.jsx)(fe,{children:Object(j.jsxs)(n.g,{$paddings:[25,0],$column:!0,align:"middle",children:[Object(j.jsx)(we,{size:120,src:ve.a}),Object(j.jsx)(n.g,{$paddings:[0,25],$mTop:15,style:{width:"100%"},children:Object(j.jsx)(m.a,{size:"large",showCreateButton:!1,placeholder:Object(b.b)("calendar.search_for_client"),onChange:(t,c)=>e({type:"change_client",payload:null===c||void 0===c?void 0:c.item}),style:{width:"100%"},getPopupContainer:()=>document.body})})]})})};xe.displayName="EmptyClientInfo";var ye=Object(a.memo)(xe);const we=Object(h.d)(me.a).withConfig({componentId:"wb__sc-yyr2w3-0"})(["box-shadow:0 0 20px 0 #e8e8e8;min-height:120px;"]),fe=h.d.div.withConfig({componentId:"wb__sc-yyr2w3-1"})(["height:100%;width:100%;padding-top:25px;overflow-y:auto;position:relative;"]),ke=()=>{const e=Object(l.b)((e=>e.schedule_group.client));return e?Object(j.jsx)(_e,{client_id:e.id}):Object(j.jsx)(ye,{})};ke.displayName="Sidebar";var $e=ke,Ce=c(1809),ze=c(1839),Fe=c(2853),Ie=c(1097),Se=c(2856),Ne=c(771),De=c(340),Le=c(3061);const Ge=e=>{var t,c;let{disabled:i,destroyScheduleGroup:s}=e;const d=Object(o.a)((e=>{var t;return null===(t=e.current_user.permissions)||void 0===t?void 0:t.can_destroy_calendar})),r=Object(l.b)((e=>e.schedule_group)),u=Object(l.b)((e=>e.loadings.destroy)),p=null===r||void 0===r||null===(t=r.recurrence)||void 0===t?void 0:t.head_schedule_group_id,h=!(null===r||void 0===r||null===(c=r.inventory_sale)||void 0===c||!c.finished),_=Object(a.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=e?Object(j.jsx)(De.a,{i18nKey:"calendar.confirm_delete_next_calendars",components:[Object(j.jsx)("strong",{})]}):Object(b.b)("calendar.confirm_delete_calendar");Q.c.confirm({centered:!0,className:"webook-modal",title:Object(b.b)("words.attention"),content:t,okText:Object(b.b)("phrases.yes_delete"),okType:"danger",cancelText:Object(b.b)("verbs.cancel"),onOk:()=>s(null===r||void 0===r?void 0:r.id,e)})}),[s,null===r||void 0===r?void 0:r.id]),O=Object(a.useMemo)((()=>[{key:"delete",icon:Object(j.jsx)(F.a,{}),onClick:()=>_(),label:Object(b.b)("calendar.delete_calendar"),danger:!0},{key:"delete-next",icon:Object(j.jsx)(Le.a,{}),onClick:()=>_(!0),label:Object(b.b)("calendar.delete_next_calendars"),danger:!0}]),[_]);return null!==r&&void 0!==r&&r.id&&d?p?Object(j.jsx)(Ce.a,{menu:{items:O},trigger:["click"],placement:"topLeft",disabled:i,children:Object(j.jsx)(z.a,{size:"large",type:"primary",danger:!0,disabled:i||h,loading:u,children:Object(j.jsxs)(n.h,{$semibold:!0,children:[Object(b.b)("verbs.delete"),"\xa0",Object(j.jsx)(Se.a,{})]})})}):Object(j.jsx)(z.a,{size:"large",danger:!0,type:"primary",loading:u,disabled:i||h,onClick:()=>_(),children:Object(j.jsx)(n.h,{$semibold:!0,children:Object(b.b)("verbs.delete")})}):null};Ge.displayName="DestroyButton";var He=Object(a.memo)(Ge);const Te=e=>{let{close:t,destroyScheduleGroup:c,openSaleDrawer:i}=e;const s=Object(o.a)((e=>e.current_user.permissions)),d=Object(l.b)((e=>e.schedule_group.inventory_sale)),r=Object(l.b)((e=>e.schedule_group.id)),u=Object(l.b)((e=>!!e.schedule_group.client)),p=Object(l.b)((e=>e.schedule_group.calendars)),h=Object(l.b)((e=>e.headerRef)),_=Object(l.b)((e=>e.submit)),O=Object(l.b)((e=>e.loadings.loading)),g=Object(l.b)((e=>e.loadings.save)),m=Object(l.b)((e=>e.loadings.destroy)),v=Object(I.f)(p).filter((e=>!e._destroy)),x=!!d,y=!(null===d||void 0===d||!d.finished),w=r?s.can_edit_calendar:s.can_create_calendar,f=!y,k=Object(a.useRef)(null),$=Object(a.useRef)(null),C=e=>{var t;if(!u)return Q.b.warning(`${Object(b.b)("verbs.select")} ${Object(b.b)("words.client").toLocaleLowerCase()}`),void(null===h||void 0===h||null===(t=h.current)||void 0===t||t.scrollIntoView({behavior:"smooth",inline:"start"}));0!==v.length?_(e):Q.b.warning(Object(b.b)("calendar.provide_at_least_one_valid_item"))};return Object(j.jsxs)(Re,{$gap:8,children:[Object(j.jsx)(Ce.a,{trigger:["click"],menu:{items:(()=>{const e=[{key:"help",title:Object(b.b)("words.help"),icon:Object(j.jsx)(Fe.a,{}),onClick:()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.open()},label:Object(b.b)("words.help")}];return r&&e.push({key:"historical",title:Object(b.b)("words.history"),icon:Object(j.jsx)(Ie.a,{}),onClick:()=>{var e;return null===(e=$.current)||void 0===e?void 0:e.open(r)},label:Object(b.b)("words.history")}),e})()},placement:"topLeft",children:Object(j.jsx)(z.a,{disabled:O,size:"large",children:Object(j.jsxs)(n.h,{$semibold:!0,children:[Object(b.b)("words.other",{count:2})," ",Object(j.jsx)(Se.a,{})]})})}),Object(j.jsx)(z.a,{size:"large",onClick:t,disabled:O,children:Object(j.jsx)(n.h,{$semibold:!0,children:Object(b.b)("verbs.cancel")})}),Object(j.jsx)(He,{disabled:O||g,destroyScheduleGroup:c}),f&&Object(j.jsx)(z.a,{size:"large",type:"primary",loading:g,onClick:e=>{1===e.detail&&(w?C(!1):Q.b.warning(Object(b.b)("phrases.no_permission_to_do_this")))},disabled:O||m||g,children:Object(j.jsx)(n.h,{$semibold:!0,children:Object(b.b)("verbs.save")})}),x?Object(j.jsx)(z.a,{size:"large",type:"primary",className:"ant-button-success",onClick:()=>{s.can_edit_sale?i(null===d||void 0===d?void 0:d.id):Q.b.warning(Object(b.b)("phrases.no_permission_to_do_this"))},disabled:O||g||m,children:Object(j.jsxs)(n.h,{$semibold:!0,children:[Object(b.b)("verbs.access"),"\xa0",Object(b.b)("words.sale").toLocaleLowerCase()]})}):Object(j.jsx)(z.a,{size:"large",type:"primary",loading:g,onClick:()=>{s.can_create_sale?C(!0):Q.b.warning(Object(b.b)("phrases.no_permission_to_do_this"))},className:"ant-button-success",disabled:O||m||g,children:Object(j.jsxs)(n.h,{$semibold:!0,children:[Object(b.b)("verbs.create"),"\xa0",Object(b.b)("words.sale").toLocaleLowerCase()]})}),Object(j.jsx)(Ne.a,{ref:k}),!!r&&Object(j.jsx)(ze.a,{ref:$})]})};Te.displayName="Footer";var qe=Object(a.memo)(Te);const Re=Object(h.d)(n.g).withConfig({componentId:"wb__sc-q3b3yh-0"})(["display:flex;justify-content:flex-end;align-items:center;position:sticky;bottom:0;left:0;right:0;background:rgba(255,255,255,.8);backdrop-filter:blur(10px);padding:10px 15px;border-top:1px solid #f0f0f0;background:#FFFFFF;"]),Ae=e=>{const{has_error:t,title:c,close:a,destroyScheduleGroup:i,openSaleDrawer:s}=e,d=Object(l.b)((e=>e.loadings.loading));return Object(j.jsxs)(n.g,{style:{height:"100%",overflow:"hidden"},children:[Object(j.jsx)(Ee,{children:Object(j.jsx)($e,{})}),Object(j.jsxs)(Me,{children:[Object(j.jsx)(K.a,{loading:d}),Object(j.jsx)(V.a,{visible:t,small:!1,zIndex:1,$fullHeight:!0}),Object(j.jsx)(P,{title:c}),Object(j.jsx)(qe,{close:a,destroyScheduleGroup:i,openSaleDrawer:s})]})]})};Ae.displayName="ScheduleGroupDesktop";t.default=Object(a.memo)(Ae);const Ee=Object(h.d)(i.a).withConfig({componentId:"wb__sc-1ua3xh9-0"})(["width:360px;min-width:360px;height:100%;background:#FFFFFF;backdrop-filter:blur(10px);border-right:1px solid #f0f0f0;@media (max-width:1600px){width:300px;min-width:300px;}"]),Me=h.d.div.withConfig({componentId:"wb__sc-1ua3xh9-1"})(["overflow:hidden;width:100%;position:relative;background-color:#FFFFFF;"])}}]);
//# sourceMappingURL=192.863e0736.chunk.js.map