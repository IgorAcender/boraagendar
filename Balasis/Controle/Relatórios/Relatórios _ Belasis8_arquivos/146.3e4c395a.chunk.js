(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[146],{2832:function(e,t,s){"use strict";s.r(t);var o=s(0),i=s(585),n=s(116),c=s(50),a=s(37),l=s(1850),r=s(76);const m=a.e`
  mutation GenerateBulkCommissions($data: GenerateBulkCommissionsInput!) {
    generateBulkCommissions(input: $data) {
      success job_id
    }
  }
`;var b=()=>Object(l.a)(m,{onError:e=>{r.a.captureException(e),n.b.error(Object(c.b)("finance.commissions.generate_error_message")),console.error(e)}}),d=s(27),h=s(817),p=s(597),j=s(22);const u=()=>{const e=Object(h.a)();return Object(j.jsx)(p.b,{$showBottomBorder:!0,title:Object(c.b)("words.commission",{count:2}),tabs:e})};u.displayName="BulkCommissionsHeader";var O=u,g=s(250),f=s(852),x=s(3023),_=s(159),y=s(53),v=s.n(y),w=s(606),C=s(117),$=s(599),k=s(591),B=s(19);const E=e=>{const{selected:t,employee:s,onSelectEmployee:o}=e;return Object(j.jsxs)(Y,{$selected:t,title:s.name,onClick:()=>o(s.id),children:[Object(j.jsx)(S,{src:s.avatar_url,blurhash:s.avatar_blurhash}),Object(j.jsxs)(g.g,{$column:!0,$left:10,style:{overflow:"hidden"},children:[Object(j.jsx)(g.h,{$block:!0,$textEllipsis:!0,children:s.name}),Object(j.jsx)(g.h,{$block:!0,$color:"gray_1",$size:12,children:s.cellphone?Object(j.jsx)(k.a,{inputStyle:{fontSize:12,color:C.a.gray_2},hide_input_styles:!0,disabled:!0,value:s.cellphone},s.cellphone):""})]})]})};E.displayName="EmployeeItem";var M=Object(o.memo)(E);const S=Object(B.d)($.a).withConfig({componentId:"wb__sc-1q5h1y4-0"})(["width:40px !important;height:40px !important;"]),Y=B.d.div.withConfig({componentId:"wb__sc-1q5h1y4-1"})(["display:flex;flex-direction:row;align-items:center;justify-content:flex-start;cursor:pointer;padding:10px;border:1px solid transparent;box-shadow:0 0 10px 3px rgb(197 197 197 / 12%);border-radius:5px;background-color:#FFFFFF;transition:box-shadow .2s;"," &:hover{border:1px solid ",";box-shadow:0 0 10px 3px rgb(197 197 197 / 30%);}"],(e=>e.$selected&&`border: 1px solid ${e.theme.colors.primary};`),(e=>e.theme.colors.primary)),F=e=>{let{loading:t,onGenerateBulkCommissions:s}=e;const[i,n]=Object(o.useState)([]),[a,l]=Object(o.useState)(v()().subtract(1,"month")),[r,m]=Object(o.useState)(v()()),[b,h]=Object(o.useState)(!1),p=Object(d.a)((e=>e.employees)).filter((e=>e.active&&e.has_commission)),u=Object(o.useCallback)((e=>{n((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}),[]),O=Object(o.useCallback)((e=>{const t=null===e||void 0===e?void 0:e[0],s=null===e||void 0===e?void 0:e[1];t&&s&&(l(t),m(s))}),[]),y=p.length===i.length,C=Object(o.useCallback)((e=>{h(e)}),[]),$=Object(o.useCallback)((()=>{if(y)return void n([]);const e=p.map((e=>e.id));n(e)}),[y,p]);return Object(j.jsxs)(z,{$column:!0,$alignCenter:!0,children:[Object(j.jsx)(g.h,{$size:24,$semibold:!0,children:Object(c.b)("words.filter",{count:2})}),Object(j.jsx)(g.h,{$alignCenter:!0,$bottom:10,children:Object(c.b)("finance.commissions.select_period_and_employee")}),Object(j.jsx)(g.g,{$alignCenter:!0,$justifyCenter:!0,$bottom:10,children:Object(j.jsx)(w.a,{value:[a,r],allowClear:!1,style:{width:450},onChange:O,getPopupContainer:()=>document.body})}),Object(j.jsx)(g.g,{$alignCenter:!0,$justifyCenter:!0,$bottom:10,children:Object(j.jsxs)(f.a,{title:Object(c.b)("settings.commissions.search_previous_tooltip"),children:[Object(j.jsx)(x.a,{checked:b,onChange:C}),"\xa0",Object(c.b)("settings.commissions.search_previous")]})}),Object(j.jsx)(g.g,{$alignCenter:!0,$justifyCenter:!0,$bottom:10,children:Object(j.jsx)(_.a,{type:"link",onClick:$,children:y?Object(c.b)("phrases.remove_select"):Object(c.b)("phrases.select_all")})}),Object(j.jsx)(V,{children:p.map((e=>{const t=i.includes(e.id);return Object(j.jsx)(M,{selected:t,employee:e,onSelectEmployee:u},e.id)}))}),Object(j.jsx)(_.a,{type:"primary",onClick:()=>{const e=a.format("YYYY-MM-DD"),t=r.format("YYYY-MM-DD");s(i,e,t,b)},loading:t,disabled:0===i.length,style:{marginTop:10,width:450},children:Object(c.b)("finance.commissions.search_commissions")})]})};F.displayName="EmployeeList";var I=Object(o.memo)(F);const z=Object(B.d)(g.g).withConfig({componentId:"wb__sc-lptl0h-0"})(["margin:0 auto;padding-top:10px;height:100%;"]),V=B.d.div.withConfig({componentId:"wb__sc-lptl0h-1"})(["display:flex;flex-direction:column;flex-wrap:initial;overflow-x:hidden;overflow-y:auto;width:450px;max-height:calc(100vh - 345px);padding:0 20px;div + div{margin-top:10px;}"]);var H=s(600);const D=()=>{const e=Object(d.a)((e=>e.current_user.permissions.can_pay_commission)),[t,{loading:s}]=b(),n=Object(o.useCallback)((async(e,s,o,i)=>{const n={employee_ids:e,start_date:s,end_date:o,search_previous:i},{data:c}=await t({variables:{data:n}}),{success:a,job_id:l}=(null===c||void 0===c?void 0:c.generateBulkCommissions)||{};a&&Object(H.a)(`/finance/commissions/bulk_commissions/${l}`)}),[t]);return Object(j.jsxs)(i.b,{children:[Object(j.jsx)(O,{}),Object(j.jsx)(G,{$pageFull:!0,has_permission:e,children:Object(j.jsx)(I,{onGenerateBulkCommissions:n,loading:s})})]})};D.displayName="BulkCommissions";t.default=D;const G=Object(B.d)(i.c).withConfig({componentId:"wb__sc-1fce6iv-0"})(["display:block;overflow-y:auto;",""],(e=>e.theme.is_mobile&&Object(B.c)(["height:unset;margin-bottom:","px;"],(e=>e.theme.sidebar_mobile_bottom_margin))))},817:function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var o=s(0),i=s(50),n=s(823),c=s(3045),a=s(3039),l=s(3052),r=s(27);const m=()=>{const e=Object(r.a)((e=>e.is_mobile)),t=Object(o.useMemo)((()=>[{label:Object(i.b)("words.summary"),path:"/finance/commissions/summary",icon:n.a},{label:Object(i.b)("finance.commissions.open_commissions"),path:"/finance/commissions",icon:c.a},{label:Object(i.b)("finance.commissions.paid_commissions"),path:"/finance/commissions/batch_payments",icon:a.a},{label:Object(i.b)("words.setting_other"),path:"/finance/commissions/settings",icon:l.a}]),[]),s=Object(o.useMemo)((()=>[{label:Object(i.b)("finance.commissions.detailed"),path:"/finance/commissions"},{label:Object(i.b)("finance.commissions.summary"),path:"/finance/commissions/bulk_commissions"},{label:Object(i.b)("finance.commissions.paid"),path:"/finance/commissions/batch_payments"},{label:Object(i.b)("words.setting_other"),path:"/finance/commissions/settings",icon:l.a}]),[]);return e?t:s}},823:function(e,t,s){"use strict";var o=s(13),i=s(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},c=s(71),a=function(e,t){return i.createElement(c.a,Object(o.a)({},e,{ref:t,icon:n}))},l=i.forwardRef(a);t.a=l}}]);
//# sourceMappingURL=146.3e4c395a.chunk.js.map