(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[202],{2973:function(e,t,s){"use strict";s.r(t);var i=s(0),a=s(50),c=s(18),l=s(961),r=s(993),n=s(627),o=s(250),b=s(579),d=s(599),u=s(583),j=s(19),p=s(22);const m=e=>{const{item:t}=e;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{children:Object(p.jsx)(h,{type:"image",src:null===t||void 0===t?void 0:t.image_url,blurhash:null===t||void 0===t?void 0:t.image_blurhash})}),Object(p.jsxs)(O,{children:[Object(p.jsxs)(o.g,{$column:!0,$top:2,children:[Object(p.jsx)(u.b,{width:16,$block:!0,$semibold:!0,children:null===t||void 0===t?void 0:t.name}),null===t||void 0===t?void 0:t.subscription_template_items.map((e=>Object(p.jsx)(u.b,{width:6,$block:!0,$color:"gray_1",$size:12,children:`${e.quantity}x ${e.inventory_product.description}`})))]}),Object(p.jsx)(u.b,{width:8,$block:!0,$size:12,$semibold:!0,children:Object(b.d)(null===t||void 0===t?void 0:t.total_cents)})]})]})};var _=Object(i.memo)(m);const O=j.d.div.withConfig({componentId:"wb__sc-1tcm4zo-0"})(["width:100%;display:flex;flex-direction:row;"]),h=Object(j.d)(d.a).withConfig({componentId:"wb__sc-1tcm4zo-1"})(["width:40px !important;height:40px !important;margin-right:10px !important;"]);var v=s(547),w=s(27),x=s(116),y=s(852),k=s(1438),g=s(616),f=s(3034),C=s(2854),I=s(960);const $=e=>{let{template:t,handleEdit:s,afterDeleteTemplate:c}=e;const l=Object(w.a)((e=>e.current_user.permissions)),[r]=Object(I.a)(),n=Object(i.useCallback)((async e=>{const{success:t}=await r(e);t&&c()}),[c,r]),b=Object(i.useCallback)((e=>{l.can_destroy_subscription_template?x.c.confirm({centered:!0,className:"webook-modal",title:Object(a.b)("words.attention"),maskClosable:!0,content:Object(a.b)("phrases.confirm_delete",{model:Object(a.b)("words.customer_subscription_template").toLowerCase()}),okText:Object(a.b)("phrases.yes_delete"),okType:"danger",cancelText:Object(a.b)("verbs.cancel"),onOk:()=>n(e)}):x.b.warning(Object(a.b)("phrases.no_permission_to_do_this"))}),[n,l.can_destroy_subscription_template]);return Object(p.jsxs)(g.a,{width:84,children:[Object(p.jsx)(y.a,{title:Object(a.b)("verbs.edit"),placement:"bottom",children:Object(p.jsx)(o.i,{className:"link",onClick:()=>s(t),children:Object(p.jsx)(f.a,{})})}),Object(p.jsx)(k.a,{type:"vertical"}),Object(p.jsx)(o.i,{className:"link color-red",onClick:()=>b(t.id),children:Object(p.jsx)(C.a,{style:{color:"red"}})})]})};$.displayName="ActionColumns";var T=Object(i.memo)($);var D=e=>{let{openTemplateDrawer:t,afterDeleteTemplate:s}=e;const c=Object(w.a)((e=>e.current_user.permissions)),l=Object(i.useCallback)((e=>{c.can_edit_subscription_template?t(e):x.b.warning(Object(a.b)("phrases.no_permission_to_do_this"))}),[t,c.can_edit_subscription_template]);return Object(i.useMemo)((()=>[{title:Object(a.b)("words.name"),default_visible:!0,key:"name",dataIndex:"name",ellipsis:!0,render:(e,t)=>Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>l(t),children:[Object(p.jsx)(d.a,{type:"image",src:t.image_url,blurhash:t.image_blurhash,size:"small"}),"\xa0",Object(p.jsx)(o.h,{$color:"primary",children:e})]})},{title:Object(a.b)("words.status"),default_visible:!0,key:"active",dataIndex:"active",ellipsis:!0,width:130,render:e=>Object(p.jsx)(v.a,{color:e?"green":"red",children:e?Object(a.b)("words.active"):Object(a.b)("words.disabled")})},{title:Object(a.b)("words.visible"),default_visible:!0,key:"visible_in_online_scheduling",dataIndex:"visible_in_online_scheduling",width:100,render:e=>Object(p.jsx)(v.a,{color:e?"green":"red",children:e?Object(a.b)("words.yes"):Object(a.b)("words.no")})},{title:Object(a.b)("words.total"),default_visible:!0,key:"total_cents",align:"right",dataIndex:"total_cents",width:150,render:e=>Object(b.d)(e)},{default_visible:!0,key:"actions",width:100,align:"center",render:e=>Object(p.jsx)(T,{template:e,handleEdit:l,afterDeleteTemplate:s})}]),[s,l])},N=s(593),R=s(2921);const S=e=>{let{subscription_template:t}=e;const s=[{title:`${Object(a.b)("words.service")}/${Object(a.b)("words.product")}`,key:"name",ellipsis:!0,render:(e,t)=>t.inventory_product.description},{title:Object(a.b)("words.quantity"),key:"quantity",dataIndex:"quantity",width:100},{title:Object(a.b)("words.unitary_price"),key:"value_cents",dataIndex:"value_cents",align:"right",width:180,render:e=>Object(b.d)(e)},{title:Object(a.b)("words.discount"),key:"discount",dataIndex:"discount",align:"right",width:180,render:(e,t)=>"value"===t.discount_type?Object(b.d)(e):Object(b.u)(e)},{title:Object(a.b)("words.total"),key:"total_cents",dataIndex:"total_cents",align:"right",width:180,render:e=>Object(b.d)(e)},{key:"actions",width:70}];return Object(p.jsx)(z,{columns:s,dataSource:t.subscription_template_items,rowKey:"id",pagination:!1})};S.displayName="SubscriptionTemplateItems";var q=S;const z=Object(j.d)(R.a).withConfig({componentId:"wb__sc-f7tyvl-0"})([".ant-table-content{min-height:0 !important;height:auto !important;}.ant-table-expanded-row td{padding:12px 8px !important;}"]);var M=s(1652);var E=()=>Object(i.useMemo)((()=>[{label:Object(a.b)("words.status"),name:"active",default_value:"true",double_checkbox:{true:Object(a.b)("words.active"),false:Object(a.b)("words.disabled")}},{label:Object(a.b)("words.visible"),name:"visible",default_value:"all",double_checkbox:{true:Object(a.b)("words.yes"),false:Object(a.b)("words.no")}}]),[]);t.default=()=>{Object(N.a)({feature_keys:["has_customer_subscription"],addon_keys:["has_customer_subscription"],search:c.a.ID_CUSTOMER_SUBSCRIPTION});const e=Object(i.useRef)(null),t=Object(i.useRef)(null),s=Object(i.useCallback)((()=>{var e;null===(e=t.current)||void 0===e||e.refetch()}),[]),o=Object(i.useCallback)((t=>{var s;null===(s=e.current)||void 0===s||s.open(null===t||void 0===t?void 0:t.id)}),[]),b=Object(i.useCallback)((e=>e.active?"":"disabled"),[]),d=D({openTemplateDrawer:o,afterDeleteTemplate:s}),u=Object(i.useCallback)((e=>Object(p.jsx)(q,{subscription_template:e})),[]),j=Object(i.useMemo)((()=>({expandedRowRender:u})),[u]),m=E();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(n.a,{ref:t,Header:M.a,title:Object(a.b)("phrases.subscription_sale_other"),storage_key:"customer_subscription_templates",permissions_key:"subscription_template",columns:d,query:l.a,getData:e=>{var t;return null===e||void 0===e||null===(t=e.all_customer_subscription_templates)||void 0===t?void 0:t.all},getTotalCount:e=>{var t;return(null===e||void 0===e||null===(t=e.all_customer_subscription_templates)||void 0===t?void 0:t.total_count)||0},MobileItem:_,openDrawer:o,rowClassName:b,expandable:j,filters:m,search_placeholder:Object(a.b)("customer.subscription_template.search_placeholder")}),Object(p.jsx)(r.a,{ref:e,afterSave:s})]})}}}]);
//# sourceMappingURL=202.e0c4e888.chunk.js.map