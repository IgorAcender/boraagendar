(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[69,179],{2979:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(2854),s=a(37);const o=s.a`
  query VendorsList (
    $search_query: String, $sort_field: String, $sort_order: String, $page: Int, $results: Int, $actives: Boolean
  ) {
    all_inventory_vendors(
      search_term: $search_query, sort_field: $sort_field, sort_order: $sort_order, page: $page, results: $results,
      actives: $actives, use_replica: true
    ) {
      all {
        id name email phone1 phone2 cnpj active
      }

      total_count
    }
  }
`,l=s.a`
  query VendorsIdsList ($actives: Boolean) {
    all_inventory_vendors (actives: $actives, use_replica: true) {
      all {
        id active
      }
    },
  }
`;var c=a(627),i=a(667),d=a(701),b=a(27),u=a(50),_=a(852),p=a(1438),j=a(250),v=a(616),h=a(116),m=a(3034),O=a(591),f=a(22);var y=e=>{let{handleDestroyVendors:t,openVendorDrawer:a}=e;const s=Object(b.a)((e=>e.current_user.permissions)),o=Object(n.useCallback)((e=>{s.can_destroy_vendor?h.c.confirm({centered:!0,className:"webook-modal",title:Object(u.b)("words.attention"),maskClosable:!0,content:Object(u.b)("phrases.confirm_delete",{model:Object(u.b)("words.vendor").toLocaleLowerCase()}),okText:Object(u.b)("phrases.yes_delete"),okType:"danger",cancelText:Object(u.b)("verbs.cancel"),onOk:()=>t([e])}):h.b.warning(Object(u.b)("phrases.no_permission_to_do_this"))}),[t,s.can_destroy_vendor]);return Object(n.useMemo)((()=>[{title:Object(u.b)("words.name"),key:"name",dataIndex:"name",always_visible:!0,render:(e,t)=>Object(f.jsx)(j.i,{style:{textAlign:"left"},onClick:()=>{s.can_edit_vendor?a(t.id):h.b.warning(Object(u.b)("phrases.no_permission_to_do_this"))},children:e})},{title:Object(u.b)("words.email"),key:"email",dataIndex:"email",ellipsis:!0,default_visible:!0},{title:Object(u.b)("words.phone"),key:"phone1",dataIndex:"phone1",width:170,default_visible:!0,render:e=>e?Object(f.jsx)(O.a,{disabled:!0,hide_input_styles:!0,value:e},e):void 0},{title:Object(u.b)("words.cellphone"),key:"phone2",dataIndex:"phone2",width:170,default_visible:!0,render:e=>e?Object(f.jsx)(O.a,{disabled:!0,hide_input_styles:!0,value:e},e):void 0},{title:Object(u.b)("acronyms.cnpj"),key:"cnpj",dataIndex:"cnpj",width:160,default_visible:!0},{key:"actions",always_visible:!0,width:100,align:"center",render:(e,t)=>Object(f.jsxs)(v.a,{width:84,children:[Object(f.jsx)(_.a,{title:Object(u.b)("verbs.view"),placement:"bottom",children:Object(f.jsx)("button",{className:"link",onClick:()=>{s.can_edit_vendor?a(t.id):h.b.warning(Object(u.b)("phrases.no_permission_to_do_this"))},children:Object(f.jsx)(m.a,{})})}),t.active&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{type:"vertical"}),Object(f.jsx)("button",{className:"link color-red",onClick:()=>o(t.id),children:Object(f.jsx)(r.a,{})})]})]})}]),[o,a,s.can_edit_vendor])};var g=()=>Object(n.useMemo)((()=>[{label:Object(u.b)("words.status"),name:"actives",default_value:"true",double_checkbox:{true:Object(u.b)("words.active",{count:2}),false:Object(u.b)("words.inactive",{count:2})}}]),[]),w=a(1850);const x=s.e`
  mutation destroyVendor($data: Inventory_Vendor_DestroyInput!) {
    inventoryVendorDestroy(input: $data) {
      success
      errors
      has_dependencies
    }
  }
`;var k=()=>{const[e,t]=Object(n.useState)(!1),[a]=Object(w.a)(x);return{destroyVendors:Object(n.useCallback)((async(e,n)=>{t(!0);const r=h.b.loading(`${Object(u.b)("verbs.wait")}...`,0),s=[],o=[],l=[],c=e.map((e=>new Promise(((t,n)=>{a({variables:{data:{id:e}}}).then((t=>{let{data:{inventoryVendorDestroy:{success:a,has_dependencies:n}}}=t;return n?l.push(e):a?void s.push(e):o.push(e)})).catch((()=>{o.push(e)})).then((()=>{t(!0)}))}))));await Promise.all(c).then((()=>{h.b.destroy(),n(s.length);const e=s.length;if(e>0){const t=`${e} ${Object(u.b)("phrases.deleted_successfully",{prefix:Object(u.b)("words.vendor",{count:e}).toLocaleLowerCase(),count:e})}`;h.b.success(t)}if(l.length>0&&h.b.info(Object(u.b)("vendors.deactivated_value",{count:l.length})),o.length>0){const e=`${o.length} ${Object(u.b)("phrases.cant_be_deleted",{prefix:Object(u.b)("words.vendor",{count:o.length}).toLocaleLowerCase(),count:o.length})}`;h.b.error(e)}})).finally((()=>{r(),t(!1)}))}),[a]),is_destroying:e}},C=a(750);t.default=()=>{const e=Object(b.a)((e=>e.current_user.permissions)),t=Object(n.useRef)(null),a=Object(n.useRef)(null),{destroyVendors:s}=k(),_=Object(n.useCallback)((e=>{var a;null===(a=t.current)||void 0===a||a.afterDestroyRecord(e)}),[]),p=Object(n.useCallback)((e=>{var t;null===(t=a.current)||void 0===t||t.open({id:e})}),[]),j=Object(n.useCallback)((e=>{s(e,_)}),[_,s]),v=y({handleDestroyVendors:j,openVendorDrawer:p}),h=g(),m=Object(i.a)(e.can_destroy_vendor,(e=>Object(u.b)("phrases.confirm_delete",{model:Object(u.b)("words.vendor",{count:e.length}).toLocaleLowerCase(),count:e.length})),j),O=Object(n.useMemo)((()=>[{label:Object(u.b)("verbs.delete"),icon:Object(f.jsx)(r.a,{}),danger:!0,onClick:m,disabled:!e.can_destroy_vendor}]),[m,e.can_destroy_vendor]),w=Object(n.useCallback)((e=>{var t;null===(t=a.current)||void 0===t||t.open({id:null===e||void 0===e?void 0:e.id})}),[]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(c.a,{ref:t,mass_actions:O,title:Object(u.b)("words.vendor",{count:2}),permissions_key:"vendor",search_placeholder:Object(u.b)("vendors.search_placeholder"),filters:h,columns:v,query:o,select_all_query:l,MobileItem:C.a,getData:e=>{var t;return null===e||void 0===e||null===(t=e.all_inventory_vendors)||void 0===t?void 0:t.all},getTotalCount:e=>{var t;return(null===e||void 0===e||null===(t=e.all_inventory_vendors)||void 0===t?void 0:t.total_count)||0},openDrawer:w}),Object(f.jsx)(d.a,{ref:a,afterSave:()=>{var e;return null===(e=t.current)||void 0===e?void 0:e.refetch()}})]})}},609:function(e,t,a){"use strict";var n=a(0),r=a(50),s=a(159),o=a(53),l=a.n(o),c=a(19),i=a(22);const d=e=>{let{handleChangeRange:t}=e;return Object(i.jsx)(b,{children:u.map((e=>{let{label:a,value:n}=e;return Object(i.jsx)(s.a,{type:"primary",onClick:()=>t(n),children:a},a)}))})};d.displayName="ExtraRangeComponent",t.a=Object(n.memo)(d);const b=c.d.div.withConfig({componentId:"wb__sc-hoi2yi-0"})(["display:flex;flex-wrap:wrap;justify-content:space-between;padding-top:8px;.ant-btn{cursor:pointer;width:49%;text-align:center;margin-bottom:8px;margin-right:0;}"]),u=[{label:Object(r.b)("words.today"),value:[l()(),l()()]},{label:Object(r.b)("date.last_week"),value:[l()().startOf("week").subtract(1,"week"),l()().endOf("week").subtract(1,"week")]},{label:Object(r.b)("date.last_month"),value:[l()().subtract(1,"month").startOf("month"),l()().subtract(1,"month").endOf("month")]},{label:Object(r.b)("date.current_month"),value:[l()().startOf("month"),l()().endOf("month")]},{label:Object(r.b)("date.six_months_ago"),value:[l()().subtract(6,"month"),l()()]},{label:Object(r.b)("date.one_year_ago"),value:[l()().subtract(12,"month"),l()()]}]},610:function(e,t,a){"use strict";a.d(t,"d",(function(){return _})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return j})),a.d(t,"a",(function(){return v}));var n=a(19),r=a(0),s=a(2934),o=a(609),l=a(22);const c=(e,t)=>{let{onRangeChange:a,...n}=e;const[c,i]=Object(r.useState)(!1),b=Object(r.useCallback)((e=>{a(e)}),[a]);return Object(l.jsx)(s.a,{ref:t,showNow:!1,renderExtraFooter:()=>Object(l.jsx)(d,{children:Object(l.jsx)(o.a,{handleChangeRange:b})}),...n,open:c,onOpenChange:i})};c.displayName="SimpleRangePicker";var i=Object(r.memo)(Object(r.forwardRef)(c));const d=n.d.div.withConfig({componentId:"wb__sc-13lwjt0-0"})(["width:265px;"]),b={true:!0,false:!1,all:null,none:null},u=["start_date","end_date","birthday_start_date","birthday_end_date","start_date_open","start_date_close","end_date_open","end_date_close"],_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},a={};return Object.entries(e).forEach((e=>{let[a,n]=e;n in b&&(t[a]=b[n])})),Object.entries(e).forEach((e=>{let[t,n]=e;u.includes(t)&&(a[t]=null===n||void 0===n?void 0:n.format("YYYY-MM-DD"))})),{...e,...t,...a}},p=n.d.div.withConfig({componentId:"wb__sc-gq8qm5-0"})(["display:flex;flex-direction:column;background-color:",";border-radius:16px;box-shadow:0 0 10px 5px #f3f3f3;padding:15px;border:1px solid rgba(0 0 0 / 3%);transition:box-shadow .1s;margin-bottom:5px;.ant-checkbox-wrapper + .ant-checkbox-wrapper{overflow:hidden;margin-left:0;width:100%;:not(:first-child){overflow:hidden;white-space:nowrap;text-overflow:ellipsis;word-break:keep-all;}}.ant-radio-wrapper{margin-right:0;}.ant-checkbox-group-item{margin-right:0;}.ant-calendar-picker-clear{background:transparent;color:",";}.ant-calendar-picker-input{border-top:none;border-left:none;border-right:none;border-radius:0;margin-top:5px;background:transparent;"," &:focus{box-shadow:none;}}.anticon-calendar{color:rgba(0,0,0,.2);}",""],(e=>e.theme.colors.white),(e=>e.theme.dark&&e.theme.dark_white),(e=>e.theme.dark&&`\n      border-color: ${e.theme.dark_secondary};\n      color: ${e.theme.dark_white};\n    `),(e=>e.tags&&Object(n.c)(["display:flex;flex-wrap:wrap;.ant-tag{margin:0 4px 4px 0;cursor:pointer;}"]))),j=Object(n.d)(i).withConfig({componentId:"wb__sc-gq8qm5-1"})(["width:100%;border-top:none;border-left:none;border-right:none;border-radius:0 !important;margin-top:5px;background:transparent;&.ant-picker-focused{box-shadow:none;}"]),v=n.d.div.withConfig({componentId:"wb__sc-gq8qm5-2"})(["min-width:0;width:0;z-index:210;text-overflow:ellipsis;white-space:nowrap;position:sticky;top:calc(","px + 10px);overflow:hidden;max-height:calc(100vh - 60px);align-self:flex-start;transition:width .2s;",""],(e=>e.theme.menu_top_height),(e=>!!e.$visible&&Object(n.c)(["min-width:230px;width:230px;padding-right:7px;overflow-y:auto;overflow-x:hidden;"])))},627:function(e,t,a){"use strict";var n=a(0),r=a(50),s=a(2937),o=a(137),l=a(578),c=a(116),i=a(585),d=a(28),b=a(598);const u={show_filters:!1,page:1,results:20,sort_field:"name",sort_order:"ascend",filters_value:{},visible_columns:[]};var _=(e,t)=>{if(t.type.includes("set_")&&"payload"in t){const a=t.type.split("set_")[1];return{...e,[a]:t.payload}}return e},p=a(53),j=a.n(p),v=a(635),h=a(22);const m={ascend:"ASC",descend:"DESC"},O=e=>e?j()(e):null;var f=a(405),y=a(610),g=a(27),w=a(582),x=a(1814),k=a(148);var C=e=>{const{total_count:t,records:a,results:s,select_all_query:o,validateRow:l=(e=>!0),rowSelector:i=(e=>e.map((e=>e.id)))}=e,[d,b]=Object(n.useState)([]),[u,_]=Object(n.useState)(!1),[p,j]=Object(n.useState)(!1),[v,m]=Object(n.useState)(!1),O=Object(k.a)(),f=Object(n.useCallback)((()=>{_(!1),b([]),m(!1)}),[]),y=Object(n.useCallback)((()=>{const e=c.b.loading(`${Object(r.b)("verbs.selecting")}...`,0);j(!0);const{query:t,variables:a,resolve:n}=o;O.query({query:t,variables:a,fetchPolicy:"network-only"}).then(n((e=>{_(!0),b(i(e))}))).catch((e=>console.error(e))).then((()=>{e(),j(!1)}))}),[O,i,o]),g=Object(n.useCallback)(((e,t)=>{b(i(t))}),[]),w=Object(n.useMemo)((()=>a.filter(l)),[a,l]);return Object(n.useMemo)((()=>({setSelectedRows:b,selected_all:u,selected_rows:d,validated_records:w,total_count:t,resetSelected:f,records:a,results:s,selectAll:y,onChange:g,is_select_mode:v,setIsSelectMode:m,is_selecting_all:p,setSelectedAll:_,setIsSelectingAll:j,getCheckboxProps:e=>({disabled:!l(e)}),selectedRowKeys:d.map((e=>(null===e||void 0===e?void 0:e.id)||e)),columnTitle:Object(h.jsx)(x.a,{className:"table-select-all",indeterminate:!u&&!!d.length&&d.length!==t,checked:u||d.length===t&&t>0,onChange:()=>{if(d.length<w.length)return b(i(w));f()}})})),[u,d,t,f,a,s,y,g,l,w,v,m,p])},S=a(597),$=a(232);const I=Object(n.lazy)((()=>Object($.a)((()=>a.e(12).then(a.bind(null,968)))))),V=Object(n.lazy)((()=>Object($.a)((()=>a.e(7).then(a.bind(null,969)))))),M=()=>{const e=Object(b.b)((e=>e.onSearch)),t=Object(b.b)((e=>e.title));return Object(h.jsx)(S.b,{title:t,onSearch:e,children:Object(h.jsx)(w.a,{Desktop:I,Mobile:V})})};M.displayName="DefaultHeader";var q=M,z=a(76);const R=Object(n.lazy)((()=>Object($.a)((()=>a.e(94).then(a.bind(null,2909)))))),D=Object(n.lazy)((()=>Object($.a)((()=>a.e(67).then(a.bind(null,3082)))))),N=e=>!(null===e||void 0===e||!e.active),T=e=>null===e||void 0===e?void 0:e.id,L=(e,t)=>{var a,p;const{columns:j,filters:x,extra_actions:k,query:S,getTotalCount:$,getData:I,select_all_query:V,validateRow:M=N,rowSelectorKey:L=T,Header:E,expandedRowKeys:F,title:P,storage_key:H=P,has_feature:B=!0,use_storage:A=!0,addon_id:K,has_joyride:Y=!0,show_create_button:J=!0,item_selectable:G=!0,parseFilters:Q=y.d,rowClassName:U,mobileSwipeLeft:W}=e,X=Object(g.a)((e=>e.current_user.permissions)),Z=Object(g.a)((e=>e.is_mobile)),ee=`MagicTableStorage: ${H}`,[te]=s.a.useForm(),ae=(null===(a=j.find((e=>e.sorter)))||void 0===a?void 0:a.key)||j[0].key,ne=(null===(p=j.find((e=>e.defaultSortOrder)))||void 0===p?void 0:p.defaultSortOrder)||j[0].defaultSortOrder||"ascend",re=Object(n.useMemo)((()=>(e=>{const{default_sort_order:t,default_sort_field:a,filters:n,local_storage_key:r,visible_columns:s,use_storage:o}=e,l=Object(d.c)(r);if(l&&o){const e=null===l||void 0===l?void 0:l.filters_value;return null!==e&&void 0!==e&&e.start_date||null!==e&&void 0!==e&&e.end_date||null!==e&&void 0!==e&&e.birthday_start_date||null!==e&&void 0!==e&&e.birthday_end_date||null!==e&&void 0!==e&&e.start_date_open||null!==e&&void 0!==e&&e.start_date_close||null!==e&&void 0!==e&&e.end_date_open||null!==e&&void 0!==e&&e.end_date_close?{...l,filters_value:{...l.filters_value,start_date:O(l.filters_value.start_date),end_date:O(l.filters_value.end_date),birthday_start_date:O(l.filters_value.birthday_start_date),birthday_end_date:O(l.filters_value.birthday_end_date),start_date_open:O(l.filters_value.start_date_open),start_date_close:O(l.filters_value.start_date_close),end_date_open:O(l.filters_value.end_date_open),end_date_close:O(l.filters_value.end_date_close)}}:l}const c=null===n||void 0===n?void 0:n.reduce(((e,t)=>t.default_value?t.rangepicker?{...e,[t.rangepicker.start_date_name]:t.default_value[0],[t.rangepicker.end_date_name]:t.default_value[1]}:{...e,[t.name]:t.default_value}:e),{});return{...u,sort_field:a,sort_order:m[t],filters_value:c,visible_columns:s}})({local_storage_key:ee,filters:x,default_sort_field:ae,default_sort_order:ne,visible_columns:j.filter((e=>e.default_visible)).map((e=>e.key)),use_storage:A})),[j,ae,ne,x,ee,A]),[se,oe]=Object(n.useReducer)(_,re);Object(l.a)((()=>{Object(d.d)(ee,{...se,page:1})}),[se]);const[le,ce]=Object(n.useState)(""),[ie,de]=Object(n.useState)([]),[be,ue]=Object(n.useState)(0),_e=Object(n.useRef)(!1),pe=(e=>{const{columns:t,visible_columns:a=[],dispatch:n}=e,r=t.filter((e=>a.includes(e.key)||e.always_visible)),s=r.findIndex((e=>"actions"===e.key));return s&&(r[s]={...r[s],title:Object(h.jsx)(v.a,{columns:t,visible_columns:a,dispatch:n})}),r})({dispatch:oe,columns:j,visible_columns:se.visible_columns}),je={...Object(n.useMemo)((()=>j.filter((e=>e.include_key_on_query)).reduce(((e,t)=>{var a;return e[t.key]=null===(a=se.visible_columns)||void 0===a?void 0:a.includes(t.key),e}),{})),[j,se.visible_columns]),...Q(se.filters_value),is_mobile:Z,search_query:le,sort_field:se.sort_field,sort_order:se.sort_order,page:se.page,results:se.results},{loading:ve,refetch:he}=Object(f.f)(S,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:je,skip:!B,onError:e=>{console.log(e),z.a.captureException(e),c.b.error(Object(r.b)("phrases.loading_error"))},onCompleted:e=>{ue($(e)),1!==se.page&&_e.current?de((t=>[...t,...I(e)||[]])):de(I(e)||[])}}),me=Object(n.useCallback)((()=>{if(1===se.page)return he();oe({type:"set_page",payload:1})}),[se.page,he]),Oe=Object(n.useCallback)((()=>{_e.current=!0,oe({type:"set_page",payload:se.page+1})}),[se.page]),fe=Object(n.useCallback)(((e,t,a)=>{a.order&&(oe({type:"set_sort_field",payload:a.field}),oe({type:"set_sort_order",payload:"ascend"===a.order?"ASC":"DESC"})),e.current&&oe({type:"set_page",payload:e.current}),e.pageSize&&oe({type:"set_results",payload:e.pageSize})}),[]),ye=C({total_count:be,results:se.results,records:ie,select_all_query:{query:V,variables:je,resolve:e=>t=>{let{data:a}=t;return e(I(a)||[])}},validateRow:M,rowSelector:Object(n.useCallback)((e=>e.filter(M).map(L)),[L,M])}),ge=Object(n.useMemo)((()=>F?F(ie):void 0),[ie,F]),we=Object(n.useCallback)((e=>{he(),ye.resetSelected();const t=Math.ceil((be-e)/se.results);se.page>t&&oe({type:"set_page",payload:t})}),[se.page,he,se.results,ye,be]),xe=Object(n.useCallback)((e=>{oe({type:"set_page",payload:1}),ce(e)}),[ce]),ke=Object(n.useCallback)((e=>{oe({type:"set_filters_value",payload:e}),oe({type:"set_page",payload:1})}),[]),Ce=Object(n.useMemo)((()=>B?e.permissions?e.permissions:e.permissions_key?{can_create:X[`can_create_${e.permissions_key}`],can_edit:X[`can_edit_${e.permissions_key}`],can_access:X[`can_access_${e.permissions_key}`]}:void 0:{can_create:!1,can_edit:!1,can_access:!1}),[B,e.permissions,e.permissions_key,X]),Se=Object(n.useCallback)((()=>{if(ye.resetSelected(),Z)return 1===se.page?void he():void oe({type:"set_page",payload:1});he()}),[Z,he,ye,se.page]);Object(n.useImperativeHandle)(t,(()=>({afterDestroyRecord:we,refetch:Se})));const $e=Object(n.useMemo)((()=>({onSearch:xe,row_selection:ye,onFiltersChange:ke,data_source:ie,form:te,total_count:be,loading:ve,new_columns:pe,onChange:fe,expanded_row_keys:ge,refetch:me,handleFetchMore:Oe,...e,has_feature:B,addon_id:K,has_joyride:Y,show_create_button:J,item_selectable:G,validateRow:M,rowSelectorKey:L,permissions:Ce,...se,dispatch:oe,rowClassName:U,extra_actions:k})),[xe,ye,ke,ie,te,be,ve,pe,fe,ge,me,Oe,e,B,Y,J,M,L,Ce,se,U,k,G,K]),Ie=Object(n.useMemo)((()=>null===x||void 0===x?void 0:x.reduce(((e,t)=>t.default_value?t.rangepicker?{...e,[t.rangepicker.start_date_name]:t.default_value[0],[t.rangepicker.end_date_name]:t.default_value[1]}:{...e,[t.name]:t.default_value}:e),{})),[x]);return Object(h.jsx)(b.a.Provider,{value:$e,children:Object(h.jsxs)(i.b,{children:[E?Object(h.jsx)(E,{}):Object(h.jsx)(q,{}),Object(h.jsx)(s.a,{form:te,component:!1,layout:"vertical",onChange:Object(o.debounce)(ke,1e3),initialValues:{...Ie,...se.filters_value},children:Object(h.jsx)(w.a,{Desktop:R,Mobile:D,mobileSwipeLeft:W})})]})})};L.displayName="MagicTable";t.a=Object(n.memo)(Object(n.forwardRef)(L))},635:function(e,t,a){"use strict";var n=a(0),r=a(50),s=a(1809),o=a(852),l=a(1814),c=a(3052),i=a(19),d=a(22);const b=e=>{let{columns:t,visible_columns:a,dispatch:l,setVisibleColumns:i}=e;const[b,_]=Object(n.useState)(!1),p=Object(n.useCallback)((()=>{const e=t.filter((e=>e.default_visible)).map((e=>e.key));null===l||void 0===l||l({type:"set_visible_columns",payload:e}),null===i||void 0===i||i(e)}),[t,l,i]),j=Object(n.useCallback)((e=>{if(a.includes(e)){const t=a.filter((t=>t!==e));return null===l||void 0===l||l({type:"set_visible_columns",payload:t}),void(null===i||void 0===i||i(t))}const t=[...a,e];null===l||void 0===l||l({type:"set_visible_columns",payload:t}),null===i||void 0===i||i(t)}),[l,i,a]),v=Object(n.useMemo)((()=>{const e=t.reduce(((e,t)=>{if(!t.title||t.always_visible)return e;const n={key:t.key,disabled:t.always_visible,label:Object(d.jsx)(u,{onClick:()=>j(t.key),checked:a.includes(t.key),children:t.title})};return[...e,n]}),[]);return[{key:"default_title",type:"group",label:Object(d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(d.jsx)("span",{children:Object(r.b)("words.column",{count:2})}),Object(d.jsx)("button",{className:"link",onClick:p,children:Object(r.b)("words.default")})]}),children:e}]}),[t,p,j,a]);return Object(d.jsx)(s.a,{menu:{items:v},trigger:["click"],open:b,onOpenChange:_,className:"no-print table-configuration",children:Object(d.jsx)(o.a,{title:Object(r.b)("phrases.column_settings"),placement:"left",children:Object(d.jsx)("div",{className:"link no-print",style:{fontSize:"15px"},children:Object(d.jsx)(c.a,{})})})})};b.displayName="ColumnsSettings",t.a=b;const u=Object(i.d)(l.a).withConfig({componentId:"wb__sc-1oenz8-0"})(["width:100%;"])},667:function(e,t,a){"use strict";var n=a(0),r=a(50),s=a(116);t.a=(e,t,a)=>Object(n.useCallback)((n=>{e?s.c.confirm({centered:!0,className:"webook-modal",title:Object(r.b)("words.attention"),maskClosable:!0,content:t(n),okText:Object(r.b)("phrases.yes_delete"),okType:"danger",cancelText:Object(r.b)("verbs.cancel"),onOk:()=>{a(n)}}):s.b.warning(Object(r.b)("phrases.no_permission_to_do_this"))}),[a,e,t])},701:function(e,t,a){"use strict";var n=a(0),r=a(250);var s=a(2937),o=a(50),l=a(27),c=a(339),i=a(586),d=a(37),b=a(1850),u=a(116),_=a(76);const p=d.e`
  mutation InventoryVendorDrawer ($data: SaveInventoryVendorInput!) {
    saveInventoryVendor (input: $data) {
      success
      errors
      inventory_vendor {
        id
        name
        phone2
      }
    }
  }
`;var j=()=>{const[e,{loading:t}]=Object(b.a)(p);return[async t=>{try{const{data:a}=await e({variables:{data:t}}),{success:n=!1,errors:r=[],inventory_vendor:s}=(null===a||void 0===a?void 0:a.saveInventoryVendor)||{};return null===r||void 0===r||r.forEach((e=>u.b.error(e))),{success:n,inventory_vendor:s}}catch(a){return _.a.captureException(a),u.b.error(Object(o.b)("phrases.generic_save_error_message")),console.error(a),{success:!1,inventory_vendor:void 0}}},{loading:t}]},v=a(2879);const h=d.e`
  query InventoryVendorDrawer ($id: ID) {
    inventory_vendor (id: $id) {
      id name active phone1 phone2 email cnpj insc
      city_id state_id address number complement district cep
    }
  }
`;var m=e=>{let{onCompleted:t}=e;return Object(v.a)(h,{fetchPolicy:"network-only",onCompleted:e=>{const{inventory_vendor:a}=e;t(a)},onError:e=>{_.a.captureException(e),console.log(e)}})},O=a(19),f=a(2824),y=a(2883),g=a(3023),w=a(603),x=a(806),k=a(807),C=a(591),S=a(626),$=a.n(S),I=a(22);var V=e=>{let{id:t,setFieldsValue:a}=e;const c=Object(n.useRef)(null),i=Object(l.a)((e=>e.is_mobile));return Object(n.useEffect)((()=>{let e;return t||(e=setTimeout((()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.focus()}),700)),()=>clearTimeout(e)}),[t]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(s.a.Item,{name:"id",noStyle:!0,children:Object(I.jsx)(f.a,{type:"hidden"})}),Object(I.jsxs)(r.g,{gutter:8,$wrap:!0,children:[Object(I.jsx)(y.a,{xs:24,sm:12,children:Object(I.jsx)(s.a.Item,{name:"name",label:Object(o.b)("words.name"),rules:[{required:!0,message:Object(o.b)("phrases.required_field")}],children:Object(I.jsx)(f.a,{size:i?"large":"middle",ref:c,placeholder:Object(o.b)("words.name"),autoComplete:"off"})})}),Object(I.jsx)(y.a,{xs:24,sm:12,children:Object(I.jsx)(s.a.Item,{name:"email",label:Object(o.b)("words.email"),rules:[{type:"email",message:Object(o.b)("phrases.invalid_email")}],children:Object(I.jsx)(f.a,{placeholder:Object(o.b)("words.email"),autoComplete:"off",size:i?"large":"middle"})})}),Object(I.jsx)(y.a,{xs:24,sm:12,children:Object(I.jsx)(s.a.Item,{name:"phone2",label:Object(o.b)("words.cellphone"),validateTrigger:"onBlur",rules:[{validateTrigger:"onBlur",validator:w.i}],children:Object(I.jsx)(C.a,{size:i?"large":"middle"})})}),Object(I.jsx)(y.a,{xs:24,sm:12,children:Object(I.jsx)(s.a.Item,{name:"phone1",label:Object(o.b)("words.phone"),validateTrigger:"onBlur",rules:[{validateTrigger:"onBlur",validator:w.i}],children:Object(I.jsx)(C.a,{size:i?"large":"middle"})})}),Object(I.jsx)(y.a,{xs:24,sm:12,children:Object(I.jsx)(s.a.Item,{name:"insc",label:Object(o.b)("vendors.state_registration"),children:Object(I.jsx)(f.a,{size:i?"large":"middle",placeholder:Object(o.b)("vendors.state_registration"),autoComplete:"off"})})}),Object(I.jsx)(y.a,{xs:24,sm:12,children:Object(I.jsx)(s.a.Item,{name:"cnpj",label:Object(o.b)("acronyms.cnpj"),children:Object(I.jsx)($.a,{mask:"**.***.***/****-99",maskPlaceholder:null,placeholder:Object(o.b)("acronyms.cnpj"),autoComplete:"off",maxLength:18,children:Object(I.jsx)(f.a,{size:i?"large":"middle",style:{textTransform:"uppercase"}})})})}),Object(I.jsx)(y.a,{span:24,children:Object(I.jsx)(s.a.Item,{name:"active",valuePropName:"checked",initialValue:!0,label:Object(o.b)("words.active"),help:Object(o.b)("vendors.active_description"),children:Object(I.jsx)(g.a,{})})})]}),Object(I.jsx)(x.StyledCollapse,{ghost:!0,expandIconPosition:"end",items:[{key:"address",forceRender:!0,label:Object(I.jsx)(r.h,{$size:20,$semibold:!0,children:Object(o.b)("words.address")}),children:Object(I.jsx)(k.a,{setFieldsValue:a})}]})]})},M=a(581);const q=(e,t)=>{const[a,d]=Object(n.useState)(!1),[b,_]=Object(n.useState)(void 0),[p,v]=Object(n.useState)(void 0),h=Object(l.a)((e=>e.is_mobile)),{afterSave:O}=e,[f]=s.a.useForm(),{resetFields:y,setFieldsValue:g,submit:w}=f,[x,{loading:k}]=j(),C=Object(n.useCallback)((e=>{g(e)}),[g]),[S,{loading:$,error:q}]=m({onCompleted:C}),R=()=>{d(!1)},D=function(){let{id:e,initial_values:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e?(_(e),S({variables:{id:e}})):v(t),d(!0)};Object(n.useImperativeHandle)(t,(()=>({open:D,close:R})));const N=Object(n.useMemo)((()=>b?`${Object(o.b)("verbs.editing")} ${Object(o.b)("words.vendor").toLocaleLowerCase()}`:`${Object(o.b)("words.new")} ${Object(o.b)("words.vendor").toLocaleLowerCase()}`),[b]);return Object(I.jsx)(r.a,{open:a,title:N,width:650,placement:h?"bottom":"right",height:"100%",onClose:R,closable:!0,destroyOnClose:!0,afterOpenChange:e=>{e||(y(),v(void 0),_(void 0))},footer:Object(I.jsx)(M.a,{close:R,submit:w,loading:$||k,disabled:!1}),children:Object(I.jsxs)(z,{children:[Object(I.jsx)(c.a,{loading:$}),Object(I.jsx)(s.a,{form:f,layout:"vertical",onFinish:async e=>{const t=(e=>({...e,phone2:e.phone2&&e.phone2.length<4?null:e.phone2,phone1:e.phone1&&e.phone1.length<4?null:e.phone1}))(e),{success:a,inventory_vendor:n}=await x(t);a&&(u.b.success(Object(o.b)("phrases.saved_successfully",{prefix:Object(o.b)("words.vendor")})),R(),null===O||void 0===O||O(n))},style:{width:"100%"},initialValues:p,children:Object(I.jsx)(i.a,{visible:!!q,small:h,children:Object(I.jsx)(V,{id:b,setFieldsValue:g})})})]})})};q.displayName="VendorDrawer";t.a=Object(n.memo)(Object(n.forwardRef)(q));const z=Object(O.d)(r.g).withConfig({componentId:"wb__sc-264ncu-0"})(["position:relative;"])},716:function(e,t,a){"use strict";var n=a(13),r=a(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-32 736H663.9V602.2h104l15.6-120.7H663.9v-77.1c0-35 9.7-58.8 59.8-58.8h63.9v-108c-11.1-1.5-49-4.8-93.2-4.8-92.2 0-155.3 56.3-155.3 159.6v89H434.9v120.7h104.3V848H176V176h672v672z"}}]},name:"facebook",theme:"outlined"},o=a(71),l=function(e,t){return r.createElement(o.a,Object(n.a)({},e,{ref:t,icon:s}))},c=r.forwardRef(l);t.a=c},717:function(e,t,a){"use strict";var n=a(13),r=a(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 306.9c-113.5 0-205.1 91.6-205.1 205.1S398.5 717.1 512 717.1 717.1 625.5 717.1 512 625.5 306.9 512 306.9zm0 338.4c-73.4 0-133.3-59.9-133.3-133.3S438.6 378.7 512 378.7 645.3 438.6 645.3 512 585.4 645.3 512 645.3zm213.5-394.6c-26.5 0-47.9 21.4-47.9 47.9s21.4 47.9 47.9 47.9 47.9-21.3 47.9-47.9a47.84 47.84 0 00-47.9-47.9zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zm-88 235.8c-7.3 18.2-16.1 31.8-30.2 45.8-14.1 14.1-27.6 22.9-45.8 30.2C695.2 844.7 570.3 840 512 840c-58.3 0-183.3 4.7-235.9-16.1-18.2-7.3-31.8-16.1-45.8-30.2-14.1-14.1-22.9-27.6-30.2-45.8C179.3 695.2 184 570.3 184 512c0-58.3-4.7-183.3 16.1-235.9 7.3-18.2 16.1-31.8 30.2-45.8s27.6-22.9 45.8-30.2C328.7 179.3 453.7 184 512 184s183.3-4.7 235.9 16.1c18.2 7.3 31.8 16.1 45.8 30.2 14.1 14.1 22.9 27.6 30.2 45.8C844.7 328.7 840 453.7 840 512c0 58.3 4.7 183.2-16.2 235.8z"}}]},name:"instagram",theme:"outlined"},o=a(71),l=function(e,t){return r.createElement(o.a,Object(n.a)({},e,{ref:t,icon:s}))},c=r.forwardRef(l);t.a=c},750:function(e,t,a){"use strict";var n=a(0),r=a(583),s=a(19),o=a(591),l=a(117),c=a(22);const i=e=>{const{item:t}=e;return Object(c.jsxs)(d,{children:[Object(c.jsx)(r.b,{width:12,$block:!0,children:null===t||void 0===t?void 0:t.name}),Object(c.jsx)(r.b,{width:12,$block:!0,$color:"gray_1",$size:12,children:(!(null===t||void 0===t||!t.phone2)||!(null===t||void 0===t||!t.phone1))&&Object(c.jsx)(o.a,{hide_input_styles:!0,disabled:!0,value:(null===t||void 0===t?void 0:t.phone2)||(null===t||void 0===t?void 0:t.phone1),inputStyle:{fontSize:12,color:l.a.gray_2}},(null===t||void 0===t?void 0:t.phone2)||(null===t||void 0===t?void 0:t.phone1))})]})};i.displayName="VendorItemMobile",t.a=Object(n.memo)(i);const d=s.d.div.withConfig({componentId:"wb__sc-lot0ij-0"})(["overflow:hidden;padding-top:8px;"])}}]);
//# sourceMappingURL=69.85a325e6.chunk.js.map