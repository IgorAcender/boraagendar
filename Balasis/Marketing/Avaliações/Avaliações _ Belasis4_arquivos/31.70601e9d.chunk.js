(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[31],{1004:function(e,t,a){"use strict";var l=a(13),s=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 256c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm192 200v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8zm-48 396H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm104.1-115.6c1.8-34.5 16.2-66.8 40.8-91.4 26.2-26.2 62-41 99.1-41 37.4 0 72.6 14.6 99.1 41 3.2 3.2 6.3 6.6 9.2 10.1L769.2 673a8 8 0 003 14.1l93.3 22.5c5 1.2 9.8-2.6 9.9-7.7l.6-95.4a8 8 0 00-12.9-6.4l-20.3 15.8C805.4 569.6 748.1 540 684 540c-109.9 0-199.6 86.9-204 195.7-.2 4.5 3.5 8.3 8 8.3h48.1c4.3 0 7.8-3.3 8-7.6zM880 744h-48.1c-4.3 0-7.8 3.3-8 7.6-1.8 34.5-16.2 66.8-40.8 91.4-26.2 26.2-62 41-99.1 41-37.4 0-72.6-14.6-99.1-41-3.2-3.2-6.3-6.6-9.2-10.1l23.1-17.9a8 8 0 00-3-14.1l-93.3-22.5c-5-1.2-9.8 2.6-9.9 7.7l-.6 95.4a8 8 0 0012.9 6.4l20.3-15.8C562.6 918.4 619.9 948 684 948c109.9 0 199.6-86.9 204-195.7.2-4.5-3.5-8.3-8-8.3z"}}]},name:"file-sync",theme:"outlined"},n=a(71),o=function(e,t){return s.createElement(n.a,Object(l.a)({},e,{ref:t,icon:r}))},c=s.forwardRef(o);t.a=c},1652:function(e,t,a){"use strict";var l=a(0),s=a(50),r=a(854),n=a(1004),o=a(3052),c=a(598),i=a(582),d=a(597),u=a(232),b=a(22);const _=Object(l.lazy)((()=>Object(u.a)((()=>a.e(12).then(a.bind(null,968)))))),p=Object(l.lazy)((()=>Object(u.a)((()=>a.e(7).then(a.bind(null,969)))))),h=()=>{const e=Object(c.b)((e=>e.onSearch)),t=Object(c.b)((e=>e.title));return Object(b.jsx)(d.b,{title:t,onSearch:e,tabs:[{label:Object(s.b)("words.subscription_other"),path:"/customer/subscriptions",icon:r.a},{label:Object(s.b)("words.customer_subscription_template_other"),path:"/customer/subscription-templates",icon:n.a},{label:Object(s.b)("words.setting_other"),path:"/customer/subscription-settings",icon:o.a}],children:Object(b.jsx)(i.a,{Desktop:_,Mobile:p})})};h.displayName="Header",t.a=h},609:function(e,t,a){"use strict";var l=a(0),s=a(50),r=a(159),n=a(53),o=a.n(n),c=a(19),i=a(22);const d=e=>{let{handleChangeRange:t}=e;return Object(i.jsx)(u,{children:b.map((e=>{let{label:a,value:l}=e;return Object(i.jsx)(r.a,{type:"primary",onClick:()=>t(l),children:a},a)}))})};d.displayName="ExtraRangeComponent",t.a=Object(l.memo)(d);const u=c.d.div.withConfig({componentId:"wb__sc-hoi2yi-0"})(["display:flex;flex-wrap:wrap;justify-content:space-between;padding-top:8px;.ant-btn{cursor:pointer;width:49%;text-align:center;margin-bottom:8px;margin-right:0;}"]),b=[{label:Object(s.b)("words.today"),value:[o()(),o()()]},{label:Object(s.b)("date.last_week"),value:[o()().startOf("week").subtract(1,"week"),o()().endOf("week").subtract(1,"week")]},{label:Object(s.b)("date.last_month"),value:[o()().subtract(1,"month").startOf("month"),o()().subtract(1,"month").endOf("month")]},{label:Object(s.b)("date.current_month"),value:[o()().startOf("month"),o()().endOf("month")]},{label:Object(s.b)("date.six_months_ago"),value:[o()().subtract(6,"month"),o()()]},{label:Object(s.b)("date.one_year_ago"),value:[o()().subtract(12,"month"),o()()]}]},610:function(e,t,a){"use strict";a.d(t,"d",(function(){return _})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return h})),a.d(t,"a",(function(){return m}));var l=a(19),s=a(0),r=a(2934),n=a(609),o=a(22);const c=(e,t)=>{let{onRangeChange:a,...l}=e;const[c,i]=Object(s.useState)(!1),u=Object(s.useCallback)((e=>{a(e)}),[a]);return Object(o.jsx)(r.a,{ref:t,showNow:!1,renderExtraFooter:()=>Object(o.jsx)(d,{children:Object(o.jsx)(n.a,{handleChangeRange:u})}),...l,open:c,onOpenChange:i})};c.displayName="SimpleRangePicker";var i=Object(s.memo)(Object(s.forwardRef)(c));const d=l.d.div.withConfig({componentId:"wb__sc-13lwjt0-0"})(["width:265px;"]),u={true:!0,false:!1,all:null,none:null},b=["start_date","end_date","birthday_start_date","birthday_end_date","start_date_open","start_date_close","end_date_open","end_date_close"],_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},a={};return Object.entries(e).forEach((e=>{let[a,l]=e;l in u&&(t[a]=u[l])})),Object.entries(e).forEach((e=>{let[t,l]=e;b.includes(t)&&(a[t]=null===l||void 0===l?void 0:l.format("YYYY-MM-DD"))})),{...e,...t,...a}},p=l.d.div.withConfig({componentId:"wb__sc-gq8qm5-0"})(["display:flex;flex-direction:column;background-color:",";border-radius:16px;box-shadow:0 0 10px 5px #f3f3f3;padding:15px;border:1px solid rgba(0 0 0 / 3%);transition:box-shadow .1s;margin-bottom:5px;.ant-checkbox-wrapper + .ant-checkbox-wrapper{overflow:hidden;margin-left:0;width:100%;:not(:first-child){overflow:hidden;white-space:nowrap;text-overflow:ellipsis;word-break:keep-all;}}.ant-radio-wrapper{margin-right:0;}.ant-checkbox-group-item{margin-right:0;}.ant-calendar-picker-clear{background:transparent;color:",";}.ant-calendar-picker-input{border-top:none;border-left:none;border-right:none;border-radius:0;margin-top:5px;background:transparent;"," &:focus{box-shadow:none;}}.anticon-calendar{color:rgba(0,0,0,.2);}",""],(e=>e.theme.colors.white),(e=>e.theme.dark&&e.theme.dark_white),(e=>e.theme.dark&&`\n      border-color: ${e.theme.dark_secondary};\n      color: ${e.theme.dark_white};\n    `),(e=>e.tags&&Object(l.c)(["display:flex;flex-wrap:wrap;.ant-tag{margin:0 4px 4px 0;cursor:pointer;}"]))),h=Object(l.d)(i).withConfig({componentId:"wb__sc-gq8qm5-1"})(["width:100%;border-top:none;border-left:none;border-right:none;border-radius:0 !important;margin-top:5px;background:transparent;&.ant-picker-focused{box-shadow:none;}"]),m=l.d.div.withConfig({componentId:"wb__sc-gq8qm5-2"})(["min-width:0;width:0;z-index:210;text-overflow:ellipsis;white-space:nowrap;position:sticky;top:calc(","px + 10px);overflow:hidden;max-height:calc(100vh - 60px);align-self:flex-start;transition:width .2s;",""],(e=>e.theme.menu_top_height),(e=>!!e.$visible&&Object(l.c)(["min-width:230px;width:230px;padding-right:7px;overflow-y:auto;overflow-x:hidden;"])))},627:function(e,t,a){"use strict";var l=a(0),s=a(50),r=a(2937),n=a(137),o=a(578),c=a(116),i=a(585),d=a(28),u=a(598);const b={show_filters:!1,page:1,results:20,sort_field:"name",sort_order:"ascend",filters_value:{},visible_columns:[]};var _=(e,t)=>{if(t.type.includes("set_")&&"payload"in t){const a=t.type.split("set_")[1];return{...e,[a]:t.payload}}return e},p=a(53),h=a.n(p),m=a(635),v=a(22);const f={ascend:"ASC",descend:"DESC"},j=e=>e?h()(e):null;var g=a(405),O=a(610),y=a(27),w=a(582),k=a(1814),x=a(148);var C=e=>{const{total_count:t,records:a,results:r,select_all_query:n,validateRow:o=(e=>!0),rowSelector:i=(e=>e.map((e=>e.id)))}=e,[d,u]=Object(l.useState)([]),[b,_]=Object(l.useState)(!1),[p,h]=Object(l.useState)(!1),[m,f]=Object(l.useState)(!1),j=Object(x.a)(),g=Object(l.useCallback)((()=>{_(!1),u([]),f(!1)}),[]),O=Object(l.useCallback)((()=>{const e=c.b.loading(`${Object(s.b)("verbs.selecting")}...`,0);h(!0);const{query:t,variables:a,resolve:l}=n;j.query({query:t,variables:a,fetchPolicy:"network-only"}).then(l((e=>{_(!0),u(i(e))}))).catch((e=>console.error(e))).then((()=>{e(),h(!1)}))}),[j,i,n]),y=Object(l.useCallback)(((e,t)=>{u(i(t))}),[]),w=Object(l.useMemo)((()=>a.filter(o)),[a,o]);return Object(l.useMemo)((()=>({setSelectedRows:u,selected_all:b,selected_rows:d,validated_records:w,total_count:t,resetSelected:g,records:a,results:r,selectAll:O,onChange:y,is_select_mode:m,setIsSelectMode:f,is_selecting_all:p,setSelectedAll:_,setIsSelectingAll:h,getCheckboxProps:e=>({disabled:!o(e)}),selectedRowKeys:d.map((e=>(null===e||void 0===e?void 0:e.id)||e)),columnTitle:Object(v.jsx)(k.a,{className:"table-select-all",indeterminate:!b&&!!d.length&&d.length!==t,checked:b||d.length===t&&t>0,onChange:()=>{if(d.length<w.length)return u(i(w));g()}})})),[b,d,t,g,a,r,O,y,o,w,m,f,p])},S=a(597),M=a(232);const z=Object(l.lazy)((()=>Object(M.a)((()=>a.e(12).then(a.bind(null,968)))))),R=Object(l.lazy)((()=>Object(M.a)((()=>a.e(7).then(a.bind(null,969)))))),q=()=>{const e=Object(u.b)((e=>e.onSearch)),t=Object(u.b)((e=>e.title));return Object(v.jsx)(S.b,{title:t,onSearch:e,children:Object(v.jsx)(w.a,{Desktop:z,Mobile:R})})};q.displayName="DefaultHeader";var H=q,N=a(76);const D=Object(l.lazy)((()=>Object(M.a)((()=>a.e(94).then(a.bind(null,2909)))))),E=Object(l.lazy)((()=>Object(M.a)((()=>a.e(67).then(a.bind(null,3082)))))),I=e=>!(null===e||void 0===e||!e.active),V=e=>null===e||void 0===e?void 0:e.id,$=(e,t)=>{var a,p;const{columns:h,filters:k,extra_actions:x,query:S,getTotalCount:M,getData:z,select_all_query:R,validateRow:q=I,rowSelectorKey:$=V,Header:A,expandedRowKeys:F,title:P,storage_key:K=P,has_feature:T=!0,use_storage:Y=!0,addon_id:L,has_joyride:B=!0,show_create_button:J=!0,item_selectable:G=!0,parseFilters:Q=O.d,rowClassName:U,mobileSwipeLeft:W}=e,X=Object(y.a)((e=>e.current_user.permissions)),Z=Object(y.a)((e=>e.is_mobile)),ee=`MagicTableStorage: ${K}`,[te]=r.a.useForm(),ae=(null===(a=h.find((e=>e.sorter)))||void 0===a?void 0:a.key)||h[0].key,le=(null===(p=h.find((e=>e.defaultSortOrder)))||void 0===p?void 0:p.defaultSortOrder)||h[0].defaultSortOrder||"ascend",se=Object(l.useMemo)((()=>(e=>{const{default_sort_order:t,default_sort_field:a,filters:l,local_storage_key:s,visible_columns:r,use_storage:n}=e,o=Object(d.c)(s);if(o&&n){const e=null===o||void 0===o?void 0:o.filters_value;return null!==e&&void 0!==e&&e.start_date||null!==e&&void 0!==e&&e.end_date||null!==e&&void 0!==e&&e.birthday_start_date||null!==e&&void 0!==e&&e.birthday_end_date||null!==e&&void 0!==e&&e.start_date_open||null!==e&&void 0!==e&&e.start_date_close||null!==e&&void 0!==e&&e.end_date_open||null!==e&&void 0!==e&&e.end_date_close?{...o,filters_value:{...o.filters_value,start_date:j(o.filters_value.start_date),end_date:j(o.filters_value.end_date),birthday_start_date:j(o.filters_value.birthday_start_date),birthday_end_date:j(o.filters_value.birthday_end_date),start_date_open:j(o.filters_value.start_date_open),start_date_close:j(o.filters_value.start_date_close),end_date_open:j(o.filters_value.end_date_open),end_date_close:j(o.filters_value.end_date_close)}}:o}const c=null===l||void 0===l?void 0:l.reduce(((e,t)=>t.default_value?t.rangepicker?{...e,[t.rangepicker.start_date_name]:t.default_value[0],[t.rangepicker.end_date_name]:t.default_value[1]}:{...e,[t.name]:t.default_value}:e),{});return{...b,sort_field:a,sort_order:f[t],filters_value:c,visible_columns:r}})({local_storage_key:ee,filters:k,default_sort_field:ae,default_sort_order:le,visible_columns:h.filter((e=>e.default_visible)).map((e=>e.key)),use_storage:Y})),[h,ae,le,k,ee,Y]),[re,ne]=Object(l.useReducer)(_,se);Object(o.a)((()=>{Object(d.d)(ee,{...re,page:1})}),[re]);const[oe,ce]=Object(l.useState)(""),[ie,de]=Object(l.useState)([]),[ue,be]=Object(l.useState)(0),_e=Object(l.useRef)(!1),pe=(e=>{const{columns:t,visible_columns:a=[],dispatch:l}=e,s=t.filter((e=>a.includes(e.key)||e.always_visible)),r=s.findIndex((e=>"actions"===e.key));return r&&(s[r]={...s[r],title:Object(v.jsx)(m.a,{columns:t,visible_columns:a,dispatch:l})}),s})({dispatch:ne,columns:h,visible_columns:re.visible_columns}),he={...Object(l.useMemo)((()=>h.filter((e=>e.include_key_on_query)).reduce(((e,t)=>{var a;return e[t.key]=null===(a=re.visible_columns)||void 0===a?void 0:a.includes(t.key),e}),{})),[h,re.visible_columns]),...Q(re.filters_value),is_mobile:Z,search_query:oe,sort_field:re.sort_field,sort_order:re.sort_order,page:re.page,results:re.results},{loading:me,refetch:ve}=Object(g.f)(S,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:he,skip:!T,onError:e=>{console.log(e),N.a.captureException(e),c.b.error(Object(s.b)("phrases.loading_error"))},onCompleted:e=>{be(M(e)),1!==re.page&&_e.current?de((t=>[...t,...z(e)||[]])):de(z(e)||[])}}),fe=Object(l.useCallback)((()=>{if(1===re.page)return ve();ne({type:"set_page",payload:1})}),[re.page,ve]),je=Object(l.useCallback)((()=>{_e.current=!0,ne({type:"set_page",payload:re.page+1})}),[re.page]),ge=Object(l.useCallback)(((e,t,a)=>{a.order&&(ne({type:"set_sort_field",payload:a.field}),ne({type:"set_sort_order",payload:"ascend"===a.order?"ASC":"DESC"})),e.current&&ne({type:"set_page",payload:e.current}),e.pageSize&&ne({type:"set_results",payload:e.pageSize})}),[]),Oe=C({total_count:ue,results:re.results,records:ie,select_all_query:{query:R,variables:he,resolve:e=>t=>{let{data:a}=t;return e(z(a)||[])}},validateRow:q,rowSelector:Object(l.useCallback)((e=>e.filter(q).map($)),[$,q])}),ye=Object(l.useMemo)((()=>F?F(ie):void 0),[ie,F]),we=Object(l.useCallback)((e=>{ve(),Oe.resetSelected();const t=Math.ceil((ue-e)/re.results);re.page>t&&ne({type:"set_page",payload:t})}),[re.page,ve,re.results,Oe,ue]),ke=Object(l.useCallback)((e=>{ne({type:"set_page",payload:1}),ce(e)}),[ce]),xe=Object(l.useCallback)((e=>{ne({type:"set_filters_value",payload:e}),ne({type:"set_page",payload:1})}),[]),Ce=Object(l.useMemo)((()=>T?e.permissions?e.permissions:e.permissions_key?{can_create:X[`can_create_${e.permissions_key}`],can_edit:X[`can_edit_${e.permissions_key}`],can_access:X[`can_access_${e.permissions_key}`]}:void 0:{can_create:!1,can_edit:!1,can_access:!1}),[T,e.permissions,e.permissions_key,X]),Se=Object(l.useCallback)((()=>{if(Oe.resetSelected(),Z)return 1===re.page?void ve():void ne({type:"set_page",payload:1});ve()}),[Z,ve,Oe,re.page]);Object(l.useImperativeHandle)(t,(()=>({afterDestroyRecord:we,refetch:Se})));const Me=Object(l.useMemo)((()=>({onSearch:ke,row_selection:Oe,onFiltersChange:xe,data_source:ie,form:te,total_count:ue,loading:me,new_columns:pe,onChange:ge,expanded_row_keys:ye,refetch:fe,handleFetchMore:je,...e,has_feature:T,addon_id:L,has_joyride:B,show_create_button:J,item_selectable:G,validateRow:q,rowSelectorKey:$,permissions:Ce,...re,dispatch:ne,rowClassName:U,extra_actions:x})),[ke,Oe,xe,ie,te,ue,me,pe,ge,ye,fe,je,e,T,B,J,q,$,Ce,re,U,x,G,L]),ze=Object(l.useMemo)((()=>null===k||void 0===k?void 0:k.reduce(((e,t)=>t.default_value?t.rangepicker?{...e,[t.rangepicker.start_date_name]:t.default_value[0],[t.rangepicker.end_date_name]:t.default_value[1]}:{...e,[t.name]:t.default_value}:e),{})),[k]);return Object(v.jsx)(u.a.Provider,{value:Me,children:Object(v.jsxs)(i.b,{children:[A?Object(v.jsx)(A,{}):Object(v.jsx)(H,{}),Object(v.jsx)(r.a,{form:te,component:!1,layout:"vertical",onChange:Object(n.debounce)(xe,1e3),initialValues:{...ze,...re.filters_value},children:Object(v.jsx)(w.a,{Desktop:D,Mobile:E,mobileSwipeLeft:W})})]})})};$.displayName="MagicTable";t.a=Object(l.memo)(Object(l.forwardRef)($))},635:function(e,t,a){"use strict";var l=a(0),s=a(50),r=a(1809),n=a(852),o=a(1814),c=a(3052),i=a(19),d=a(22);const u=e=>{let{columns:t,visible_columns:a,dispatch:o,setVisibleColumns:i}=e;const[u,_]=Object(l.useState)(!1),p=Object(l.useCallback)((()=>{const e=t.filter((e=>e.default_visible)).map((e=>e.key));null===o||void 0===o||o({type:"set_visible_columns",payload:e}),null===i||void 0===i||i(e)}),[t,o,i]),h=Object(l.useCallback)((e=>{if(a.includes(e)){const t=a.filter((t=>t!==e));return null===o||void 0===o||o({type:"set_visible_columns",payload:t}),void(null===i||void 0===i||i(t))}const t=[...a,e];null===o||void 0===o||o({type:"set_visible_columns",payload:t}),null===i||void 0===i||i(t)}),[o,i,a]),m=Object(l.useMemo)((()=>{const e=t.reduce(((e,t)=>{if(!t.title||t.always_visible)return e;const l={key:t.key,disabled:t.always_visible,label:Object(d.jsx)(b,{onClick:()=>h(t.key),checked:a.includes(t.key),children:t.title})};return[...e,l]}),[]);return[{key:"default_title",type:"group",label:Object(d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(d.jsx)("span",{children:Object(s.b)("words.column",{count:2})}),Object(d.jsx)("button",{className:"link",onClick:p,children:Object(s.b)("words.default")})]}),children:e}]}),[t,p,h,a]);return Object(d.jsx)(r.a,{menu:{items:m},trigger:["click"],open:u,onOpenChange:_,className:"no-print table-configuration",children:Object(d.jsx)(n.a,{title:Object(s.b)("phrases.column_settings"),placement:"left",children:Object(d.jsx)("div",{className:"link no-print",style:{fontSize:"15px"},children:Object(d.jsx)(c.a,{})})})})};u.displayName="ColumnsSettings",t.a=u;const b=Object(i.d)(o.a).withConfig({componentId:"wb__sc-1oenz8-0"})(["width:100%;"])},854:function(e,t,a){"use strict";var l=a(13),s=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z"}}]},name:"audit",theme:"outlined"},n=a(71),o=function(e,t){return s.createElement(n.a,Object(l.a)({},e,{ref:t,icon:r}))},c=s.forwardRef(o);t.a=c}}]);
//# sourceMappingURL=31.70601e9d.chunk.js.map