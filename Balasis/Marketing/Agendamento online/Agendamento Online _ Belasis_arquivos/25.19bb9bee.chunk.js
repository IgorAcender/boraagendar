(this["webpackJsonpwebook-react"]=this["webpackJsonpwebook-react"]||[]).push([[25],{1041:function(e,t,a){"use strict";var s=a(116),r=a(37),l=a(1850),n=a(76),c=a(50);const o=r.e`
  mutation MassActionUpdateProducts($data: UpdateInventoryProductsInput!) {
    updateInventoryProducts(input: $data) {
      success
      errors
    }
  }
`;t.a=()=>{const[e,{loading:t}]=Object(l.a)(o);return[async t=>{const a=s.b.loading(`${Object(c.b)("verbs.wait")}...`,0);try{const{data:r}=await e({variables:{data:t}}),{success:l,errors:n}=(null===r||void 0===r?void 0:r.updateInventoryProducts)||{};return null===n||void 0===n||n.map((e=>s.b.error(e))),{success:l,errors:n||[]}}catch(r){return n.a.captureException(r),console.error(r),s.b.error(Object(c.b)("phrases.generic_save_error_message")),{success:!1,errors:[]}}finally{a()}},{loading:t}]}},1531:function(e,t,a){"use strict";var s=a(37),r=a(1850),l=a(50),n=a(116);const c=s.e`
  mutation DestroyAllServices($data: DestroyAllInventoryProductInput!) {
    destroyAllInventoryProducts(input: $data) {
      success
      errors
      failures {
        inventory_product { id description }
        errors
        deactivated
      }
    }
  }
`;t.a=()=>{const[e,{loading:t}]=Object(r.a)(c);return[async t=>{const a=n.b.loading(`${Object(l.b)("verbs.wait")}...`,0);try{const{data:s}=await e({variables:{data:t}}),{success:r=!1,failures:l=[],errors:c=[]}=(null===s||void 0===s?void 0:s.destroyAllInventoryProducts)||{};return null===c||void 0===c||c.map((e=>n.b.error(e))),{success:r,failures:l||[]}}catch(s){return n.b.error(Object(l.b)("phrases.generic_save_error_message")),console.error(s),{success:!1,failures:[]}}finally{a()}},t]}},1532:function(e,t,a){"use strict";var s=a(116),r=a(37),l=a(1850),n=a(50);const c=r.e`
  mutation DestroyService($data: DestroyInventoryProductInput!) {
    destroyInventoryProduct(input: $data) {
      success deactivated errors
    }
  }
`;t.a=()=>{const[e,{loading:t}]=Object(l.a)(c);return[async t=>{const a=s.b.loading(`${Object(n.b)("verbs.wait")}...`,0);try{const{data:s}=await e({variables:{data:t}});let{success:r=!1,errors:l=[],deactivated:n=!1}=(null===s||void 0===s?void 0:s.destroyInventoryProduct)||{};return{success:r,deactivated:n,errors:l||[]}}catch(r){return s.b.error(Object(n.b)("phrases.generic_save_error_message")),console.error(r),{success:!1}}finally{a()}},t]}},1830:function(e,t,a){"use strict";var s=a(0),r=a(50),l=a(250),n=a(2937),c=a(1256),o=a(27),i=a(608),d=a(1041),u=a(581),b=a(538),_=a(2838),p=a(579),j=a(652),v=a(22);var m=e=>{let{field:t,setFieldsValue:a}=e;const s=e=>{"fix_value"===e&&a({value_type:"value"})},l=[{value:"increase_value",label:Object(r.b)("products.mass_actions.increase_value_in")},{value:"decrease_value",label:Object(r.b)("products.mass_actions.decrease_value_in")},{value:"fix_value",label:Object(r.b)("products.mass_actions.update_fixed_value")}];return["price_cents","additional_cost_cents","cost_cents","employee_price_cents"].includes(t)?Object(v.jsx)(n.a.Item,{label:Object(r.b)("words.action"),children:Object(v.jsxs)(b.a.Compact,{block:!0,children:[Object(v.jsx)(n.a.Item,{name:"action",initialValue:"increase_value",noStyle:!0,children:Object(v.jsx)(c.a,{style:{width:200},onChange:s,children:l.map((e=>Object(v.jsx)(c.a.Option,{value:e.value,children:e.label},e.value)))})}),Object(v.jsx)(n.a.Item,{dependencies:["action"],noStyle:!0,children:e=>{let{getFieldValue:t}=e;const a=t("action");return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(n.a.Item,{name:"value_type",initialValue:"percentage",noStyle:!0,children:Object(v.jsxs)(c.a,{style:{width:80},children:[Object(v.jsx)(c.a.Option,{value:"value",children:Object(p.h)()}),"fix_value"!==a&&Object(v.jsx)(c.a.Option,{value:"percentage",children:"%"})]})}),Object(v.jsx)(n.a.Item,{name:"value",noStyle:!0,initialValue:0,children:Object(v.jsx)(_.a,{min:0,style:{width:"calc(100% - 280px)"},parser:p.t,formatter:e=>Object(p.s)(e),className:"hide-number-button"})})]})}})]})}):"commission"===t?Object(v.jsx)(n.a.Item,{label:Object(r.b)("words.action"),children:Object(v.jsxs)(b.a.Compact,{block:!0,children:[Object(v.jsx)(n.a.Item,{name:"action",noStyle:!0,initialValue:"increase_value",children:Object(v.jsx)(c.a,{style:{width:200},children:l.map((e=>Object(v.jsx)(c.a.Option,{value:e.value,children:e.label},e.value)))})}),Object(v.jsx)(n.a.Item,{name:"value",noStyle:!0,initialValue:0,children:Object(v.jsx)(_.a,{prefix:"%",min:0,style:{width:"calc(100% - 200px)"},parser:p.t,formatter:e=>Object(p.s)(e),className:"hide-number-button"})})]})}):"duration"===t?Object(v.jsx)(n.a.Item,{name:"value",label:Object(r.b)("words.value"),initialValue:0,getValueFromEvent:e=>60*parseInt(e),getValueProps:e=>e?{value:parseInt(e)/60}:{value:0},children:Object(v.jsx)(j.b,{style:{width:"100%"},getPopupContainer:e=>e.parentElement||document.body})}):"return_time"===t?Object(v.jsx)(n.a.Item,{name:"value",initialValue:0,label:Object(r.b)("words.value"),children:Object(v.jsx)(_.a,{min:0,style:{width:"100%"}})}):null},h=a(116);const O=(e,t)=>{const{is_service:a,afterSave:b}=e,[_,p]=Object(s.useState)(!1),[j,O]=Object(s.useState)("price_cents"),[f,y]=Object(s.useState)([]),g=Object(o.a)((e=>e.is_mobile)),[w]=n.a.useForm(),{resetFields:x,submit:k,setFieldsValue:C}=w,S=Object(s.useCallback)((e=>{y(e),p(!0)}),[]),I=Object(s.useCallback)((()=>{p(!1)}),[]);Object(s.useImperativeHandle)(t,(()=>({close:I,open:S})));const[M,{loading:R}]=Object(d.a)(),N=Object(s.useCallback)((async e=>{const{success:t,errors:s=[]}=await M({product_ids:f,field:j,...e});if(!t)return;const l=f.length-s.length,n=Object(r.b)("phrases.update_successfully",{prefix:a?Object(r.b)("words.service",{count:l}):Object(r.b)("words.product",{count:l}),count:l});h.b.success(n),I(),null===b||void 0===b||b()}),[M,f,j,a,b,I]),P=Object(s.useCallback)((e=>{i.a.information({title:Object(r.b)("products.mass_actions.irreversible_title"),className:"webook-modal",content:Object(r.b)("products.mass_actions.irreversible_description"),okText:Object(r.b)("verbs.continue"),cancelText:Object(r.b)("verbs.cancel"),onOk:()=>N(e),maskClosable:!0,useConfirm:!0})}),[N]),$=Object(s.useCallback)((e=>{e||(x(),O("price_cents"),y([]))}),[x]),q=Object(s.useCallback)((()=>{const e=[{value:"price_cents",label:Object(r.b)("words.sale_price")},{value:"additional_cost_cents",label:Object(r.b)("phrases.additional_cost")},{value:"commission",label:Object(r.b)("words.commission")},{value:"return_time",label:Object(r.b)("product_service.return.period")}];return a||e.push({value:"cost_cents",label:Object(r.b)("products.drawer.register.purchase_cost")},{value:"employee_price_cents",label:Object(r.b)("products.drawer.register.price_for_employee")}),a&&e.push({value:"duration",label:Object(r.b)("words.duration")}),e}),[a]);return Object(v.jsx)(l.a,{open:_,title:Object(r.b)("phrases.mass_actions"),width:500,placement:g?"bottom":"right",height:"100%",onClose:I,closable:!0,destroyOnClose:!0,footer:Object(v.jsx)(u.a,{close:I,submit:k,loading:R}),afterOpenChange:$,push:!1,children:Object(v.jsxs)(n.a,{form:w,layout:"vertical",onFinish:P,children:[Object(v.jsx)(n.a.Item,{label:Object(r.b)("products.mass_actions.change_item"),children:Object(v.jsx)(c.a,{value:j,onChange:O,children:q().map((e=>Object(v.jsx)(c.a.Option,{value:e.value,children:e.label},e.value)))})}),Object(v.jsx)(m,{field:j,setFieldsValue:C})]})})};O.displayName="MassActionsDrawer";t.a=Object(s.forwardRef)(O)},2872:function(e,t,a){"use strict";var s=a(13),r=a(0),l={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512.5 190.4l-94.4 191.3-211.2 30.7 152.8 149-36.1 210.3 188.9-99.3 188.9 99.2-36.1-210.3 152.8-148.9-211.2-30.7z",fill:t}},{tag:"path",attrs:{d:"M908.6 352.8l-253.9-36.9L541.2 85.8c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L370.3 315.9l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1L239 839.4a31.95 31.95 0 0046.4 33.7l227.1-119.4 227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM665.3 561.3l36.1 210.3-188.9-99.2-188.9 99.3 36.1-210.3-152.8-149 211.2-30.7 94.4-191.3 94.4 191.3 211.2 30.7-152.8 148.9z",fill:e}}]}},name:"star",theme:"twotone"},n=a(71),c=function(e,t){return r.createElement(n.a,Object(s.a)({},e,{ref:t,icon:l}))},o=r.forwardRef(c);t.a=o},609:function(e,t,a){"use strict";var s=a(0),r=a(50),l=a(159),n=a(53),c=a.n(n),o=a(19),i=a(22);const d=e=>{let{handleChangeRange:t}=e;return Object(i.jsx)(u,{children:b.map((e=>{let{label:a,value:s}=e;return Object(i.jsx)(l.a,{type:"primary",onClick:()=>t(s),children:a},a)}))})};d.displayName="ExtraRangeComponent",t.a=Object(s.memo)(d);const u=o.d.div.withConfig({componentId:"wb__sc-hoi2yi-0"})(["display:flex;flex-wrap:wrap;justify-content:space-between;padding-top:8px;.ant-btn{cursor:pointer;width:49%;text-align:center;margin-bottom:8px;margin-right:0;}"]),b=[{label:Object(r.b)("words.today"),value:[c()(),c()()]},{label:Object(r.b)("date.last_week"),value:[c()().startOf("week").subtract(1,"week"),c()().endOf("week").subtract(1,"week")]},{label:Object(r.b)("date.last_month"),value:[c()().subtract(1,"month").startOf("month"),c()().subtract(1,"month").endOf("month")]},{label:Object(r.b)("date.current_month"),value:[c()().startOf("month"),c()().endOf("month")]},{label:Object(r.b)("date.six_months_ago"),value:[c()().subtract(6,"month"),c()()]},{label:Object(r.b)("date.one_year_ago"),value:[c()().subtract(12,"month"),c()()]}]},610:function(e,t,a){"use strict";a.d(t,"d",(function(){return _})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return j})),a.d(t,"a",(function(){return v}));var s=a(19),r=a(0),l=a(2934),n=a(609),c=a(22);const o=(e,t)=>{let{onRangeChange:a,...s}=e;const[o,i]=Object(r.useState)(!1),u=Object(r.useCallback)((e=>{a(e)}),[a]);return Object(c.jsx)(l.a,{ref:t,showNow:!1,renderExtraFooter:()=>Object(c.jsx)(d,{children:Object(c.jsx)(n.a,{handleChangeRange:u})}),...s,open:o,onOpenChange:i})};o.displayName="SimpleRangePicker";var i=Object(r.memo)(Object(r.forwardRef)(o));const d=s.d.div.withConfig({componentId:"wb__sc-13lwjt0-0"})(["width:265px;"]),u={true:!0,false:!1,all:null,none:null},b=["start_date","end_date","birthday_start_date","birthday_end_date","start_date_open","start_date_close","end_date_open","end_date_close"],_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},a={};return Object.entries(e).forEach((e=>{let[a,s]=e;s in u&&(t[a]=u[s])})),Object.entries(e).forEach((e=>{let[t,s]=e;b.includes(t)&&(a[t]=null===s||void 0===s?void 0:s.format("YYYY-MM-DD"))})),{...e,...t,...a}},p=s.d.div.withConfig({componentId:"wb__sc-gq8qm5-0"})(["display:flex;flex-direction:column;background-color:",";border-radius:16px;box-shadow:0 0 10px 5px #f3f3f3;padding:15px;border:1px solid rgba(0 0 0 / 3%);transition:box-shadow .1s;margin-bottom:5px;.ant-checkbox-wrapper + .ant-checkbox-wrapper{overflow:hidden;margin-left:0;width:100%;:not(:first-child){overflow:hidden;white-space:nowrap;text-overflow:ellipsis;word-break:keep-all;}}.ant-radio-wrapper{margin-right:0;}.ant-checkbox-group-item{margin-right:0;}.ant-calendar-picker-clear{background:transparent;color:",";}.ant-calendar-picker-input{border-top:none;border-left:none;border-right:none;border-radius:0;margin-top:5px;background:transparent;"," &:focus{box-shadow:none;}}.anticon-calendar{color:rgba(0,0,0,.2);}",""],(e=>e.theme.colors.white),(e=>e.theme.dark&&e.theme.dark_white),(e=>e.theme.dark&&`\n      border-color: ${e.theme.dark_secondary};\n      color: ${e.theme.dark_white};\n    `),(e=>e.tags&&Object(s.c)(["display:flex;flex-wrap:wrap;.ant-tag{margin:0 4px 4px 0;cursor:pointer;}"]))),j=Object(s.d)(i).withConfig({componentId:"wb__sc-gq8qm5-1"})(["width:100%;border-top:none;border-left:none;border-right:none;border-radius:0 !important;margin-top:5px;background:transparent;&.ant-picker-focused{box-shadow:none;}"]),v=s.d.div.withConfig({componentId:"wb__sc-gq8qm5-2"})(["min-width:0;width:0;z-index:210;text-overflow:ellipsis;white-space:nowrap;position:sticky;top:calc(","px + 10px);overflow:hidden;max-height:calc(100vh - 60px);align-self:flex-start;transition:width .2s;",""],(e=>e.theme.menu_top_height),(e=>!!e.$visible&&Object(s.c)(["min-width:230px;width:230px;padding-right:7px;overflow-y:auto;overflow-x:hidden;"])))},627:function(e,t,a){"use strict";var s=a(0),r=a(50),l=a(2937),n=a(137),c=a(578),o=a(116),i=a(585),d=a(28),u=a(598);const b={show_filters:!1,page:1,results:20,sort_field:"name",sort_order:"ascend",filters_value:{},visible_columns:[]};var _=(e,t)=>{if(t.type.includes("set_")&&"payload"in t){const a=t.type.split("set_")[1];return{...e,[a]:t.payload}}return e},p=a(53),j=a.n(p),v=a(635),m=a(22);const h={ascend:"ASC",descend:"DESC"},O=e=>e?j()(e):null;var f=a(405),y=a(610),g=a(27),w=a(582),x=a(1814),k=a(148);var C=e=>{const{total_count:t,records:a,results:l,select_all_query:n,validateRow:c=(e=>!0),rowSelector:i=(e=>e.map((e=>e.id)))}=e,[d,u]=Object(s.useState)([]),[b,_]=Object(s.useState)(!1),[p,j]=Object(s.useState)(!1),[v,h]=Object(s.useState)(!1),O=Object(k.a)(),f=Object(s.useCallback)((()=>{_(!1),u([]),h(!1)}),[]),y=Object(s.useCallback)((()=>{const e=o.b.loading(`${Object(r.b)("verbs.selecting")}...`,0);j(!0);const{query:t,variables:a,resolve:s}=n;O.query({query:t,variables:a,fetchPolicy:"network-only"}).then(s((e=>{_(!0),u(i(e))}))).catch((e=>console.error(e))).then((()=>{e(),j(!1)}))}),[O,i,n]),g=Object(s.useCallback)(((e,t)=>{u(i(t))}),[]),w=Object(s.useMemo)((()=>a.filter(c)),[a,c]);return Object(s.useMemo)((()=>({setSelectedRows:u,selected_all:b,selected_rows:d,validated_records:w,total_count:t,resetSelected:f,records:a,results:l,selectAll:y,onChange:g,is_select_mode:v,setIsSelectMode:h,is_selecting_all:p,setSelectedAll:_,setIsSelectingAll:j,getCheckboxProps:e=>({disabled:!c(e)}),selectedRowKeys:d.map((e=>(null===e||void 0===e?void 0:e.id)||e)),columnTitle:Object(m.jsx)(x.a,{className:"table-select-all",indeterminate:!b&&!!d.length&&d.length!==t,checked:b||d.length===t&&t>0,onChange:()=>{if(d.length<w.length)return u(i(w));f()}})})),[b,d,t,f,a,l,y,g,c,w,v,h,p])},S=a(597),I=a(232);const M=Object(s.lazy)((()=>Object(I.a)((()=>a.e(12).then(a.bind(null,968)))))),R=Object(s.lazy)((()=>Object(I.a)((()=>a.e(7).then(a.bind(null,969)))))),N=()=>{const e=Object(u.b)((e=>e.onSearch)),t=Object(u.b)((e=>e.title));return Object(m.jsx)(S.b,{title:t,onSearch:e,children:Object(m.jsx)(w.a,{Desktop:M,Mobile:R})})};N.displayName="DefaultHeader";var P=N,$=a(76);const q=Object(s.lazy)((()=>Object(I.a)((()=>a.e(94).then(a.bind(null,2909)))))),V=Object(s.lazy)((()=>Object(I.a)((()=>a.e(67).then(a.bind(null,3082)))))),D=e=>!(null===e||void 0===e||!e.active),F=e=>null===e||void 0===e?void 0:e.id,z=(e,t)=>{var a,p;const{columns:j,filters:x,extra_actions:k,query:S,getTotalCount:I,getData:M,select_all_query:R,validateRow:N=D,rowSelectorKey:z=F,Header:E,expandedRowKeys:A,title:T,storage_key:L=T,has_feature:H=!0,use_storage:K=!0,addon_id:Y,has_joyride:J=!0,show_create_button:U=!0,item_selectable:B=!0,parseFilters:G=y.d,rowClassName:Q,mobileSwipeLeft:W}=e,X=Object(g.a)((e=>e.current_user.permissions)),Z=Object(g.a)((e=>e.is_mobile)),ee=`MagicTableStorage: ${L}`,[te]=l.a.useForm(),ae=(null===(a=j.find((e=>e.sorter)))||void 0===a?void 0:a.key)||j[0].key,se=(null===(p=j.find((e=>e.defaultSortOrder)))||void 0===p?void 0:p.defaultSortOrder)||j[0].defaultSortOrder||"ascend",re=Object(s.useMemo)((()=>(e=>{const{default_sort_order:t,default_sort_field:a,filters:s,local_storage_key:r,visible_columns:l,use_storage:n}=e,c=Object(d.c)(r);if(c&&n){const e=null===c||void 0===c?void 0:c.filters_value;return null!==e&&void 0!==e&&e.start_date||null!==e&&void 0!==e&&e.end_date||null!==e&&void 0!==e&&e.birthday_start_date||null!==e&&void 0!==e&&e.birthday_end_date||null!==e&&void 0!==e&&e.start_date_open||null!==e&&void 0!==e&&e.start_date_close||null!==e&&void 0!==e&&e.end_date_open||null!==e&&void 0!==e&&e.end_date_close?{...c,filters_value:{...c.filters_value,start_date:O(c.filters_value.start_date),end_date:O(c.filters_value.end_date),birthday_start_date:O(c.filters_value.birthday_start_date),birthday_end_date:O(c.filters_value.birthday_end_date),start_date_open:O(c.filters_value.start_date_open),start_date_close:O(c.filters_value.start_date_close),end_date_open:O(c.filters_value.end_date_open),end_date_close:O(c.filters_value.end_date_close)}}:c}const o=null===s||void 0===s?void 0:s.reduce(((e,t)=>t.default_value?t.rangepicker?{...e,[t.rangepicker.start_date_name]:t.default_value[0],[t.rangepicker.end_date_name]:t.default_value[1]}:{...e,[t.name]:t.default_value}:e),{});return{...b,sort_field:a,sort_order:h[t],filters_value:o,visible_columns:l}})({local_storage_key:ee,filters:x,default_sort_field:ae,default_sort_order:se,visible_columns:j.filter((e=>e.default_visible)).map((e=>e.key)),use_storage:K})),[j,ae,se,x,ee,K]),[le,ne]=Object(s.useReducer)(_,re);Object(c.a)((()=>{Object(d.d)(ee,{...le,page:1})}),[le]);const[ce,oe]=Object(s.useState)(""),[ie,de]=Object(s.useState)([]),[ue,be]=Object(s.useState)(0),_e=Object(s.useRef)(!1),pe=(e=>{const{columns:t,visible_columns:a=[],dispatch:s}=e,r=t.filter((e=>a.includes(e.key)||e.always_visible)),l=r.findIndex((e=>"actions"===e.key));return l&&(r[l]={...r[l],title:Object(m.jsx)(v.a,{columns:t,visible_columns:a,dispatch:s})}),r})({dispatch:ne,columns:j,visible_columns:le.visible_columns}),je={...Object(s.useMemo)((()=>j.filter((e=>e.include_key_on_query)).reduce(((e,t)=>{var a;return e[t.key]=null===(a=le.visible_columns)||void 0===a?void 0:a.includes(t.key),e}),{})),[j,le.visible_columns]),...G(le.filters_value),is_mobile:Z,search_query:ce,sort_field:le.sort_field,sort_order:le.sort_order,page:le.page,results:le.results},{loading:ve,refetch:me}=Object(f.f)(S,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:je,skip:!H,onError:e=>{console.log(e),$.a.captureException(e),o.b.error(Object(r.b)("phrases.loading_error"))},onCompleted:e=>{be(I(e)),1!==le.page&&_e.current?de((t=>[...t,...M(e)||[]])):de(M(e)||[])}}),he=Object(s.useCallback)((()=>{if(1===le.page)return me();ne({type:"set_page",payload:1})}),[le.page,me]),Oe=Object(s.useCallback)((()=>{_e.current=!0,ne({type:"set_page",payload:le.page+1})}),[le.page]),fe=Object(s.useCallback)(((e,t,a)=>{a.order&&(ne({type:"set_sort_field",payload:a.field}),ne({type:"set_sort_order",payload:"ascend"===a.order?"ASC":"DESC"})),e.current&&ne({type:"set_page",payload:e.current}),e.pageSize&&ne({type:"set_results",payload:e.pageSize})}),[]),ye=C({total_count:ue,results:le.results,records:ie,select_all_query:{query:R,variables:je,resolve:e=>t=>{let{data:a}=t;return e(M(a)||[])}},validateRow:N,rowSelector:Object(s.useCallback)((e=>e.filter(N).map(z)),[z,N])}),ge=Object(s.useMemo)((()=>A?A(ie):void 0),[ie,A]),we=Object(s.useCallback)((e=>{me(),ye.resetSelected();const t=Math.ceil((ue-e)/le.results);le.page>t&&ne({type:"set_page",payload:t})}),[le.page,me,le.results,ye,ue]),xe=Object(s.useCallback)((e=>{ne({type:"set_page",payload:1}),oe(e)}),[oe]),ke=Object(s.useCallback)((e=>{ne({type:"set_filters_value",payload:e}),ne({type:"set_page",payload:1})}),[]),Ce=Object(s.useMemo)((()=>H?e.permissions?e.permissions:e.permissions_key?{can_create:X[`can_create_${e.permissions_key}`],can_edit:X[`can_edit_${e.permissions_key}`],can_access:X[`can_access_${e.permissions_key}`]}:void 0:{can_create:!1,can_edit:!1,can_access:!1}),[H,e.permissions,e.permissions_key,X]),Se=Object(s.useCallback)((()=>{if(ye.resetSelected(),Z)return 1===le.page?void me():void ne({type:"set_page",payload:1});me()}),[Z,me,ye,le.page]);Object(s.useImperativeHandle)(t,(()=>({afterDestroyRecord:we,refetch:Se})));const Ie=Object(s.useMemo)((()=>({onSearch:xe,row_selection:ye,onFiltersChange:ke,data_source:ie,form:te,total_count:ue,loading:ve,new_columns:pe,onChange:fe,expanded_row_keys:ge,refetch:he,handleFetchMore:Oe,...e,has_feature:H,addon_id:Y,has_joyride:J,show_create_button:U,item_selectable:B,validateRow:N,rowSelectorKey:z,permissions:Ce,...le,dispatch:ne,rowClassName:Q,extra_actions:k})),[xe,ye,ke,ie,te,ue,ve,pe,fe,ge,he,Oe,e,H,J,U,N,z,Ce,le,Q,k,B,Y]),Me=Object(s.useMemo)((()=>null===x||void 0===x?void 0:x.reduce(((e,t)=>t.default_value?t.rangepicker?{...e,[t.rangepicker.start_date_name]:t.default_value[0],[t.rangepicker.end_date_name]:t.default_value[1]}:{...e,[t.name]:t.default_value}:e),{})),[x]);return Object(m.jsx)(u.a.Provider,{value:Ie,children:Object(m.jsxs)(i.b,{children:[E?Object(m.jsx)(E,{}):Object(m.jsx)(P,{}),Object(m.jsx)(l.a,{form:te,component:!1,layout:"vertical",onChange:Object(n.debounce)(ke,1e3),initialValues:{...Me,...le.filters_value},children:Object(m.jsx)(w.a,{Desktop:q,Mobile:V,mobileSwipeLeft:W})})]})})};z.displayName="MagicTable";t.a=Object(s.memo)(Object(s.forwardRef)(z))},635:function(e,t,a){"use strict";var s=a(0),r=a(50),l=a(1809),n=a(852),c=a(1814),o=a(3052),i=a(19),d=a(22);const u=e=>{let{columns:t,visible_columns:a,dispatch:c,setVisibleColumns:i}=e;const[u,_]=Object(s.useState)(!1),p=Object(s.useCallback)((()=>{const e=t.filter((e=>e.default_visible)).map((e=>e.key));null===c||void 0===c||c({type:"set_visible_columns",payload:e}),null===i||void 0===i||i(e)}),[t,c,i]),j=Object(s.useCallback)((e=>{if(a.includes(e)){const t=a.filter((t=>t!==e));return null===c||void 0===c||c({type:"set_visible_columns",payload:t}),void(null===i||void 0===i||i(t))}const t=[...a,e];null===c||void 0===c||c({type:"set_visible_columns",payload:t}),null===i||void 0===i||i(t)}),[c,i,a]),v=Object(s.useMemo)((()=>{const e=t.reduce(((e,t)=>{if(!t.title||t.always_visible)return e;const s={key:t.key,disabled:t.always_visible,label:Object(d.jsx)(b,{onClick:()=>j(t.key),checked:a.includes(t.key),children:t.title})};return[...e,s]}),[]);return[{key:"default_title",type:"group",label:Object(d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(d.jsx)("span",{children:Object(r.b)("words.column",{count:2})}),Object(d.jsx)("button",{className:"link",onClick:p,children:Object(r.b)("words.default")})]}),children:e}]}),[t,p,j,a]);return Object(d.jsx)(l.a,{menu:{items:v},trigger:["click"],open:u,onOpenChange:_,className:"no-print table-configuration",children:Object(d.jsx)(n.a,{title:Object(r.b)("phrases.column_settings"),placement:"left",children:Object(d.jsx)("div",{className:"link no-print",style:{fontSize:"15px"},children:Object(d.jsx)(o.a,{})})})})};u.displayName="ColumnsSettings",t.a=u;const b=Object(i.d)(c.a).withConfig({componentId:"wb__sc-1oenz8-0"})(["width:100%;"])},667:function(e,t,a){"use strict";var s=a(0),r=a(50),l=a(116);t.a=(e,t,a)=>Object(s.useCallback)((s=>{e?l.c.confirm({centered:!0,className:"webook-modal",title:Object(r.b)("words.attention"),maskClosable:!0,content:t(s),okText:Object(r.b)("phrases.yes_delete"),okType:"danger",cancelText:Object(r.b)("verbs.cancel"),onOk:()=>{a(s)}}):l.b.warning(Object(r.b)("phrases.no_permission_to_do_this"))}),[a,e,t])}}]);
//# sourceMappingURL=25.19bb9bee.chunk.js.map